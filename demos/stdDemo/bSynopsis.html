<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>bSynopsis</title>
        <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <!-- bower:js -->
        <script src="../../bower_components/modernizr/modernizr.js"></script>
        <script src="../../bower_components/jquery/dist/jquery.js"></script>
        <script src="../../bower_components/handlebars.js/index.js"></script>
        <script src="../../bower_components/jquery-textfill-try/index.js"></script>
        <script src="../../bower_components/isotope/index.js"></script>
        <script src="../../bower_components/rdfstore-js/index.js"></script>
        <script src="../../bower_components/rgbcolor/index.js"></script>
        <!-- endbower -->
        <script type="text/javascript" src="../../js/deprecated/jquery.quickfit.js"></script>
        <script type="text/javascript" src="../../build/bSynopsis.js"></script>
        <!-- bower:css -->
        <!-- endbower -->
        <link rel="stylesheet" href="../../css/bSynopsis.css" type="text/css" />
        <link rel="stylesheet" href="demo.css" type="text/css" />

    </head>
    <body>
        <div class="bSynopsis"></div>
        <form>
            <label for="inputbox">DataURL:</label> <input type="text"
                                                          name="inputbox" value="data/turtle.ttl">
            <p>
                <input type="button" name="insert" value="Insert data"
                       onclick="$('.bSynopsis').data('plugin_bSynopsis').insertDataPath(this.form.inputbox.value, 'text/turtle');">
        </form>
        <form>
            <label for="inputFile">Local turtle file:</label>
            <input type="file" id="inputFile"  onchange="$('.bSynopsis').data('plugin_bSynopsis').insertDataFile(this.files[0]);">
        </form>
        <form>
            <label for="serviceinputbox">Remote data service:</label> <input
                type="text" name="serviceinputbox"
                value="http://zaire.dimis.fim.uni-passau.de:8080/bigdata/sparql">
            <p>
                <label for="queryinputbox">Remote data query:</label>
                <textarea name="queryinputbox">SELECT ?subject ?predicate ?object { BIND( rdfs:label as ?predicate) ?subject ?predicate ?object. ?subject a <http://dbpedia.org/ontology/Place> . ?subject <http://dbpedia.org/property/rulingParty> ?x } LIMIT 500
                            </textarea>
                            <p>
                                <input type="button" name="insertRemote" value="Insert remote data"
                                       onclick="$('.bSynopsis').data('plugin_bSynopsis').insertRemoteDataQuery(this.form.serviceinputbox.value, this.form.queryinputbox.value);">
                                </form>
                            <form>
                                <input type="button" name="clearStore" value="clearStore"
                                       onclick="$('.bSynopsis').data('plugin_bSynopsis').clearStore();">
                            </form>
                <form>
                <label for="queryinputbox">Remote data query:</label>
                <textarea name="localQueryinputbox">SELECT ?s ?p ?o WHERE { ?s ?p ?o }
                            </textarea>
                            <p>
                <input type="button" name="runQuery" value="Run query on local store"
                       onclick="$('.bSynopsis').data('plugin_bSynopsis').runQuery(this.form.localQueryinputbox.value, console.log);">
                </form>



                            <script type="text/javascript">

                                $(function() {
                                    $('.bSynopsis').bSynopsis({
                                        nodeFilters: {
                                            blacklistURI: {
                                                config: new Array(".*someRegExp.*")
                                            },
                                            actor: {
                                                fn: function(plugin, nodes, config) {
                                                    $.each(nodes, function(i, node) {
                                                        if (node.label.value === "TestPerson") {
                                                            //TODO real actor
                                                            node.useTemplateIdentifier = "actor";
                                                        }
                                                    });
                                                    return nodes;
                                                },
                                                template: "<div>I'm an actor!</div>"
                                            }
                                        },
                                        layerOptions : {
                                            remoteOptions : {
                                                remoteLimit: 1000
                                            }
                                        }
                                    });
                                });
                            </script>
                            </body>
                            </html>
