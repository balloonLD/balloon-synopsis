/*! visaRDF 2013-04-17 */
function RGBColor(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var n in t)e==n&&(e=t[n]);for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],l=0;r.length>l;l++){var i=r[l].re,s=r[l].process,o=i.exec(e);o&&(channels=s(o),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:this.r>255?255:this.r,this.g=0>this.g||isNaN(this.g)?0:this.g>255?255:this.g,this.b=0>this.b||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n},this.getHelpXML=function(){for(var e=[],n=0;r.length>n;n++)for(var l=r[n].example,i=0;l.length>i;i++)e[e.length]=l[i];for(var s in t)e[e.length]=s;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(var n=0;e.length>n;n++)try{var a=document.createElement("li"),u=new RGBColor(e[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; "+"color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var p=document.createTextNode(" "+e[n]+" -> "+u.toRGB()+" -> "+u.toHex());a.appendChild(c),a.appendChild(p),o.appendChild(a)}catch(h){}return o}}this.Handlebars={},function(e){e.VERSION="1.0.rc.2",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,l){var i=l.inverse||function(){},s=l.fn,o=t.call(r);return o===n&&(r=r.call(this)),r===!0?s(this):r===!1||null==r?i(this):"[object Array]"===o?r.length>0?e.helpers.each(r,l):i(this):s(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(t>=e.logger.level){var r=e.logger.methodMap[t];"undefined"!=typeof console&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r,l=n.fn,i=n.inverse,s=0,o="";if(n.data&&(r=e.createFrame(n.data)),t&&"object"==typeof t)if(t instanceof Array)for(var a=t.length;a>s;s++)r&&(r.index=s),o+=l(t[s],{data:r});else for(var u in t)t.hasOwnProperty(u)&&(r&&(r.key=u),o+=l(t[u],{data:r}),s++);return 0===s&&(o=i(this)),o}),e.registerHelper("if",function(r,l){var i=t.call(r);return i===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?l.inverse(this):l.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,l=n.inverse;return n.fn=l,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)})}(this.Handlebars);var handlebars=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(e,t,n,r,l,i){var s=i.length-1;switch(l){case 1:return i[s-1];case 2:this.$=new r.ProgramNode([],i[s]);break;case 3:this.$=new r.ProgramNode(i[s-2],i[s]);break;case 4:this.$=new r.ProgramNode(i[s-1],[]);break;case 5:this.$=new r.ProgramNode(i[s]);break;case 6:this.$=new r.ProgramNode([],[]);break;case 7:this.$=new r.ProgramNode([]);break;case 8:this.$=[i[s]];break;case 9:i[s-1].push(i[s]),this.$=i[s-1];break;case 10:this.$=new r.BlockNode(i[s-2],i[s-1].inverse,i[s-1],i[s]);break;case 11:this.$=new r.BlockNode(i[s-2],i[s-1],i[s-1].inverse,i[s]);break;case 12:this.$=i[s];break;case 13:this.$=i[s];break;case 14:this.$=new r.ContentNode(i[s]);break;case 15:this.$=new r.CommentNode(i[s]);break;case 16:this.$=new r.MustacheNode(i[s-1][0],i[s-1][1]);break;case 17:this.$=new r.MustacheNode(i[s-1][0],i[s-1][1]);break;case 18:this.$=i[s-1];break;case 19:this.$=new r.MustacheNode(i[s-1][0],i[s-1][1]);break;case 20:this.$=new r.MustacheNode(i[s-1][0],i[s-1][1],!0);break;case 21:this.$=new r.PartialNode(i[s-1]);break;case 22:this.$=new r.PartialNode(i[s-2],i[s-1]);break;case 23:break;case 24:this.$=[[i[s-2]].concat(i[s-1]),i[s]];break;case 25:this.$=[[i[s-1]].concat(i[s]),null];break;case 26:this.$=[[i[s-1]],i[s]];break;case 27:this.$=[[i[s]],null];break;case 28:this.$=[[new r.DataNode(i[s])],null];break;case 29:i[s-1].push(i[s]),this.$=i[s-1];break;case 30:this.$=[i[s]];break;case 31:this.$=i[s];break;case 32:this.$=new r.StringNode(i[s]);break;case 33:this.$=new r.IntegerNode(i[s]);break;case 34:this.$=new r.BooleanNode(i[s]);break;case 35:this.$=new r.DataNode(i[s]);break;case 36:this.$=new r.HashNode(i[s]);break;case 37:i[s-1].push(i[s]),this.$=i[s-1];break;case 38:this.$=[i[s]];break;case 39:this.$=[i[s-2],i[s]];break;case 40:this.$=[i[s-2],new r.StringNode(i[s])];break;case 41:this.$=[i[s-2],new r.IntegerNode(i[s])];break;case 42:this.$=[i[s-2],new r.BooleanNode(i[s])];break;case 43:this.$=[i[s-2],new r.DataNode(i[s])];break;case 44:this.$=new r.PartialNameNode(i[s]);break;case 45:this.$=new r.IdNode(i[s]);break;case 46:i[s-2].push(i[s]),this.$=i[s-2];break;case 47:this.$=[i[s]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(e){throw Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],l=[null],i=[],s=this.table,o="",a=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});var p=this.lexer.yylloc;i.push(p);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,v,g,y,m,b,k,x,w={};;){if(v=r[r.length-1],this.defaultActions[v]?g=this.defaultActions[v]:((null===f||f===void 0)&&(f=t()),g=s[v]&&s[v][f]),g===void 0||!g.length||!g[0]){var S="";if(!c){x=[];for(m in s[v])this.terminals_[m]&&m>2&&x.push("'"+this.terminals_[m]+"'");S=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+v+", token: "+f);switch(g[0]){case 1:r.push(f),l.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(g[1]),f=null,d?(f=d,d=null):(u=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],w.$=l[l.length-b],w._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},h&&(w._$.range=[i[i.length-(b||1)].range[0],i[i.length-1].range[1]]),y=this.performAction.call(w,o,u,a,this.yy,g[1],l,i),y!==void 0)return y;b&&(r=r.slice(0,2*-1*b),l=l.slice(0,-1*b),i=i.slice(0,-1*b)),r.push(this.productions_[g[1]][0]),l.push(w.$),i.push(w._$),k=s[r[r.length-2]][r[r.length-1]],r.push(k);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var l=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[l[0],l[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return 20>e.length&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,l;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),s=0;i.length>s&&(n=this._input.match(this.rules[i[s]]),!n||t&&!(n[0].length>t[0].length)||(t=n,r=s,this.options.flex));s++);return t?(l=t[0].match(/(?:\r\n?|\n).*/g),l&&(this.yylineno+=l.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:l?l[l.length-1].length-l[l.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e!==void 0?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){switch(n){case 0:if("\\"!==t.yytext.slice(-1)&&this.begin("mu"),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1),this.begin("emu")),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1)),14;case 3:return t.yytext=t.yytext.substr(0,t.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return t.yytext=t.yytext.substr(3,t.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),30;case 22:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\'/g,"'"),30;case 23:return t.yytext=t.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return t.yytext=t.yytext.substr(1,t.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();Handlebars.Parser=handlebars,Handlebars.parse=function(e){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e)},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],l=this.params=e.slice(1),i=this.eligibleHelper=r.isSimple;this.isHelper=i&&(l.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r,l){e(t.id,l),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");for(var t=[],n=0,r=0,l=e.length;l>r;r++){var i=e[r];".."===i?n++:"."===i||"this"===i?this.isScoped=!0:t.push(i)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=1===e.length&&!this.isScoped&&0===n,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},Handlebars.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;errorProps.length>t;t++)this[errorProps[t]]=e[errorProps[t]]},Handlebars.Exception.prototype=Error(),Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return""+this.string},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?""+e:null==e||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return e||0===e?"[object Array]"===Object.prototype.toString.call(e)&&0===e.length?!0:!1:!0}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){for(var e,t,n,r=this.opcodes,l=[],i=0,s=r.length;s>i;i++)if(e=r[i],"DECLARE"===e.opcode)l.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var o=0;e.args.length>o;o++)n=e.args[o],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);l.push(e.opcode+" "+t.join(" "))}return l.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t,n=e.statements;this.opcodes=[];for(var r=0,l=n.length;l>r;r++)t=n[r],this[t.type](t);return this.isSimple=1===l,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),r=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[r]=n;for(var l=0,i=n.depths.list.length;i>l;l++)t=n.depths.list[l],2>t||this.addDepth(t-1);return r},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var l=this.classifyMustache(t);"helper"===l?this.helperMustache(t,n,r):"simple"===l?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("pushHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,r=e.pairs;this.opcode("pushHash");for(var l=0,i=r.length;i>l;l++)t=r[l],n=t[1],this.options.stringParams?this.opcode("pushStringParam",n.stringModeValue,n.type):this.accept(n),this.opcode("assignToHash",t[0])},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,l=r.parts[0];this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",l)},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),l=e.id.parts[0];if(this.options.knownHelpers[l])this.opcode("invokeKnownHelper",r.length,l);else{if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+l);this.opcode("invokeHelper",r.length,l)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;r>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var l=e.id.parts[0];r.knownHelpers[l]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("pushHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("pushHash"),r}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(e,t);var l,i=e.opcodes;for(this.i=0,s=i.length;s>this.i;this.i++)l=i[this.i],"DECLARE"===l.opcode?this[l.name]=l.value:this[l.opcode].apply(this,l.args);return this.createFunctionContext(r)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1],e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],l=0,i=this.environment.depths.list.length;i>l;l++)r.push("depth"+this.environment.depths.list[l]);if(e)return r.push(this.source.join("\n  ")),Function.apply(this,r);var s="function "+(this.name||"")+"("+r.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,s+"\n\n"),s},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(),t="";this.context.aliases.escapeExpression="this.escapeExpression",e&&"appendContent"===e.opcode&&(t=" + "+this.quotedString(e.args[0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))
},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.pushStack(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.pushStack(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)},pushHash:function(){this.push("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.pushStack(e)},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t);this.register("foundHelper",n.name),this.pushStack("foundHelper ? foundHelper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.pushStack(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var t=this.setupHelper(0,e),n=this.lastHelper=this.nameLookup("helpers",e,"helper");this.register("foundHelper",n);var r=this.nameLookup("depth"+this.lastContext,e,"context"),l=this.nextStack();this.source.push("if (foundHelper) { "+l+" = foundHelper.call("+t.callParams+"); }"),this.source.push("else { "+l+" = "+r+"; "+l+" = typeof "+l+" === functionType ? "+l+".apply(depth0) : "+l+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack();if(this.options.stringParams){var n=this.popStack();this.popStack(),this.source.push("hashTypes['"+e+"'] = "+n+";")}var r=this.topStack();this.source.push(r+"['"+e+"'] = "+t+";")},compiler:t,compileChildren:function(e,t){for(var n,r,l=e.children,i=0,s=l.length;s>i;i++){n=l[i],r=new this.compiler,this.context.programs.push("");var o=this.context.programs.length;n.index=o,n.name="program"+o,this.context.programs[o]=r.compile(n,t,this.context)}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],r=n.depths.list,l=[n.index,n.name,"data"],i=0,s=r.length;s>i;i++)t=r[i],1===t?l.push("depth0"):l.push("depth"+(t-1));return 0===r.length?"self.program("+l.join(", ")+")":(l.shift(),"self.programWithDepth("+l.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.compileStack.push(new n(e)),e},pushStack:function(e){var t=this.incrStack();return this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t=this.topStack(),n=e.call(this,t);return/^depth/.test(t)&&(t=this.nextStack()),this.source.push(t+" = "+n+";"),t},nextStack:function(){var e=this.incrStack();return this.compileStack.push(e),e},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var e=this.compileStack.pop();return e instanceof n?e.value:(this.stackSlot--,e)},topStack:function(){var e=this.compileStack[this.compileStack.length-1];return e instanceof n?e.value:e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t){var n=[];this.setupParams(e,n);var r=this.nameLookup("helpers",t,"helper");return{params:n,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:["depth0",this.quotedString(t)].concat(n).join(", ")}},setupParams:function(e,t){var n,r,l,i=[],s=[],o=[];i.push("hash:"+this.popStack()),r=this.popStack(),l=this.popStack(),(l||r)&&(l||(this.context.aliases.self="this",l="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),i.push("inverse:"+r),i.push("fn:"+l));for(var a=0;e>a;a++)n=this.popStack(),t.push(n),this.options.stringParams&&(o.push(this.popStack()),s.push(this.popStack()));return this.options.stringParams&&(i.push("contexts:["+s.join(",")+"]"),i.push("types:["+o.join(",")+"]"),i.push("hashTypes:hashTypes")),this.options.data&&i.push("data:data"),t.push("{"+i.join(",")+"}"),t.join(", ")}};for(var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=t.RESERVED_WORDS={},i=0,s=r.length;s>i;i++)l[r[i]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){if("string"!=typeof e)throw new Handlebars.Exception("You must pass a string to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function n(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),l=(new Handlebars.JavaScriptCompiler).compile(r,t,void 0,!0);return Handlebars.template(l)}if("string"!=typeof e)throw new Handlebars.Exception("You must pass a string to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var r;return function(e,t){return r||(r=n()),r.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:r=this.programs[e]=Handlebars.VM.program(t)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(n,r){return r=r||{},e.call(t,Handlebars,n,r.helpers,r.partials,r.data)}},programWithDepth:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(r,l){return l=l||{},e.apply(this,[r,l.data||t].concat(n))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,l,i){var s={helpers:r,partials:l,data:i};if(void 0===e)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,s);if(Handlebars.compile)return l[t]=Handlebars.compile(e,{data:void 0!==i}),l[t](n,s);throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template,function(e,t){function n(e){var t=dt[e]={};return K.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&1===e.nodeType){var l="data-"+n.replace(gt,"-$1").toLowerCase();if(r=e.getAttribute(l),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:vt.test(r)?K.parseJSON(r):r}catch(i){}K.data(e,n,r)}else r=t}return r}function l(e){var t;for(t in e)if(("data"!==t||!K.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function i(){return!1}function s(){return!0}function o(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function a(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,n){if(t=t||0,K.isFunction(t))return K.grep(e,function(e,r){var l=!!t.call(e,r,e);return l===n});if(t.nodeType)return K.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=K.grep(e,function(e){return 1===e.nodeType});if(Ot.test(t))return K.filter(t,r,!n);t=K.filter(t,r)}return K.grep(e,function(e){return K.inArray(e,t)>=0===n})}function c(e){var t=Mt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function p(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(1===t.nodeType&&K.hasData(e)){var n,r,l,i=K._data(e),s=K._data(t,i),o=i.events;if(o){delete s.handle,s.events={};for(n in o)for(r=0,l=o[n].length;l>r;r++)K.event.add(t,n,o[n][r])}s.data&&(s.data=K.extend({},s.data))}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),K.support.html5Clone&&e.innerHTML&&!K.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Jt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(K.expando))}function d(e){return e.getElementsByTagName!==t?e.getElementsByTagName("*"):e.querySelectorAll!==t?e.querySelectorAll("*"):[]}function v(e){Jt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,l=mn.length;l--;)if(t=mn[l]+n,t in e)return t;return r}function y(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)}function m(e,t){for(var n,r,l=[],i=0,s=e.length;s>i;i++)n=e[i],n.style&&(l[i]=K._data(n,"olddisplay"),t?(l[i]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&y(n)&&(l[i]=K._data(n,"olddisplay",w(n.nodeName)))):(r=nn(n,"display"),l[i]||"none"===r||K._data(n,"olddisplay",r)));for(i=0;s>i;i++)n=e[i],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?l[i]||"":"none"));return e}function b(e,t,n){var r=pn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r){for(var l=n===(r?"border":"content")?4:"width"===t?1:0,i=0;4>l;l+=2)"margin"===n&&(i+=K.css(e,n+yn[l],!0)),r?("content"===n&&(i-=parseFloat(nn(e,"padding"+yn[l]))||0),"margin"!==n&&(i-=parseFloat(nn(e,"border"+yn[l]+"Width"))||0)):(i+=parseFloat(nn(e,"padding"+yn[l]))||0,"padding"!==n&&(i+=parseFloat(nn(e,"border"+yn[l]+"Width"))||0));return i}function x(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,l=!0,i=K.support.boxSizing&&"border-box"===K.css(e,"boxSizing");if(0>=r||null==r){if(r=nn(e,t),(0>r||null==r)&&(r=e.style[t]),hn.test(r))return r;l=i&&(K.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+k(e,t,n||(i?"border":"content"),l)+"px"}function w(e){if(dn[e])return dn[e];var t=K("<"+e+">").appendTo(H.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(rn=H.body.appendChild(rn||K.extend(H.createElement("iframe"),{frameBorder:0,width:0,height:0})),ln&&rn.createElement||(ln=(rn.contentWindow||rn.contentDocument).document,ln.write("<!doctype html><html><body>"),ln.close()),t=ln.body.appendChild(ln.createElement(e)),n=nn(t,"display"),H.body.removeChild(rn)),dn[e]=n,n}function S(e,t,n,r){var l;if(K.isArray(t))K.each(t,function(t,l){n||xn.test(e)?r(e,l):S(e+"["+("object"==typeof l?t:"")+"]",l,n,r)});else if(n||"object"!==K.type(t))r(e,t);else for(l in t)S(e+"["+l+"]",t[l],n,r)}function C(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,l,i,s=t.toLowerCase().split(tt),o=0,a=s.length;if(K.isFunction(n))for(;a>o;o++)r=s[o],i=/^\+/.test(r),i&&(r=r.substr(1)||"*"),l=e[r]=e[r]||[],l[i?"unshift":"push"](n)}}function E(e,n,r,l,i,s){i=i||n.dataTypes[0],s=s||{},s[i]=!0;for(var o,a=e[i],u=0,c=a?a.length:0,p=e===Pn;c>u&&(p||!o);u++)o=a[u](n,r,l),"string"==typeof o&&(!p||s[o]?o=t:(n.dataTypes.unshift(o),o=E(e,n,r,l,o,s)));return!p&&o||s["*"]||(o=E(e,n,r,l,"*",s)),o}function F(e,n){var r,l,i=K.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((i[r]?e:l||(l={}))[r]=n[r]);l&&K.extend(!0,e,l)}function T(e,n,r){var l,i,s,o,a=e.contents,u=e.dataTypes,c=e.responseFields;for(i in c)i in r&&(n[c[i]]=r[i]);for(;"*"===u[0];)u.shift(),l===t&&(l=e.mimeType||n.getResponseHeader("content-type"));if(l)for(i in a)if(a[i]&&a[i].test(l)){u.unshift(i);break}if(u[0]in r)s=u[0];else{for(i in r){if(!u[0]||e.converters[i+" "+u[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==u[0]&&u.unshift(s),r[s]):t}function A(e,t){var n,r,l,i,s=e.dataTypes.slice(),o=s[0],a={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;l=s[++u];)if("*"!==l){if("*"!==o&&o!==l){if(n=a[o+" "+l]||a["* "+l],!n)for(r in a)if(i=r.split(" "),i[1]===l&&(n=a[o+" "+i[0]]||a["* "+i[0]])){n===!0?n=a[r]:a[r]!==!0&&(l=i[0],s.splice(u--,0,l));break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+o+" to "+l}}}o=l}return{state:"success",data:t}}function _(){try{return new e.XMLHttpRequest}catch(t){}}function N(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function D(){return setTimeout(function(){Wn=t},0),Wn=K.now()}function I(e,t){K.each(t,function(t,n){for(var r=(er[t]||[]).concat(er["*"]),l=0,i=r.length;i>l;l++)if(r[l].call(e,t,n))return})}function Q(e,t,n){var r,l=0,i=Zn.length,s=K.Deferred().always(function(){delete o.elem}),o=function(){for(var t=Wn||D(),n=Math.max(0,a.startTime+a.duration-t),r=n/a.duration||0,l=1-r,i=0,o=a.tweens.length;o>i;i++)a.tweens[i].run(l);return s.notifyWith(e,[a,l,n]),1>l&&o?n:(s.resolveWith(e,[a]),!1)},a=s.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Wn||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=K.Tween(e,a.opts,t,n,a.opts.specialEasing[t]||a.opts.easing);return a.tweens.push(r),r},stop:function(t){for(var n=0,r=t?a.tweens.length:0;r>n;n++)a.tweens[n].run(1);return t?s.resolveWith(e,[a,t]):s.rejectWith(e,[a,t]),this}}),u=a.props;for(L(u,a.opts.specialEasing);i>l;l++)if(r=Zn[l].call(a,e,u,a.opts))return r;return I(a,u),K.isFunction(a.opts.start)&&a.opts.start.call(e,a),K.fx.timer(K.extend(o,{anim:a,queue:a.opts.queue,elem:e})),a.progress(a.opts.progress).done(a.opts.done,a.opts.complete).fail(a.opts.fail).always(a.opts.always)}function L(e,t){var n,r,l,i,s;for(n in e)if(r=K.camelCase(n),l=t[r],i=e[n],K.isArray(i)&&(l=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),s=K.cssHooks[r],s&&"expand"in s){i=s.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=l)}else t[r]=l}function R(e,t,n){var r,l,i,s,o,a,u,c,p,h=this,f=e.style,d={},v=[],g=e.nodeType&&y(e);n.queue||(c=K._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,h.always(function(){h.always(function(){c.unqueued--,K.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===K.css(e,"display")&&"none"===K.css(e,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==w(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",K.support.shrinkWrapBlocks||h.done(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Vn.exec(i)){if(delete t[r],a=a||"toggle"===i,i===(g?"hide":"show"))continue;v.push(r)}if(s=v.length){o=K._data(e,"fxshow")||K._data(e,"fxshow",{}),"hidden"in o&&(g=o.hidden),a&&(o.hidden=!g),g?K(e).show():h.done(function(){K(e).hide()}),h.done(function(){var t;K.removeData(e,"fxshow",!0);for(t in d)K.style(e,t,d[t])});for(r=0;s>r;r++)l=v[r],u=h.createTween(l,g?o[l]:0),d[l]=o[l]||K.style(e,l),l in o||(o[l]=u.start,g&&(u.end=u.start,u.start="width"===l||"height"===l?1:0))}}function O(e,t,n,r,l){return new O.prototype.init(e,t,n,r,l)}function P(e,t){var n,r={height:e},l=0;for(t=t?1:0;4>l;l+=2-t)n=yn[l],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function j(e){return K.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var M,B,H=e.document,U=e.location,G=e.navigator,X=e.jQuery,z=e.$,q=Array.prototype.push,$=Array.prototype.slice,W=Array.prototype.indexOf,J=Object.prototype.toString,V=Object.prototype.hasOwnProperty,Y=String.prototype.trim,K=function(e,t){return new K.fn.init(e,t,M)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,lt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,it=/^[\],:{}\s]*$/,st=/(?:^|:|,)(?:\s*\[)+/g,ot=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ut=/^-ms-/,ct=/-([\da-z])/gi,pt=function(e,t){return(t+"").toUpperCase()},ht=function(){H.addEventListener?(H.removeEventListener("DOMContentLoaded",ht,!1),K.ready()):"complete"===H.readyState&&(H.detachEvent("onreadystatechange",ht),K.ready())},ft={};K.fn=K.prototype={constructor:K,init:function(e,n,r){var l,i,s;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(l="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:rt.exec(e),!l||!l[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(l[1])return n=n instanceof K?n[0]:n,s=n&&n.nodeType?n.ownerDocument||n:H,e=K.parseHTML(l[1],s,!0),lt.test(l[1])&&K.isPlainObject(n)&&this.attr.call(e,n,!0),K.merge(this,e);if(i=H.getElementById(l[2]),i&&i.parentNode){if(i.id!==l[2])return r.find(e);this.length=1,this[0]=i}return this.context=H,this.selector=e,this}return K.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=K.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return K.each(this,e,t)},ready:function(e){return K.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(K.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:[].sort,splice:[].splice},K.fn.init.prototype=K.fn,K.extend=K.fn.extend=function(){var e,n,r,l,i,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},a=2),"object"==typeof o||K.isFunction(o)||(o={}),u===a&&(o=this,--a);u>a;a++)if(null!=(e=arguments[a]))for(n in e)r=o[n],l=e[n],o!==l&&(c&&l&&(K.isPlainObject(l)||(i=K.isArray(l)))?(i?(i=!1,s=r&&K.isArray(r)?r:[]):s=r&&K.isPlainObject(r)?r:{},o[n]=K.extend(c,s,l)):l!==t&&(o[n]=l));return o},K.extend({noConflict:function(t){return e.$===K&&(e.$=z),t&&e.jQuery===K&&(e.jQuery=X),K},isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){if(e===!0?!--K.readyWait:!K.isReady){if(!H.body)return setTimeout(K.ready,1);K.isReady=!0,e!==!0&&--K.readyWait>0||(B.resolveWith(H,[K]),K.fn.trigger&&K(H).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray||function(e){return"array"===K.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":ft[J.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==K.type(e)||e.nodeType||K.isWindow(e))return!1;try{if(e.constructor&&!V.call(e,"constructor")&&!V.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||V.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||H,(r=lt.exec(e))?[t.createElement(r[1])]:(r=K.buildFragment([e],t,n?null:[]),K.merge([],(r.cacheable?K.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(n){return n&&"string"==typeof n?(n=K.trim(n),e.JSON&&e.JSON.parse?e.JSON.parse(n):it.test(n.replace(ot,"@").replace(at,"]").replace(st,""))?Function("return "+n)():(K.error("Invalid JSON: "+n),t)):null},parseXML:function(n){var r,l;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(l=new DOMParser,r=l.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(i){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||K.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ut,"ms-").replace(ct,pt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var l,i=0,s=e.length,o=s===t||K.isFunction(e);if(r)if(o){for(l in e)if(n.apply(e[l],r)===!1)break}else for(;s>i&&n.apply(e[i++],r)!==!1;);else if(o){for(l in e)if(n.call(e[l],l,e[l])===!1)break}else for(;s>i&&n.call(e[i],i,e[i++])!==!1;);return e},trim:Y&&!Y.call("﻿ ")?function(e){return null==e?"":Y.call(e)}:function(e){return null==e?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=K.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||K.isWindow(e)?q.call(r,e):K.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(W)return W.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,l=e.length,i=0;if("number"==typeof r)for(;r>i;i++)e[l++]=n[i];else for(;n[i]!==t;)e[l++]=n[i++];return e.length=l,e},grep:function(e,t,n){var r,l=[],i=0,s=e.length;for(n=!!n;s>i;i++)r=!!t(e[i],i),n!==r&&l.push(e[i]);return l},map:function(e,n,r){var l,i,s=[],o=0,a=e.length,u=e instanceof K||a!==t&&"number"==typeof a&&(a>0&&e[0]&&e[a-1]||0===a||K.isArray(e));if(u)for(;a>o;o++)l=n(e[o],o,r),null!=l&&(s[s.length]=l);else for(i in e)l=n(e[i],i,r),null!=l&&(s[s.length]=l);return s.concat.apply([],s)},guid:1,proxy:function(e,n){var r,l,i;return"string"==typeof n&&(r=e[n],n=e,e=r),K.isFunction(e)?(l=$.call(arguments,2),i=function(){return e.apply(n,l.concat($.call(arguments)))},i.guid=e.guid=e.guid||K.guid++,i):t},access:function(e,n,r,l,i,s,o){var a,u=null==r,c=0,p=e.length;if(r&&"object"==typeof r){for(c in r)K.access(e,n,c,r[c],1,s,l);i=1}else if(l!==t){if(a=o===t&&K.isFunction(l),u&&(a?(a=n,n=function(e,t,n){return a.call(K(e),n)}):(n.call(e,l),n=null)),n)for(;p>c;c++)n(e[c],r,a?l.call(e[c],c,n(e[c],r)):l,o);i=1}return i?e:u?n.call(e):p?n(e[0],r):s},now:function(){return(new Date).getTime()}}),K.ready.promise=function(t){if(!B)if(B=K.Deferred(),"complete"===H.readyState)setTimeout(K.ready,1);else if(H.addEventListener)H.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",K.ready,!1);else{H.attachEvent("onreadystatechange",ht),e.attachEvent("onload",K.ready);var n=!1;try{n=null==e.frameElement&&H.documentElement}catch(r){}n&&n.doScroll&&function l(){if(!K.isReady){try{n.doScroll("left")}catch(e){return setTimeout(l,50)}K.ready()}}()}return B.promise(t)},K.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ft["[object "+t+"]"]=t.toLowerCase()}),M=K(H);var dt={};K.Callbacks=function(e){e="string"==typeof e?dt[e]||n(e):K.extend({},e);var r,l,i,s,o,a,u=[],c=!e.once&&[],p=function(t){for(r=e.memory&&t,l=!0,a=s||0,s=0,o=u.length,i=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}i=!1,u&&(c?c.length&&p(c.shift()):r?u=[]:h.disable())},h={add:function(){if(u){var t=u.length;(function n(t){K.each(t,function(t,r){var l=K.type(r);"function"===l?e.unique&&h.has(r)||u.push(r):r&&r.length&&"string"!==l&&n(r)})})(arguments),i?o=u.length:r&&(s=t,p(r))}return this},remove:function(){return u&&K.each(arguments,function(e,t){for(var n;(n=K.inArray(t,u,n))>-1;)u.splice(n,1),i&&(o>=n&&o--,a>=n&&a--)}),this},has:function(e){return K.inArray(e,u)>-1},empty:function(){return u=[],this},disable:function(){return u=c=r=t,this},disabled:function(){return!u},lock:function(){return c=t,r||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||l&&!c||(i?c.push(t):p(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!l}};return h},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return l.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(n){K.each(t,function(t,r){var i=r[0],s=e[t];l[r[1]](K.isFunction(s)?function(){var e=s.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[i+"With"](this===l?n:this,[e])}:n[i])}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,r):r}},l={};return r.pipe=r.then,K.each(t,function(e,i){var s=i[2],o=i[3];r[i[1]]=s.add,o&&s.add(function(){n=o},t[1^e][2].disable,t[2][2].lock),l[i[0]]=s.fire,l[i[0]+"With"]=s.fireWith}),r.promise(l),e&&e.call(l,l),l},when:function(e){var t,n,r,l=0,i=$.call(arguments),s=i.length,o=1!==s||e&&K.isFunction(e.promise)?s:0,a=1===o?e:K.Deferred(),u=function(e,n,r){return function(l){n[e]=this,r[e]=arguments.length>1?$.call(arguments):l,r===t?a.notifyWith(n,r):--o||a.resolveWith(n,r)}};if(s>1)for(t=Array(s),n=Array(s),r=Array(s);s>l;l++)i[l]&&K.isFunction(i[l].promise)?i[l].promise().done(u(l,r,i)).fail(a.reject).progress(u(l,n,t)):--o;return o||a.resolveWith(r,i),a.promise()}}),K.support=function(){var n,r,l,i,s,o,a,u,c,p,h,f=H.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=f.getElementsByTagName("*"),l=f.getElementsByTagName("a")[0],!r||!l||!r.length)return{};i=H.createElement("select"),s=i.appendChild(H.createElement("option")),o=f.getElementsByTagName("input")[0],l.style.cssText="top:1px;float:left;opacity:.5",n={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(l.getAttribute("style")),hrefNormalized:"/a"===l.getAttribute("href"),opacity:/^0.5/.test(l.style.opacity),cssFloat:!!l.style.cssFloat,checkOn:"on"===o.value,optSelected:s.selected,getSetAttribute:"t"!==f.className,enctype:!!H.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==H.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===H.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,n.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,n.optDisabled=!s.disabled;try{delete f.test}catch(d){n.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",h=function(){n.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick"),f.detachEvent("onclick",h)),o=H.createElement("input"),o.value="t",o.setAttribute("type","radio"),n.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),f.appendChild(o),a=H.createDocumentFragment(),a.appendChild(f.lastChild),n.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,n.appendChecked=o.checked,a.removeChild(o),a.appendChild(f),f.attachEvent)for(c in{submit:!0,change:!0,focusin:!0})u="on"+c,p=u in f,p||(f.setAttribute(u,"return;"),p="function"==typeof f[u]),n[c+"Bubbles"]=p;return K(function(){var r,l,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=H.getElementsByTagName("body")[0];a&&(r=H.createElement("div"),r.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(r,a.firstChild),l=H.createElement("div"),r.appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=l.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",n.reliableHiddenOffsets=p&&0===i[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===l.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(l,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(l,null)||{width:"4px"}).width,s=H.createElement("div"),s.style.cssText=l.style.cssText=o,s.style.marginRight=s.style.width="0",l.style.width="1px",l.appendChild(s),n.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),l.style.zoom!==t&&(l.innerHTML="",l.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.style.overflow="visible",l.innerHTML="<div></div>",l.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==l.offsetWidth,r.style.zoom=1),a.removeChild(r),r=l=i=s=null)}),a.removeChild(f),r=l=i=s=o=a=f=null,n}();var vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;K.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?K.cache[e[K.expando]]:e[K.expando],!!e&&!l(e)},data:function(e,n,r,l){if(K.acceptData(e)){var i,s,o=K.expando,a="string"==typeof n,u=e.nodeType,c=u?K.cache:e,p=u?e[o]:e[o]&&o;if(p&&c[p]&&(l||c[p].data)||!a||r!==t)return p||(u?e[o]=p=K.deletedIds.pop()||K.guid++:p=o),c[p]||(c[p]={},u||(c[p].toJSON=K.noop)),("object"==typeof n||"function"==typeof n)&&(l?c[p]=K.extend(c[p],n):c[p].data=K.extend(c[p].data,n)),i=c[p],l||(i.data||(i.data={}),i=i.data),r!==t&&(i[K.camelCase(n)]=r),a?(s=i[n],null==s&&(s=i[K.camelCase(n)])):s=i,s}},removeData:function(e,t,n){if(K.acceptData(e)){var r,i,s,o=e.nodeType,a=o?K.cache:e,u=o?e[K.expando]:K.expando;if(a[u]){if(t&&(r=n?a[u]:a[u].data)){K.isArray(t)||(t in r?t=[t]:(t=K.camelCase(t),t=t in r?[t]:t.split(" ")));for(i=0,s=t.length;s>i;i++)delete r[t[i]];if(!(n?l:K.isEmptyObject)(r))return}(n||(delete a[u].data,l(a[u])))&&(o?K.cleanData([e],!0):K.support.deleteExpando||a!=a.window?delete a[u]:a[u]=null)}}},_data:function(e,t,n){return K.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&K.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),K.fn.extend({data:function(e,n){var l,i,s,o,a,u=this[0],c=0,p=null;if(e===t){if(this.length&&(p=K.data(u),1===u.nodeType&&!K._data(u,"parsedAttrs"))){for(s=u.attributes,a=s.length;a>c;c++)o=s[c].name,o.indexOf("data-")||(o=K.camelCase(o.substring(5)),r(u,o,p[o]));K._data(u,"parsedAttrs",!0)}return p}return"object"==typeof e?this.each(function(){K.data(this,e)}):(l=e.split(".",2),l[1]=l[1]?"."+l[1]:"",i=l[1]+"!",K.access(this,function(n){return n===t?(p=this.triggerHandler("getData"+i,[l[0]]),p===t&&u&&(p=K.data(u,e),p=r(u,e,p)),p===t&&l[1]?this.data(l[0]):p):(l[1]=n,this.each(function(){var t=K(this);
t.triggerHandler("setData"+i,l),K.data(this,e,n),t.triggerHandler("changeData"+i,l)}),t)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){K.removeData(this,e)})}}),K.extend({queue:function(e,n,r){var l;return e?(n=(n||"fx")+"queue",l=K._data(e,n),r&&(!l||K.isArray(r)?l=K._data(e,n,K.makeArray(r)):l.push(r)),l||[]):t},dequeue:function(e,t){t=t||"fx";var n=K.queue(e,t),r=n.length,l=n.shift(),i=K._queueHooks(e,t),s=function(){K.dequeue(e,t)};"inprogress"===l&&(l=n.shift(),r--),l&&("fx"===t&&n.unshift("inprogress"),delete i.stop,l.call(e,s,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K._data(e,n)||K._data(e,n,{empty:K.Callbacks("once memory").add(function(){K.removeData(e,t+"queue",!0),K.removeData(e,n,!0)})})}}),K.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?K.queue(this[0],e):n===t?this:this.each(function(){var t=K.queue(this,e,n);K._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},delay:function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,l=1,i=K.Deferred(),s=this,o=this.length,a=function(){--l||i.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";o--;)r=K._data(s[o],e+"queueHooks"),r&&r.empty&&(l++,r.empty.add(a));return a(),i.promise(n)}});var yt,mt,bt,kt=/[\t\r\n]/g,xt=/\r/g,wt=/^(?:button|input)$/i,St=/^(?:button|input|object|select|textarea)$/i,Ct=/^a(?:rea|)$/i,Et=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ft=K.support.getSetAttribute;K.fn.extend({attr:function(e,t){return K.access(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})},prop:function(e,t){return K.access(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return e=K.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,l,i,s,o;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,r=this.length;r>n;n++)if(l=this[n],1===l.nodeType)if(l.className||1!==t.length){for(i=" "+l.className+" ",s=0,o=t.length;o>s;s++)0>i.indexOf(" "+t[s]+" ")&&(i+=t[s]+" ");l.className=K.trim(i)}else l.className=e;return this},removeClass:function(e){var n,r,l,i,s,o,a;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),o=0,a=this.length;a>o;o++)if(l=this[o],1===l.nodeType&&l.className){for(r=(" "+l.className+" ").replace(kt," "),i=0,s=n.length;s>i;i++)for(;r.indexOf(" "+n[i]+" ")>=0;)r=r.replace(" "+n[i]+" "," ");l.className=e?K.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return K.isFunction(e)?this.each(function(n){K(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var l,i=0,s=K(this),o=t,a=e.split(tt);l=a[i++];)o=r?o:!s.hasClass(l),s[o?"addClass":"removeClass"](l);else("undefined"===n||"boolean"===n)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||e===!1?"":K._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(kt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,l,i=this[0];{if(arguments.length)return l=K.isFunction(e),this.each(function(r){var i,s=K(this);1===this.nodeType&&(i=l?e.call(this,r,s.val()):e,null==i?i="":"number"==typeof i?i+="":K.isArray(i)&&(i=K.map(i,function(e){return null==e?"":e+""})),n=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,i,"value")!==t||(this.value=i))});if(i)return n=K.valHooks[i.type]||K.valHooks[i.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(i,"value"))!==t?r:(r=i.value,"string"==typeof r?r.replace(xt,""):null==r?"":r)}}}),K.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,l=e.selectedIndex,i="select-one"===e.type||0>l,s=i?null:[],o=i?l+1:r.length,a=0>l?o:i?l:0;o>a;a++)if(n=r[a],!(!n.selected&&a!==l||(K.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&K.nodeName(n.parentNode,"optgroup"))){if(t=K(n).val(),i)return t;s.push(t)}return s},set:function(e,t){var n=K.makeArray(t);return K(e).find("option").each(function(){this.selected=K.inArray(K(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,l){var i,s,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return l&&K.isFunction(K.fn[n])?K(e)[n](r):e.getAttribute===t?K.prop(e,n,r):(o=1!==a||!K.isXMLDoc(e),o&&(n=n.toLowerCase(),s=K.attrHooks[n]||(Et.test(n)?mt:yt)),r!==t?null===r?(K.removeAttr(e,n),t):s&&"set"in s&&o&&(i=s.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r):s&&"get"in s&&o&&null!==(i=s.get(e,n))?i:(i=e.getAttribute(n),null===i?t:i))},removeAttr:function(e,t){var n,r,l,i,s=0;if(t&&1===e.nodeType)for(r=t.split(tt);r.length>s;s++)l=r[s],l&&(n=K.propFix[l]||l,i=Et.test(l),i||K.attr(e,l,""),e.removeAttribute(Ft?l:n),i&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(wt.test(e.nodeName)&&e.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===t&&K.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return yt&&K.nodeName(e,"button")?yt.get(e,t):t in e?e.value:null},set:function(e,n,r){return yt&&K.nodeName(e,"button")?yt.set(e,n,r):(e.value=n,t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var l,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!K.isXMLDoc(e),s&&(n=K.propFix[n]||n,i=K.propHooks[n]),r!==t?i&&"set"in i&&(l=i.set(e,r,n))!==t?l:e[n]=r:i&&"get"in i&&null!==(l=i.get(e,n))?l:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):St.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:t}}}}),mt={get:function(e,n){var r,l=K.prop(e,n);return l===!0||"boolean"!=typeof l&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?K.removeAttr(e,n):(r=K.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ft||(bt={name:!0,id:!0,coords:!0},yt=K.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?""!==r.value:r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=H.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},K.each(["width","height"],function(e,n){K.attrHooks[n]=K.extend(K.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})}),K.attrHooks.contenteditable={get:yt.get,set:function(e,t,n){""===t&&(t="false"),yt.set(e,t,n)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(e,n){K.attrHooks[n]=K.extend(K.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null===r?t:r}})}),K.support.style||(K.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(e,n){return K.isArray(n)?e.checked=K.inArray(K(e).val(),n)>=0:t}})});var Tt=/^(?:textarea|input|select)$/i,At=/^([^\.]*|)(?:\.(.+)|)$/,_t=/(?:^|\s)hover(\.\S+|)\b/,Nt=/^key/,Dt=/^(?:mouse|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,Qt=function(e){return K.event.special.hover?e:e.replace(_t,"mouseenter$1 mouseleave$1")};K.event={add:function(e,n,r,l,i){var s,o,a,u,c,p,h,f,d,v,g;if(3!==e.nodeType&&8!==e.nodeType&&n&&r&&(s=K._data(e))){for(r.handler&&(d=r,r=d.handler,i=d.selector),r.guid||(r.guid=K.guid++),a=s.events,a||(s.events=a={}),o=s.handle,o||(s.handle=o=function(e){return K===t||e&&K.event.triggered===e.type?t:K.event.dispatch.apply(o.elem,arguments)},o.elem=e),n=K.trim(Qt(n)).split(" "),u=0;n.length>u;u++)c=At.exec(n[u])||[],p=c[1],h=(c[2]||"").split(".").sort(),g=K.event.special[p]||{},p=(i?g.delegateType:g.bindType)||p,g=K.event.special[p]||{},f=K.extend({type:p,origType:c[1],data:l,handler:r,guid:r.guid,selector:i,needsContext:i&&K.expr.match.needsContext.test(i),namespace:h.join(".")},d),v=a[p],v||(v=a[p]=[],v.delegateCount=0,g.setup&&g.setup.call(e,l,h,o)!==!1||(e.addEventListener?e.addEventListener(p,o,!1):e.attachEvent&&e.attachEvent("on"+p,o))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=r.guid)),i?v.splice(v.delegateCount++,0,f):v.push(f),K.event.global[p]=!0;e=null}},global:{},remove:function(e,t,n,r,l){var i,s,o,a,u,c,p,h,f,d,v,g=K.hasData(e)&&K._data(e);if(g&&(h=g.events)){for(t=K.trim(Qt(t||"")).split(" "),i=0;t.length>i;i++)if(s=At.exec(t[i])||[],o=a=s[1],u=s[2],o){for(f=K.event.special[o]||{},o=(r?f.delegateType:f.bindType)||o,d=h[o]||[],c=d.length,u=u?RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p=0;d.length>p;p++)v=d[p],!l&&a!==v.origType||n&&n.guid!==v.guid||u&&!u.test(v.namespace)||r&&r!==v.selector&&("**"!==r||!v.selector)||(d.splice(p--,1),v.selector&&d.delegateCount--,f.remove&&f.remove.call(e,v));0===d.length&&c!==d.length&&(f.teardown&&f.teardown.call(e,u,g.handle)!==!1||K.removeEvent(e,o,g.handle),delete h[o])}else for(o in h)K.event.remove(e,o+t[i],n,r,!0);K.isEmptyObject(h)&&(delete g.handle,K.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,l,i){if(!l||3!==l.nodeType&&8!==l.nodeType){var s,o,a,u,c,p,h,f,d,v,g=n.type||n,y=[];if(!It.test(g+K.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),o=!0),g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),l&&!K.event.customEvent[g]||K.event.global[g]))if(n="object"==typeof n?n[K.expando]?n:new K.Event(g,n):new K.Event(g),n.type=g,n.isTrigger=!0,n.exclusive=o,n.namespace=y.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p=0>g.indexOf(":")?"on"+g:"",l){if(n.result=t,n.target||(n.target=l),r=null!=r?K.makeArray(r):[],r.unshift(n),h=K.event.special[g]||{},!h.trigger||h.trigger.apply(l,r)!==!1){if(d=[[l,h.bindType||g]],!i&&!h.noBubble&&!K.isWindow(l)){for(v=h.delegateType||g,u=It.test(v+g)?l:l.parentNode,c=l;u;u=u.parentNode)d.push([u,v]),c=u;c===(l.ownerDocument||H)&&d.push([c.defaultView||c.parentWindow||e,v])}for(a=0;d.length>a&&!n.isPropagationStopped();a++)u=d[a][0],n.type=d[a][1],f=(K._data(u,"events")||{})[n.type]&&K._data(u,"handle"),f&&f.apply(u,r),f=p&&u[p],f&&K.acceptData(u)&&f.apply&&f.apply(u,r)===!1&&n.preventDefault();return n.type=g,i||n.isDefaultPrevented()||h._default&&h._default.apply(l.ownerDocument,r)!==!1||"click"===g&&K.nodeName(l,"a")||!K.acceptData(l)||p&&l[g]&&("focus"!==g&&"blur"!==g||0!==n.target.offsetWidth)&&!K.isWindow(l)&&(c=l[p],c&&(l[p]=null),K.event.triggered=g,l[g](),K.event.triggered=t,c&&(l[p]=c)),n.result}}else{s=K.cache;for(a in s)s[a].events&&s[a].events[g]&&K.event.trigger(n,r,s[a].handle.elem,!0)}}},dispatch:function(n){n=K.event.fix(n||e.event);var r,l,i,s,o,a,u,c,p,h=(K._data(this,"events")||{})[n.type]||[],f=h.delegateCount,d=$.call(arguments),v=!n.exclusive&&!n.namespace,g=K.event.special[n.type]||{},y=[];if(d[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(f&&(!n.button||"click"!==n.type))for(i=n.target;i!=this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==n.type){for(o={},u=[],r=0;f>r;r++)c=h[r],p=c.selector,o[p]===t&&(o[p]=c.needsContext?K(p,this).index(i)>=0:K.find(p,this,null,[i]).length),o[p]&&u.push(c);u.length&&y.push({elem:i,matches:u})}for(h.length>f&&y.push({elem:this,matches:h.slice(f)}),r=0;y.length>r&&!n.isPropagationStopped();r++)for(a=y[r],n.currentTarget=a.elem,l=0;a.matches.length>l&&!n.isImmediatePropagationStopped();l++)c=a.matches[l],(v||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,s=((K.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,d),s!==t&&(n.result=s,s===!1&&(n.preventDefault(),n.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,l,i,s=n.button,o=n.fromElement;return null==e.pageX&&null!=n.clientX&&(r=e.target.ownerDocument||H,l=r.documentElement,i=r.body,e.pageX=n.clientX+(l&&l.scrollLeft||i&&i.scrollLeft||0)-(l&&l.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(l&&l.scrollTop||i&&i.scrollTop||0)-(l&&l.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?n.toElement:o),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,n,r=e,l=K.event.fixHooks[e.type]||{},i=l.props?this.props.concat(l.props):this.props;for(e=K.Event(r),t=i.length;t;)n=i[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||H),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,l.filter?l.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){K.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var l=K.extend(new K.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?K.event.trigger(l,null,t):K.event.dispatch.call(t,l),l.isDefaultPrevented()&&n.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=H.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,r){var l="on"+n;e.detachEvent&&(e[l]===t&&(e[l]=null),e.detachEvent(l,r))},K.Event=function(e,n){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?s:i):this.type=e,n&&K.extend(this,n),this.timeStamp=e&&e.timeStamp||K.now(),this[K.expando]=!0,t):new K.Event(e,n)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()},isDefaultPrevented:i,isPropagationStopped:i,isImmediatePropagationStopped:i},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,l=e.relatedTarget,i=e.handleObj;return i.selector,(!l||l!==r&&!K.contains(r,l))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:(K.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=K.nodeName(n,"input")||K.nodeName(n,"button")?n.form:t;r&&!K._data(r,"_submit_attached")&&(K.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),K._data(r,"_submit_attached",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&K.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return K.nodeName(this,"form")?!1:(K.event.remove(this,"._submit"),t)}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return Tt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),K.event.simulate("change",this,e,!0)})),!1):(K.event.add(this,"beforeactivate._change",function(e){var t=e.target;Tt.test(t.nodeName)&&!K._data(t,"_change_attached")&&(K.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||K.event.simulate("change",this.parentNode,e,!0)}),K._data(t,"_change_attached",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return K.event.remove(this,"._change"),!Tt.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){0===n++&&H.addEventListener(e,r,!0)},teardown:function(){0===--n&&H.removeEventListener(e,r,!0)}}}),K.fn.extend({on:function(e,n,r,l,s){var o,a;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],s);return this}if(null==r&&null==l?(l=n,r=n=t):null==l&&("string"==typeof n?(l=r,r=t):(l=r,r=n,n=t)),l===!1)l=i;else if(!l)return this;return 1===s&&(o=l,l=function(e){return K().off(e),o.apply(this,arguments)},l.guid=o.guid||(o.guid=K.guid++)),this.each(function(){K.event.add(this,e,l,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var l,s;if(e&&e.preventDefault&&e.handleObj)return l=e.handleObj,K(e.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:l.origType,l.selector,l.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=i),this.each(function(){K.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return K(this.context).on(e,this.selector,t,n),this},die:function(e,t){return K(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,n){return this[0]?K.event.trigger(e,n,this[0],!0):t},toggle:function(e){var t=arguments,n=e.guid||K.guid++,r=0,l=function(n){var l=(K._data(this,"lastToggle"+e.guid)||0)%r;return K._data(this,"lastToggle"+e.guid,l+1),n.preventDefault(),t[l].apply(this,arguments)||!1};for(l.guid=n;t.length>r;)t[r++].guid=n;return this.click(l)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Nt.test(t)&&(K.event.fixHooks[t]=K.event.keyHooks),Dt.test(t)&&(K.event.fixHooks[t]=K.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||D;var l,i,s,o,a=t.nodeType;if(!e||"string"!=typeof e)return n;if(1!==a&&9!==a)return[];if(s=x(t),!s&&!r&&(l=nt.exec(e)))if(o=l[1]){if(9===a){if(i=t.getElementById(o),!i||!i.parentNode)return n;if(i.id===o)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(o))&&w(t,i)&&i.id===o)return n.push(i),n}else{if(l[2])return O.apply(n,P.call(t.getElementsByTagName(e),0)),n;if((o=l[3])&&ht&&t.getElementsByClassName)return O.apply(n,P.call(t.getElementsByClassName(o),0)),n}return v(e.replace(Y,"$1"),t,n,r,s)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function i(e){return M(function(t){return t=+t,M(function(n,r){for(var l,i=e([],n.length,t),s=i.length;s--;)n[l=i[s]]&&(n[l]=!(r[l]=n[l]))})})}function s(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function o(e,t){var r,l,i,s,o,a,u,c=U[_][e+" "];if(c)return t?0:c.slice(0);for(o=e,a=[],u=b.preFilter;o;){(!r||(l=Z.exec(o)))&&(l&&(o=o.slice(l[0].length)||o),a.push(i=[])),r=!1,(l=et.exec(o))&&(i.push(r=new N(l.shift())),o=o.slice(r.length),r.type=l[0].replace(Y," "));for(s in b.filter)!(l=ot[s].exec(o))||u[s]&&!(l=u[s](l))||(i.push(r=new N(l.shift())),o=o.slice(r.length),r.type=s,r.matches=l);if(!r)break}return t?o.length:o?n.error(e):U(e,a).slice(0)}function a(e,t,n){var r=t.dir,l=n&&"parentNode"===t.dir,i=L++;return t.first?function(t,n,i){for(;t=t[r];)if(l||1===t.nodeType)return e(t,n,i)}:function(t,n,s){if(s){for(;t=t[r];)if((l||1===t.nodeType)&&e(t,n,s))return t}else for(var o,a=Q+" "+i+" ",u=a+y;t=t[r];)if(l||1===t.nodeType){if((o=t[_])===u)return t.sizset;if("string"==typeof o&&0===o.indexOf(a)){if(t.sizset)return t}else{if(t[_]=u,e(t,n,s))return t.sizset=!0,t;t.sizset=!1}}}}function u(e){return e.length>1?function(t,n,r){for(var l=e.length;l--;)if(!e[l](t,n,r))return!1;return!0}:e[0]}function c(e,t,n,r,l){for(var i,s=[],o=0,a=e.length,u=null!=t;a>o;o++)(i=e[o])&&(!n||n(i,r,l))&&(s.push(i),u&&t.push(o));return s}function p(e,t,n,r,l,i){return r&&!r[_]&&(r=p(r)),l&&!l[_]&&(l=p(l,i)),M(function(i,s,o,a){var u,p,h,f=[],v=[],g=s.length,y=i||d(t||"*",o.nodeType?[o]:o,[]),m=!e||!i&&t?y:c(y,f,e,o,a),b=n?l||(i?e:g||r)?[]:s:m;if(n&&n(m,b,o,a),r)for(u=c(b,v),r(u,[],o,a),p=u.length;p--;)(h=u[p])&&(b[v[p]]=!(m[v[p]]=h));if(i){if(l||e){if(l){for(u=[],p=b.length;p--;)(h=b[p])&&u.push(m[p]=h);l(null,b=[],u,a)}for(p=b.length;p--;)(h=b[p])&&(u=l?j.call(i,h):f[p])>-1&&(i[u]=!(s[u]=h))}}else b=c(b===s?b.splice(g,b.length):b),l?l(null,s,b,a):O.apply(s,b)})}function h(e){for(var t,n,r,l=e.length,i=b.relative[e[0].type],s=i||b.relative[" "],o=i?1:0,c=a(function(e){return e===t},s,!0),f=a(function(e){return j.call(t,e)>-1},s,!0),d=[function(e,n,r){return!i&&(r||n!==F)||((t=n).nodeType?c(e,n,r):f(e,n,r))}];l>o;o++)if(n=b.relative[e[o].type])d=[a(u(d),n)];else{if(n=b.filter[e[o].type].apply(null,e[o].matches),n[_]){for(r=++o;l>r&&!b.relative[e[r].type];r++);return p(o>1&&u(d),o>1&&e.slice(0,o-1).join("").replace(Y,"$1"),n,r>o&&h(e.slice(o,r)),l>r&&h(e=e.slice(r)),l>r&&e.join(""))}d.push(n)}return u(d)}function f(e,t){var r=t.length>0,l=e.length>0,i=function(s,o,a,u,p){var h,f,d,v=[],g=0,m="0",k=s&&[],x=null!=p,w=F,S=s||l&&b.find.TAG("*",p&&o.parentNode||o),C=Q+=null==w?1:Math.E;for(x&&(F=o!==D&&o,y=i.el);null!=(h=S[m]);m++){if(l&&h){for(f=0;d=e[f];f++)if(d(h,o,a)){u.push(h);break}x&&(Q=C,y=++i.el)}r&&((h=!d&&h)&&g--,s&&k.push(h))}if(g+=m,r&&m!==g){for(f=0;d=t[f];f++)d(k,v,o,a);if(s){if(g>0)for(;m--;)k[m]||v[m]||(v[m]=R.call(u));v=c(v)}O.apply(u,v),x&&!s&&v.length>0&&g+t.length>1&&n.uniqueSort(u)}return x&&(Q=C,F=w),k};return i.el=0,r?M(i):i}function d(e,t,r){for(var l=0,i=t.length;i>l;l++)n(e,t[l],r);return r}function v(e,t,n,r,l){var i,s,a,u,c,p=o(e);if(p.length,!r&&1===p.length){if(s=p[0]=p[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&9===t.nodeType&&!l&&b.relative[s[1].type]){if(t=b.find.ID(a.matches[0].replace(st,""),t,l)[0],!t)return n;e=e.slice(s.shift().length)}for(i=ot.POS.test(e)?-1:s.length-1;i>=0&&(a=s[i],!b.relative[u=a.type]);i--)if((c=b.find[u])&&(r=c(a.matches[0].replace(st,""),rt.test(s[0].type)&&t.parentNode||t,l))){if(s.splice(i,1),e=r.length&&s.join(""),!e)return O.apply(n,P.call(r,0)),n;break}}return S(e,p)(r,t,l,n,rt.test(e)),n}function g(){}var y,m,b,k,x,w,S,C,E,F,T=!0,A="undefined",_=("sizcache"+Math.random()).replace(".",""),N=String,D=e.document,I=D.documentElement,Q=0,L=0,R=[].pop,O=[].push,P=[].slice,j=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},M=function(e,t){return e[_]=null==t||t,e},B=function(){var e={},t=[];return M(function(n,r){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},H=B(),U=B(),G=B(),X="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",q=z.replace("w","w#"),$="([*^$|!~]?=)",W="\\["+X+"*("+z+")"+X+"*(?:"+$+X+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+q+")|)|)"+X+"*\\]",J=":("+z+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",V=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+X+"*((?:-\\d)?\\d*)"+X+"*\\)|)(?=[^-]|$)",Y=RegExp("^"+X+"+|((?:^|[^\\\\])(?:\\\\.)*)"+X+"+$","g"),Z=RegExp("^"+X+"*,"+X+"*"),et=RegExp("^"+X+"*([\\x20\\t\\r\\n\\f>+~])"+X+"*"),tt=RegExp(J),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rt=/[\x20\t\r\n\f]*[+~]/,lt=/h\d/i,it=/input|select|textarea|button/i,st=/\\(?!\\)/g,ot={ID:RegExp("^#("+z+")"),CLASS:RegExp("^\\.("+z+")"),NAME:RegExp("^\\[name=['\"]?("+z+")['\"]?\\]"),TAG:RegExp("^("+z.replace("w","w*")+")"),ATTR:RegExp("^"+W),PSEUDO:RegExp("^"+J),POS:RegExp(V,"i"),CHILD:RegExp("^:(only|nth|first|last)-child(?:\\("+X+"*(even|odd|(([+-]|)(\\d*)n|)"+X+"*(?:([+-]|)"+X+"*(\\d+)|))"+X+"*\\)|)","i"),needsContext:RegExp("^"+X+"*[>+~]|"+V,"i")},at=function(e){var t=D.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ut=at(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),ct=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")}),pt=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ht=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),ft=at(function(e){e.id=_+0,e.innerHTML="<a name='"+_+"'></a><div name='"+_+"'></div>",I.insertBefore(e,I.firstChild);var t=D.getElementsByName&&D.getElementsByName(_).length===2+D.getElementsByName(_+0).length;return m=!D.getElementById(_),I.removeChild(e),t});try{P.call(I.childNodes,0)[0].nodeType}catch(dt){P=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},k=n.getText=function(e){var t,n="",r=0,l=e.nodeType;if(l){if(1===l||9===l||11===l){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===l||4===l)return e.nodeValue}else for(;t=e[r];r++)n+=k(t);return n},x=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},w=n.contains=I.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:I.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=x(e);return r||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):r||pt?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:M,match:ot,attrHandle:ct?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:m?function(e,t,n){if(typeof t.getElementById!==A&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==A&&!r){var l=n.getElementById(e);return l?l.id===e||typeof l.getAttributeNode!==A&&l.getAttributeNode("id").value===e?[l]:t:[]}},TAG:ut?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var r,l=[],i=0;r=n[i];i++)1===r.nodeType&&l.push(r);return l}return n},NAME:ft&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},CLASS:ht&&function(e,n,r){return typeof n.getElementsByClassName===A||r?t:n.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(st,""),e[3]=(e[4]||e[5]||"").replace(st,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;return ot.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(n=o(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:m?function(e){return e=e.replace(st,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(st,""),function(t){var n=typeof t.getAttributeNode!==A&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(st,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=H[_][e+" "];return t||(t=RegExp("(^|"+X+")"+e+"("+X+"|$)"))&&H(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(l){var i=n.attr(l,e);return null==i?"!="===t:t?(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.substr(i.length-r.length)===r:"~="===t?(" "+i+" ").indexOf(r)>-1:"|="===t?i===r||i.substr(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r){return"nth"===e?function(e){var t,l,i=e.parentNode;if(1===n&&0===r)return!0;if(i)for(l=0,t=i.firstChild;t&&(1!==t.nodeType||(l++,e!==t));t=t.nextSibling);return l-=r,l===n||0===l%n&&l/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var r,l=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return l[_]?l(t):l.length>1?(r=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?M(function(e,n){for(var r,i=l(e,t),s=i.length;s--;)r=j.call(e,i[s]),e[r]=!(n[r]=i[s])}):function(e){return l(e,0,r)}):l}},pseudos:{not:M(function(e){var t=[],n=[],r=S(e.replace(Y,"$1"));return r[_]?M(function(e,t,n,l){for(var i,s=r(e,null,l,[]),o=e.length;o--;)(i=s[o])&&(e[o]=!(t[o]=i))}):function(e,l,i){return t[0]=e,r(t,null,i,n),!n.pop()}}),has:M(function(e){return function(t){return n(e,t).length>0}}),contains:M(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0
},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return lt.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:l("submit"),reset:l("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return it.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[0>n?n+t:n]}),even:i(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}},C=I.compareDocumentPosition?function(e,t){return e===t?(E=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return E=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,l=[],i=[],o=e.parentNode,a=t.parentNode,u=o;if(o===a)return s(e,t);if(!o)return-1;if(!a)return 1;for(;u;)l.unshift(u),u=u.parentNode;for(u=a;u;)i.unshift(u),u=u.parentNode;n=l.length,r=i.length;for(var c=0;n>c&&r>c;c++)if(l[c]!==i[c])return s(l[c],i[c]);return c===n?s(e,i[c],-1):s(l[c],t,1)},[0,0].sort(C),T=!E,n.uniqueSort=function(e){var t,n=[],r=1,l=0;if(E=T,e.sort(C),E){for(;t=e[r];r++)t===e[r-1]&&(l=n.push(r));for(;l--;)e.splice(n[l],1)}return e},n.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},S=n.compile=function(e,t){var n,r=[],l=[],i=G[_][e+" "];if(!i){for(t||(t=o(e)),n=t.length;n--;)i=h(t[n]),i[_]?r.push(i):l.push(i);i=G(e,f(l,r))}return i},D.querySelectorAll&&function(){var e,t=v,r=/'|\\/g,l=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],a=I.matchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector||I.msMatchesSelector;at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+X+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),at(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+X+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=RegExp(i.join("|")),v=function(e,n,l,s,a){if(!s&&!a&&!i.test(e)){var u,c,p=!0,h=_,f=n,d=9===n.nodeType&&e;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(u=o(e),(p=n.getAttribute("id"))?h=p.replace(r,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",c=u.length;c--;)u[c]=h+u[c].join("");f=rt.test(e)&&n.parentNode||n,d=u.join(",")}if(d)try{return O.apply(l,P.call(f.querySelectorAll(d),0)),l}catch(v){}finally{p||n.removeAttribute("id")}}return t(e,n,l,s,a)},a&&(at(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),s.push("!=",J)}catch(n){}}),s=RegExp(s.join("|")),n.matchesSelector=function(t,r){if(r=r.replace(l,"='$1']"),!x(t)&&!s.test(r)&&!i.test(r))try{var o=a.call(t,r);if(o||e||t.document&&11!==t.document.nodeType)return o}catch(u){}return n(r,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=g.prototype=b.pseudos,b.setFilters=new g,n.attr=K.attr,K.find=n,K.expr=n.selectors,K.expr[":"]=K.expr.pseudos,K.unique=n.uniqueSort,K.text=n.getText,K.isXMLDoc=n.isXML,K.contains=n.contains}(e);var Lt=/Until$/,Rt=/^(?:parents|prev(?:Until|All))/,Ot=/^.[^:#\[\.,]*$/,Pt=K.expr.match.needsContext,jt={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(e){var t,n,r,l,i,s,o=this;if("string"!=typeof e)return K(e).filter(function(){for(t=0,n=o.length;n>t;t++)if(K.contains(o[t],this))return!0});for(s=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(r=s.length,K.find(e,this[t],s),t>0)for(l=r;s.length>l;l++)for(i=0;r>i;i++)if(s[i]===s[l]){s.splice(l--,1);break}return s},has:function(e){var t,n=K(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(K.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1),"not",e)},filter:function(e){return this.pushStack(u(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Pt.test(e)?K(e,this.context).index(this[0])>=0:K.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,l=this.length,i=[],s=Pt.test(e)||"string"!=typeof e?K(e,t||this.context):0;l>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(s?s.index(n)>-1:K.find.matchesSelector(n,e)){i.push(n);break}n=n.parentNode}return i=i.length>1?K.unique(i):i,this.pushStack(i,"closest",e)},index:function(e){return e?"string"==typeof e?K.inArray(this[0],K(e)):K.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?K(e,t):K.makeArray(e&&e.nodeType?[e]:e),r=K.merge(this.get(),n);return this.pushStack(o(n[0])||o(r[0])?r:K.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.fn.andSelf=K.fn.addBack,K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,n){return K.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,n){return K.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return K.dir(e,"previousSibling",n)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return K.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(n,r){var l=K.map(this,t,n);return Lt.test(e)||(r=n),r&&"string"==typeof r&&(l=K.filter(r,l)),l=this.length>1&&!jt[e]?K.unique(l):l,this.length>1&&Rt.test(e)&&(l=l.reverse()),this.pushStack(l,e,$.call(arguments).join(","))}}),K.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?K.find.matchesSelector(t[0],e)?[t[0]]:[]:K.find.matches(e,t)},dir:function(e,n,r){for(var l=[],i=e[n];i&&9!==i.nodeType&&(r===t||1!==i.nodeType||!K(i).is(r));)1===i.nodeType&&l.push(i),i=i[n];return l},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Mt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bt=/ jQuery\d+="(?:null|\d+)"/g,Ht=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gt=/<([\w:]+)/,Xt=/<tbody/i,zt=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Wt=RegExp("<(?:"+Mt+")[\\s/>]","i"),Jt=/^(?:checkbox|radio)$/,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Yt=/\/(java|ecma)script/i,Kt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=c(H),tn=en.appendChild(H.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,K.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),K.fn.extend({text:function(e){return K.access(this,function(e){return e===t?K.text(this):this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(K.isFunction(e))return this.each(function(t){K(this).wrapAll(e.call(this,t))});if(this[0]){var t=K(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return K.isFunction(e)?this.each(function(t){K(this).wrapInner(e.call(this,t))}):this.each(function(){var t=K(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(n){K(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(e,this),"before",this.selector)}},after:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||K.filter(e,[n]).length)&&(t||1!==n.nodeType||(K.cleanData(n.getElementsByTagName("*")),K.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&K.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return K.access(this,function(e){var n=this[0]||{},r=0,l=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Bt,""):t;if(!("string"!=typeof e||qt.test(e)||!K.support.htmlSerialize&&Wt.test(e)||!K.support.leadingWhitespace&&Ht.test(e)||Zt[(Gt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ut,"<$1></$2>");try{for(;l>r;r++)n=this[r]||{},1===n.nodeType&&(K.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(i){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return o(this[0])?this.length?this.pushStack(K(K.isFunction(e)?e():e),"replaceWith",e):this:K.isFunction(e)?this.each(function(t){var n=K(this),r=n.html();n.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=K(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;K(this).remove(),t?K(t).before(e):K(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var l,i,s,o,a=0,u=e[0],c=[],h=this.length;if(!K.support.checkClone&&h>1&&"string"==typeof u&&Vt.test(u))return this.each(function(){K(this).domManip(e,n,r)});if(K.isFunction(u))return this.each(function(l){var i=K(this);e[0]=u.call(this,l,n?i.html():t),i.domManip(e,n,r)});if(this[0]){if(l=K.buildFragment(e,this,c),s=l.fragment,i=s.firstChild,1===s.childNodes.length&&(s=i),i)for(n=n&&K.nodeName(i,"tr"),o=l.cacheable||h-1;h>a;a++)r.call(n&&K.nodeName(this[a],"table")?p(this[a],"tbody"):this[a],a===o?s:K.clone(s,!0,!0));s=i=null,c.length&&K.each(c,function(e,t){t.src?K.ajax?K.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):K.error("no ajax"):K.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Kt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),K.buildFragment=function(e,n,r){var l,i,s,o=e[0];return n=n||H,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,!(1===e.length&&"string"==typeof o&&512>o.length&&n===H&&"<"===o.charAt(0))||$t.test(o)||!K.support.checkClone&&Vt.test(o)||!K.support.html5Clone&&Wt.test(o)||(i=!0,l=K.fragments[o],s=l!==t),l||(l=n.createDocumentFragment(),K.clean(e,n,l,r),i&&(K.fragments[o]=s&&l)),{fragment:l,cacheable:i}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(n){var r,l=0,i=[],s=K(n),o=s.length,a=1===this.length&&this[0].parentNode;if((null==a||a&&11===a.nodeType&&1===a.childNodes.length)&&1===o)return s[t](this[0]),this;for(;o>l;l++)r=(l>0?this.clone(!0):this).get(),K(s[l])[t](r),i=i.concat(r);return this.pushStack(i,e,s.selector)}}),K.extend({clone:function(e,t,n){var r,l,i,s;if(K.support.html5Clone||K.isXMLDoc(e)||!Wt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(s=tn.firstChild)),!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(f(e,s),r=d(e),l=d(s),i=0;r[i];++i)l[i]&&f(r[i],l[i]);if(t&&(h(e,s),n))for(r=d(e),l=d(s),i=0;r[i];++i)h(r[i],l[i]);return r=l=null,s},clean:function(e,n,r,l){var i,s,o,a,u,p,h,f,d,g,y,m=n===H&&en,b=[];for(n&&n.createDocumentFragment!==t||(n=H),i=0;null!=(o=e[i]);i++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(zt.test(o)){for(m=m||c(n),h=n.createElement("div"),m.appendChild(h),o=o.replace(Ut,"<$1></$2>"),a=(Gt.exec(o)||["",""])[1].toLowerCase(),u=Zt[a]||Zt._default,p=u[0],h.innerHTML=u[1]+o+u[2];p--;)h=h.lastChild;if(!K.support.tbody)for(f=Xt.test(o),d="table"!==a||f?"<table>"!==u[1]||f?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,s=d.length-1;s>=0;--s)K.nodeName(d[s],"tbody")&&!d[s].childNodes.length&&d[s].parentNode.removeChild(d[s]);!K.support.leadingWhitespace&&Ht.test(o)&&h.insertBefore(n.createTextNode(Ht.exec(o)[0]),h.firstChild),o=h.childNodes,h.parentNode.removeChild(h)}else o=n.createTextNode(o);o.nodeType?b.push(o):K.merge(b,o)}if(h&&(o=h=m=null),!K.support.appendChecked)for(i=0;null!=(o=b[i]);i++)K.nodeName(o,"input")?v(o):o.getElementsByTagName!==t&&K.grep(o.getElementsByTagName("input"),v);if(r)for(g=function(e){return!e.type||Yt.test(e.type)?l?l.push(e.parentNode?e.parentNode.removeChild(e):e):r.appendChild(e):t},i=0;null!=(o=b[i]);i++)K.nodeName(o,"script")&&g(o)||(r.appendChild(o),o.getElementsByTagName!==t&&(y=K.grep(K.merge([],o.getElementsByTagName("script")),g),b.splice.apply(b,[i+1,0].concat(y)),i+=y.length));return b},cleanData:function(e,t){for(var n,r,l,i,s=0,o=K.expando,a=K.cache,u=K.support.deleteExpando,c=K.event.special;null!=(l=e[s]);s++)if((t||K.acceptData(l))&&(r=l[o],n=r&&a[r])){if(n.events)for(i in n.events)c[i]?K.event.remove(l,i):K.removeEvent(l,i,n.handle);a[r]&&(delete a[r],u?delete l[o]:l.removeAttribute?l.removeAttribute(o):l[o]=null,K.deletedIds.push(r))}}}),function(){var e,t;K.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=K.uaMatch(G.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),K.browser=t,K.sub=function(){function e(t,n){return new e.fn.init(t,n)}K.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,r){return r&&r instanceof K&&!(r instanceof e)&&(r=e(r)),K.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(H);return e}}();var nn,rn,ln,sn=/alpha\([^)]*\)/i,on=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,un=/^(none|table(?!-c[ea]).+)/,cn=/^margin/,pn=RegExp("^("+Z+")(.*)$","i"),hn=RegExp("^("+Z+")(?!px)[a-z%]+$","i"),fn=RegExp("^([-+])=("+Z+")","i"),dn={BODY:"block"},vn={position:"absolute",visibility:"hidden",display:"block"},gn={letterSpacing:0,fontWeight:400},yn=["Top","Right","Bottom","Left"],mn=["Webkit","O","Moz","ms"],bn=K.fn.toggle;K.fn.extend({css:function(e,n){return K.access(this,function(e,n,r){return r!==t?K.style(e,n,r):K.css(e,n)},e,n,arguments.length>1)},show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e,t){var n="boolean"==typeof e;return K.isFunction(e)&&K.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:y(this))?K(this).show():K(this).hide()})}}),K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,l){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=K.camelCase(n),u=e.style;if(n=K.cssProps[a]||(K.cssProps[a]=g(u,a)),o=K.cssHooks[n]||K.cssHooks[a],r===t)return o&&"get"in o&&(i=o.get(e,!1,l))!==t?i:u[n];if(s=typeof r,"string"===s&&(i=fn.exec(r))&&(r=(i[1]+1)*i[2]+parseFloat(K.css(e,n)),s="number"),!(null==r||"number"===s&&isNaN(r)||("number"!==s||K.cssNumber[a]||(r+="px"),o&&"set"in o&&(r=o.set(e,r,l))===t)))try{u[n]=r}catch(c){}}},css:function(e,n,r,l){var i,s,o,a=K.camelCase(n);return n=K.cssProps[a]||(K.cssProps[a]=g(e.style,a)),o=K.cssHooks[n]||K.cssHooks[a],o&&"get"in o&&(i=o.get(e,!0,l)),i===t&&(i=nn(e,n)),"normal"===i&&n in gn&&(i=gn[n]),r||l!==t?(s=parseFloat(i),r||K.isNumeric(s)?s||0:i):i},swap:function(e,t,n){var r,l,i={};for(l in t)i[l]=e.style[l],e.style[l]=t[l];r=n.call(e);for(l in t)e.style[l]=i[l];return r}}),e.getComputedStyle?nn=function(t,n){var r,l,i,s,o=e.getComputedStyle(t,null),a=t.style;return o&&(r=o.getPropertyValue(n)||o[n],""!==r||K.contains(t.ownerDocument,t)||(r=K.style(t,n)),hn.test(r)&&cn.test(n)&&(l=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=o.width,a.width=l,a.minWidth=i,a.maxWidth=s)),r}:H.documentElement.currentStyle&&(nn=function(e,t){var n,r,l=e.currentStyle&&e.currentStyle[t],i=e.style;return null==l&&i&&i[t]&&(l=i[t]),hn.test(l)&&!an.test(t)&&(n=i.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),i.left="fontSize"===t?"1em":l,l=i.pixelLeft+"px",i.left=n,r&&(e.runtimeStyle.left=r)),""===l?"auto":l}),K.each(["height","width"],function(e,n){K.cssHooks[n]={get:function(e,r,l){return r?0===e.offsetWidth&&un.test(nn(e,"display"))?K.swap(e,vn,function(){return x(e,n,l)}):x(e,n,l):t},set:function(e,t,r){return b(e,t,r?k(e,n,r,K.support.boxSizing&&"border-box"===K.css(e,"boxSizing")):0)}}}),K.support.opacity||(K.cssHooks.opacity={get:function(e,t){return on.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,l=K.isNumeric(t)?"alpha(opacity="+100*t+")":"",i=r&&r.filter||n.filter||"";n.zoom=1,t>=1&&""===K.trim(i.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=sn.test(i)?i.replace(sn,l):i+" "+l)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(e,n){return K.swap(e,{display:"inline-block"},function(){return n?nn(e,"marginRight"):t})}}),!K.support.pixelPosition&&K.fn.position&&K.each(["top","left"],function(e,t){K.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return hn.test(r)?K(e).position()[t]+"px":r}}}})}),K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!K.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(n){var r,l="string"==typeof n?n.split(" "):[n],i={};for(r=0;4>r;r++)i[e+yn[r]+t]=l[r]||l[r-2]||l[0];return i}},cn.test(e)||(K.cssHooks[e+t].set=b)});var kn=/%20/g,xn=/\[\]$/,wn=/\r?\n/g,Sn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Cn=/^(?:select|textarea)/i;K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Cn.test(this.nodeName)||Sn.test(this.type))}).map(function(e,t){var n=K(this).val();return null==n?null:K.isArray(n)?K.map(n,function(e){return{name:t.name,value:e.replace(wn,"\r\n")}}):{name:t.name,value:n.replace(wn,"\r\n")}}).get()}}),K.param=function(e,n){var r,l=[],i=function(e,t){t=K.isFunction(t)?t():null==t?"":t,l[l.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){i(this.name,this.value)});else for(r in e)S(r,e[r],n,i);return l.join("&").replace(kn,"+")};var En,Fn,Tn=/#.*$/,An=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,_n=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Nn=/^(?:GET|HEAD)$/,Dn=/^\/\//,In=/\?/,Qn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ln=/([?&])_=[^&]*/,Rn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,On=K.fn.load,Pn={},jn={},Mn=["*/"]+["*"];try{Fn=U.href}catch(Bn){Fn=H.createElement("a"),Fn.href="",Fn=Fn.href}En=Rn.exec(Fn.toLowerCase())||[],K.fn.load=function(e,n,r){if("string"!=typeof e&&On)return On.apply(this,arguments);if(!this.length)return this;var l,i,s,o=this,a=e.indexOf(" ");return a>=0&&(l=e.slice(a,e.length),e=e.slice(0,a)),K.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(i="POST"),K.ajax({url:e,type:i,dataType:"html",data:n,complete:function(e,t){r&&o.each(r,s||[e.responseText,t,e])}}).done(function(e){s=arguments,o.html(l?K("<div>").append(e.replace(Qn,"")).find(l):e)}),this},K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K.each(["get","post"],function(e,n){K[n]=function(e,r,l,i){return K.isFunction(r)&&(i=i||l,l=r,r=t),K.ajax({type:n,url:e,data:r,success:l,dataType:i})}}),K.extend({getScript:function(e,n){return K.get(e,t,n,"script")},getJSON:function(e,t,n){return K.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?F(e,K.ajaxSettings):(t=e,e=K.ajaxSettings),F(e,t),e},ajaxSettings:{url:Fn,isLocal:_n.test(En[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:C(Pn),ajaxTransport:C(jn),ajax:function(e,n){function r(e,n,r,s){var u,p,m,b,x,S=n;2!==k&&(k=2,a&&clearTimeout(a),o=t,i=s||"",w.readyState=e>0?4:0,r&&(b=T(h,w,r)),e>=200&&300>e||304===e?(h.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(K.lastModified[l]=x),x=w.getResponseHeader("Etag"),x&&(K.etag[l]=x)),304===e?(S="notmodified",u=!0):(u=A(h,b),S=u.state,p=u.data,m=u.error,u=!m)):(m=S,(!S||e)&&(S="error",0>e&&(e=0))),w.status=e,w.statusText=(n||S)+"",u?v.resolveWith(f,[p,S,w]):v.rejectWith(f,[w,S,m]),w.statusCode(y),y=t,c&&d.trigger("ajax"+(u?"Success":"Error"),[w,h,u?p:m]),g.fireWith(f,[w,S]),c&&(d.trigger("ajaxComplete",[w,h]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var l,i,s,o,a,u,c,p,h=K.ajaxSetup({},n),f=h.context||h,d=f!==h&&(f.nodeType||f instanceof K)?K(f):K.event,v=K.Deferred(),g=K.Callbacks("once memory"),y=h.statusCode||{},m={},b={},k=0,x="canceled",w={readyState:0,setRequestHeader:function(e,t){if(!k){var n=e.toLowerCase();e=b[n]=b[n]||e,m[e]=t}return this},getAllResponseHeaders:function(){return 2===k?i:null},getResponseHeader:function(e){var n;if(2===k){if(!s)for(s={};n=An.exec(i);)s[n[1].toLowerCase()]=n[2];n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return k||(h.mimeType=e),this},abort:function(e){return e=e||x,o&&o.abort(e),r(0,e),this}};if(v.promise(w),w.success=w.done,w.error=w.fail,w.complete=g.add,w.statusCode=function(e){if(e){var t;if(2>k)for(t in e)y[t]=[y[t],e[t]];else t=e[w.status],w.always(t)}return this},h.url=((e||h.url)+"").replace(Tn,"").replace(Dn,En[1]+"//"),h.dataTypes=K.trim(h.dataType||"*").toLowerCase().split(tt),null==h.crossDomain&&(u=Rn.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===En[1]&&u[2]===En[2]&&(u[3]||("http:"===u[1]?80:443))==(En[3]||("http:"===En[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=K.param(h.data,h.traditional)),E(Pn,h,n,w),2===k)return w;if(c=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Nn.test(h.type),c&&0===K.active++&&K.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(In.test(h.url)?"&":"?")+h.data,delete h.data),l=h.url,h.cache===!1)){var S=K.now(),C=h.url.replace(Ln,"$1_="+S);h.url=C+(C===h.url?(In.test(h.url)?"&":"?")+"_="+S:"")}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(l=l||h.url,K.lastModified[l]&&w.setRequestHeader("If-Modified-Since",K.lastModified[l]),K.etag[l]&&w.setRequestHeader("If-None-Match",K.etag[l])),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Mn+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)w.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(f,w,h)===!1||2===k))return w.abort();x="abort";for(p in{success:1,error:1,complete:1})w[p](h[p]);if(o=E(jn,h,n,w)){w.readyState=1,c&&d.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{k=1,o.send(m,r)}catch(F){if(!(2>k))throw F;r(-1,F)}}else r(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Hn=[],Un=/\?/,Gn=/(=)\?(?=&|$)|\?\?/,Xn=K.now();K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Hn.pop()||K.expando+"_"+Xn++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(n,r,l){var i,s,o,a=n.data,u=n.url,c=n.jsonp!==!1,p=c&&Gn.test(u),h=c&&!p&&"string"==typeof a&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gn.test(a);return"jsonp"===n.dataTypes[0]||p||h?(i=n.jsonpCallback=K.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,s=e[i],p?n.url=u.replace(Gn,"$1"+i):h?n.data=a.replace(Gn,"$1"+i):c&&(n.url+=(Un.test(u)?"&":"?")+n.jsonp+"="+i),n.converters["script json"]=function(){return o||K.error(i+" was not called"),o[0]},n.dataTypes[0]="json",e[i]=function(){o=arguments},l.always(function(){e[i]=s,n[i]&&(n.jsonpCallback=r.jsonpCallback,Hn.push(i)),o&&K.isFunction(s)&&s(o[0]),o=s=t}),"script"):t}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),K.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(l,i){n=H.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,l){(l||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,l||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var zn,qn=e.ActiveXObject?function(){for(var e in zn)zn[e](0,1)}:!1,$n=0;K.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&_()||N()}:_,function(e){K.extend(K.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(n){if(!n.crossDomain||K.support.cors){var r;return{send:function(l,i){var s,o,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(o in n.xhrFields)a[o]=n.xhrFields[o];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||l["X-Requested-With"]||(l["X-Requested-With"]="XMLHttpRequest");try{for(o in l)a.setRequestHeader(o,l[o])}catch(u){}a.send(n.hasContent&&n.data||null),r=function(e,l){var o,u,c,p,h;try{if(r&&(l||4===a.readyState))if(r=t,s&&(a.onreadystatechange=K.noop,qn&&delete zn[s]),l)4!==a.readyState&&a.abort();else{o=a.status,c=a.getAllResponseHeaders(),p={},h=a.responseXML,h&&h.documentElement&&(p.xml=h);try{p.text=a.responseText}catch(f){}try{u=a.statusText}catch(f){u=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=p.text?200:404}}catch(d){l||i(-1,d)}p&&i(o,u,p,c)},n.async?4===a.readyState?setTimeout(r,0):(s=++$n,qn&&(zn||(zn={},K(e).unload(qn)),zn[s]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Wn,Jn,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Kn=/queueHooks$/,Zn=[R],er={"*":[function(e,t){var n,r,l=this.createTween(e,t),i=Yn.exec(t),s=l.cur(),o=+s||0,a=1,u=20;if(i){if(n=+i[2],r=i[3]||(K.cssNumber[e]?"":"px"),"px"!==r&&o){o=K.css(l.elem,e,!0)||n||1;do a=a||".5",o/=a,K.style(l.elem,e,o+r);while(a!==(a=l.cur()/s)&&1!==a&&--u)}l.unit=r,l.start=o,l.end=i[1]?o+(i[1]+1)*n:n}return l}]};K.Animation=K.extend(Q,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,l=e.length;l>r;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),K.Tween=O,O.prototype={constructor:O,init:function(e,t,n,r,l,i){this.elem=e,this.prop=n,this.easing=l||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(K.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.each(["toggle","show","hide"],function(e,t){var n=K.fn[t];K.fn[t]=function(r,l,i){return null==r||"boolean"==typeof r||!e&&K.isFunction(r)&&K.isFunction(l)?n.apply(this,arguments):this.animate(P(t,!0),r,l,i)}}),K.fn.extend({fadeTo:function(e,t,n,r){return this.filter(y).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var l=K.isEmptyObject(e),i=K.speed(t,n,r),s=function(){var t=Q(this,K.extend({},e),i);l&&t.stop(!0)};return l||i.queue===!1?this.each(s):this.queue(i.queue,s)},stop:function(e,n,r){var l=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",i=K.timers,s=K._data(this);if(n)s[n]&&s[n].stop&&l(s[n]);else for(n in s)s[n]&&s[n].stop&&Kn.test(n)&&l(s[n]);for(n=i.length;n--;)i[n].elem!==this||null!=e&&i[n].queue!==e||(i[n].anim.stop(r),t=!1,i.splice(n,1));(t||!r)&&K.dequeue(this,e)})}}),K.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,n,r){return this.animate(t,e,n,r)
}}),K.speed=function(e,t,n){var r=e&&"object"==typeof e?K.extend({},e):{complete:n||!n&&t||K.isFunction(e)&&e,duration:e,easing:n&&t||t&&!K.isFunction(t)&&t};return r.duration=K.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in K.fx.speeds?K.fx.speeds[r.duration]:K.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){K.isFunction(r.old)&&r.old.call(this),r.queue&&K.dequeue(this,r.queue)},r},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.timers=[],K.fx=O.prototype.init,K.fx.tick=function(){var e,n=K.timers,r=0;for(Wn=K.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||K.fx.stop(),Wn=t},K.fx.timer=function(e){e()&&K.timers.push(e)&&!Jn&&(Jn=setInterval(K.fx.tick,K.fx.interval))},K.fx.interval=13,K.fx.stop=function(){clearInterval(Jn),Jn=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fx.step={},K.expr&&K.expr.filters&&(K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;K.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){K.offset.setOffset(this,e,t)});var n,r,l,i,s,o,a,u={top:0,left:0},c=this[0],p=c&&c.ownerDocument;if(p)return(r=p.body)===c?K.offset.bodyOffset(c):(n=p.documentElement,K.contains(n,c)?(c.getBoundingClientRect!==t&&(u=c.getBoundingClientRect()),l=j(p),i=n.clientTop||r.clientTop||0,s=n.clientLeft||r.clientLeft||0,o=l.pageYOffset||n.scrollTop,a=l.pageXOffset||n.scrollLeft,{top:u.top+o-i,left:u.left+a-s}):u)},K.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(K.css(e,"marginTop"))||0,n+=parseFloat(K.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=K.css(e,"position");"static"===r&&(e.style.position="relative");var l,i,s=K(e),o=s.offset(),a=K.css(e,"top"),u=K.css(e,"left"),c=("absolute"===r||"fixed"===r)&&K.inArray("auto",[a,u])>-1,p={},h={};c?(h=s.position(),l=h.top,i=h.left):(l=parseFloat(a)||0,i=parseFloat(u)||0),K.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(p.top=t.top-o.top+l),null!=t.left&&(p.left=t.left-o.left+i),"using"in t?t.using.call(e,p):s.css(p)}},K.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(K.css(e,"marginTop"))||0,n.left-=parseFloat(K.css(e,"marginLeft"))||0,r.top+=parseFloat(K.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(K.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||H.body;e&&!tr.test(e.nodeName)&&"static"===K.css(e,"position");)e=e.offsetParent;return e||H.body})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);K.fn[e]=function(l){return K.access(this,function(e,l,i){var s=j(e);return i===t?s?n in s?s[n]:s.document.documentElement[l]:e[l]:(s?s.scrollTo(r?K(s).scrollLeft():i,r?i:K(s).scrollTop()):e[l]=i,t)},e,l,arguments.length,null)}}),K.each({Height:"height",Width:"width"},function(e,n){K.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,l){K.fn[l]=function(l,i){var s=arguments.length&&(r||"boolean"!=typeof l),o=r||(l===!0||i===!0?"margin":"border");return K.access(this,function(n,r,l){var i;return K.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(i=n.documentElement,Math.max(n.body["scroll"+e],i["scroll"+e],n.body["offset"+e],i["offset"+e],i["client"+e])):l===t?K.css(n,r,l,o):K.style(n,r,l,o)},n,s?l:t,s,null)}})}),e.jQuery=e.$=K,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})}(window),function(e){function t(t,i){var s=t.data("jqae");s||(s={});var o=s.wrapperElement;o||(o=t.wrapInner("<div/>").find(">div"),o.css({margin:0,padding:0,border:0}));var a=o.data("jqae");a||(a={});var u=a.originalContent;u?o=a.originalContent.clone(!0).data("jqae",{originalContent:u}).replaceAll(o):o.data("jqae",{originalContent:o.clone(!0)}),t.data("jqae",{wrapperElement:o,containerWidth:t.width(),containerHeight:t.height()});var c=t.height(),p=(parseInt(t.css("padding-top"),10)||0)+(parseInt(t.css("border-top-width"),10)||0)-(o.offset().top-t.offset().top),h=!1,f=o;i.selector&&(f=e(o.find(i.selector).get().reverse())),f.each(function(){var t=e(this),s=t.text(),a=!1;if(o.innerHeight()-t.innerHeight()>c+p)t.remove();else if(l(t),t.contents().length){for(h&&(r(t).get(0).nodeValue+=i.ellipsis,h=!1);o.innerHeight()>c+p;){if(a=n(t),!a){h=!0,t.remove();break}if(l(t),!t.contents().length){h=!0,t.remove();break}r(t).get(0).nodeValue+=i.ellipsis}"onEllipsis"==i.setTitle&&a||"always"==i.setTitle?t.attr("title",s):"never"!=i.setTitle&&t.removeAttr("title")}})}function n(t){var n=r(t);if(n.length){var l=n.get(0).nodeValue,i=l.lastIndexOf(" ");return i>-1?(l=e.trim(l.substring(0,i)),n.get(0).nodeValue=l):n.get(0).nodeValue="",!0}return!1}function r(e){if(e.contents().length){var t=e.contents(),n=t.eq(t.length-1);return n.filter(i).length?n:r(n)}e.append("");var t=e.contents();return t.eq(t.length-1)}function l(t){if(t.contents().length){var n=t.contents(),r=n.eq(n.length-1);if(r.filter(i).length){var s=r.get(0).nodeValue;return s=e.trim(s),""==s?(r.remove(),!0):!1}for(;l(r););return r.contents().length?!1:(r.remove(),!0)}return!1}function i(){return 3===this.nodeType}function s(e,t){c[e]=t,u||(u=window.setInterval(function(){a()},200))}function o(e){c[e]&&(delete c[e],c.length||u&&(window.clearInterval(u),u=void 0))}function a(){if(!p){p=!0;for(var n in c)e(n).each(function(){var r,l;r=e(this),l=r.data("jqae"),(l.containerWidth!=r.width()||l.containerHeight!=r.height())&&t(r,c[n])});p=!1}}var u,c={},p=!1,h={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(n,r){var l,i;return l=e(this),"string"!=typeof n&&(r=n,n=void 0),i=e.extend({},h,r),i.selector=n,l.each(function(){var n=e(this);t(n,i)}),i.live?s(l.selector,i):o(l.selector),this}}(jQuery),function(e,t){"use strict";var n,r=e.document,l=e.Modernizr,i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s="Moz Webkit O Ms".split(" "),o=function(e){var t,n=r.documentElement.style;if("string"==typeof n[e])return e;e=i(e);for(var l=0,o=s.length;o>l;l++)if(t=s[l]+e,"string"==typeof n[t])return t},a=o("transform"),u=o("transitionProperty"),c={csstransforms:function(){return!!a},csstransforms3d:function(){var e=!!o("perspective");if(e){var n=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),r="@media ("+n.join("transform-3d),(")+"modernizr)",l=t("<style>"+r+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),i=t('<div id="modernizr" />').appendTo("html");e=3===i.height(),i.remove(),l.remove()}return e},csstransitions:function(){return!!u}};if(l)for(n in c)l.hasOwnProperty(n)||l.addTest(n,c[n]);else{l=e.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var p,h=" ";for(n in c)p=c[n](),l[n]=p,h+=" "+(p?"":"no-")+n;t("html").addClass(h)}if(l.csstransforms){var f=l.csstransforms3d?{translate:function(e){return"translate3d("+e[0]+"px, "+e[1]+"px, 0) "},scale:function(e){return"scale3d("+e+", "+e+", 1) "}}:{translate:function(e){return"translate("+e[0]+"px, "+e[1]+"px) "},scale:function(e){return"scale("+e+") "}},d=function(e,n,r){var l,i,s=t.data(e,"isoTransform")||{},o={},u={};o[n]=r,t.extend(s,o);for(l in s)i=s[l],u[l]=f[l](i);var c=u.translate||"",p=u.scale||"",h=c+p;t.data(e,"isoTransform",s),e.style[a]=h};t.cssNumber.scale=!0,t.cssHooks.scale={set:function(e,t){d(e,"scale",t)},get:function(e){var n=t.data(e,"isoTransform");return n&&n.scale?n.scale:1}},t.fx.step.scale=function(e){t.cssHooks.scale.set(e.elem,e.now+e.unit)},t.cssNumber.translate=!0,t.cssHooks.translate={set:function(e,t){d(e,"translate",t)},get:function(e){var n=t.data(e,"isoTransform");return n&&n.translate?n.translate:[0,0]}}}var v,g;l.csstransitions&&(v={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[u],g=o("transitionDuration"));var y,m=t.event;m.special.smartresize={setup:function(){t(this).bind("resize",m.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",m.special.smartresize.handler)},handler:function(e,t){var n=this,r=arguments;e.type="smartresize",y&&clearTimeout(y),y=setTimeout(function(){jQuery.event.handle.apply(n,r)},"execAsap"===t?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Isotope=function(e,n,r){this.element=t(n),this._create(e),this._init(r)};var b=["width","height"],k=t(e);t.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},t.Isotope.prototype={_create:function(e){this.options=t.extend({},t.Isotope.settings,e),this.styleQueue=[],this.elemCount=0;var n=this.element[0].style;this.originalStyle={};var r=b.slice(0);for(var l in this.options.containerStyle)r.push(l);for(var i=0,s=r.length;s>i;i++)l=r[i],this.originalStyle[l]=n[l]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var o={"original-order":function(e,t){return t.elemCount++,t.elemCount},random:function(){return Math.random()}};this.options.getSortData=t.extend(this.options.getSortData,o),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var a=this;setTimeout(function(){a.element.addClass(a.options.containerClass)},0),this.options.resizable&&k.bind("smartresize.isotope",function(){a.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(e){var t=this.options.itemSelector,n=t?e.filter(t).add(e.find(t)):e,r={position:"absolute"};return n=n.filter(function(e,t){return 1===t.nodeType}),this.usingTransforms&&(r.left=0,r.top=0),n.css(r).addClass(this.options.itemClass),this.updateSortData(n,!0),n},_init:function(e){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(e)},option:function(e){if(t.isPlainObject(e)){this.options=t.extend(!0,this.options,e);var n;for(var r in e)n="_update"+i(r),this[n]&&this[n]()}},_updateAnimationEngine:function(){var e,t=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");switch(t){case"css":case"none":e=!1;break;case"jquery":e=!0;break;default:e=!l.csstransitions}this.isUsingJQueryAnimation=e,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var e=this.usingTransforms=this.options.transformsEnabled&&l.csstransforms&&l.csstransitions&&!this.isUsingJQueryAnimation;e||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=e?this._translate:this._positionAbs},_filter:function(e){var t=""===this.options.filter?"*":this.options.filter;if(!t)return e;var n=this.options.hiddenClass,r="."+n,l=e.filter(r),i=l;if("*"!==t){i=l.filter(t);var s=e.not(r).not(t).addClass(n);this.styleQueue.push({$el:s,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:i,style:this.options.visibleStyle}),i.removeClass(n),e.filter(t)},updateSortData:function(e,n){var r,l,i=this,s=this.options.getSortData;e.each(function(){r=t(this),l={};for(var e in s)l[e]=n||"original-order"!==e?s[e](r,i):t.data(this,"isotope-sort-data")[e];t.data(this,"isotope-sort-data",l)})},_sort:function(){var e=this.options.sortBy,t=this._getSorter,n=this.options.sortAscending?1:-1,r=function(r,l){var i=t(r,e),s=t(l,e);return i===s&&"original-order"!==e&&(i=t(r,"original-order"),s=t(l,"original-order")),(i>s?1:s>i?-1:0)*n};this.$filteredAtoms.sort(r)},_getSorter:function(e,n){return t.data(e,"isotope-sort-data")[n]},_translate:function(e,t){return{translate:[e,t]}},_positionAbs:function(e,t){return{left:e,top:t}},_pushPosition:function(e,t,n){t=Math.round(t+this.offset.left),n=Math.round(n+this.offset.top);var r=this.getPositionStyles(t,n);this.styleQueue.push({$el:e,style:r}),this.options.itemPositionDataEnabled&&e.data("isotope-item-position",{x:t,y:n})},layout:function(e,t){var n=this.options.layoutMode;if(this["_"+n+"Layout"](e),this.options.resizesContainer){var r=this["_"+n+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:r})}this._processStyleQueue(e,t),this.isLaidOut=!0},_processStyleQueue:function(e,n){var r,i,s,o,a=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",u=this.options.animationOptions,c=this.options.onLayout;if(i=function(e,t){t.$el[a](t.style,u)},this._isInserting&&this.isUsingJQueryAnimation)i=function(e,t){r=t.$el.hasClass("no-transition")?"css":a,t.$el[r](t.style,u)};else if(n||c||u.complete){var p=!1,h=[n,c,u.complete],f=this;if(s=!0,o=function(){if(!p){for(var t,n=0,r=h.length;r>n;n++)t=h[n],"function"==typeof t&&t.call(f.element,e,f);p=!0}},this.isUsingJQueryAnimation&&"animate"===a)u.complete=o,s=!1;else if(l.csstransitions){for(var d,y=0,m=this.styleQueue[0],b=m&&m.$el;!b||!b.length;){if(d=this.styleQueue[y++],!d)return;b=d.$el}var k=parseFloat(getComputedStyle(b[0])[g]);k>0&&(i=function(e,t){t.$el[a](t.style,u).one(v,o)},s=!1)}}t.each(this.styleQueue,i),s&&o(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(e){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,e)},addItems:function(e,t){var n=this._getAtoms(e);this.$allAtoms=this.$allAtoms.add(n),t&&t(n)},insert:function(e,t){this.element.append(e);var n=this;this.addItems(e,function(e){var r=n._filter(e);n._addHideAppended(r),n._sort(),n.reLayout(),n._revealAppended(r,t)})},appended:function(e,t){var n=this;this.addItems(e,function(e){n._addHideAppended(e),n.layout(e),n._revealAppended(e,t)})},_addHideAppended:function(e){this.$filteredAtoms=this.$filteredAtoms.add(e),e.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:e,style:this.options.hiddenStyle})},_revealAppended:function(e,t){var n=this;setTimeout(function(){e.removeClass("no-transition"),n.styleQueue.push({$el:e,style:n.options.visibleStyle}),n._isInserting=!1,n._processStyleQueue(e,t)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(e,t){this.$allAtoms=this.$allAtoms.not(e),this.$filteredAtoms=this.$filteredAtoms.not(e);var n=this,r=function(){e.remove(),t&&t.call(n.element)};e.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:e,style:this.options.hiddenStyle}),this._sort(),this.reLayout(r)):r()},shuffle:function(e){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(e)},destroy:function(){var e=this.usingTransforms,t=this.options;this.$allAtoms.removeClass(t.hiddenClass+" "+t.itemClass).each(function(){var t=this.style;t.position="",t.top="",t.left="",t.opacity="",e&&(t[a]="")});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".isotope").undelegate("."+t.hiddenClass,"click").removeClass(t.containerClass).removeData("isotope"),k.unbind(".isotope")},_getSegments:function(e){var t,n=this.options.layoutMode,r=e?"rowHeight":"columnWidth",l=e?"height":"width",s=e?"rows":"cols",o=this.element[l](),a=this.options[n]&&this.options[n][r]||this.$filteredAtoms["outer"+i(l)](!0)||o;t=Math.floor(o/a),t=Math.max(t,1),this[n][s]=t,this[n][r]=a},_checkIfSegmentsChanged:function(e){var t=this.options.layoutMode,n=e?"rows":"cols",r=this[t][n];return this._getSegments(e),this[t][n]!==r},_masonryReset:function(){this.masonry={},this._getSegments();var e=this.masonry.cols;for(this.masonry.colYs=[];e--;)this.masonry.colYs.push(0)},_masonryLayout:function(e){var n=this,r=n.masonry;e.each(function(){var e=t(this),l=Math.ceil(e.outerWidth(!0)/r.columnWidth);if(l=Math.min(l,r.cols),1===l)n._masonryPlaceBrick(e,r.colYs);else{var i,s,o=r.cols+1-l,a=[];for(s=0;o>s;s++)i=r.colYs.slice(s,s+l),a[s]=Math.max.apply(Math,i);n._masonryPlaceBrick(e,a)}})},_masonryPlaceBrick:function(e,t){for(var n=Math.min.apply(Math,t),r=0,l=0,i=t.length;i>l;l++)if(t[l]===n){r=l;break}var s=this.masonry.columnWidth*r,o=n;this._pushPosition(e,s,o);var a=n+e.outerHeight(!0),u=this.masonry.cols+1-i;for(l=0;u>l;l++)this.masonry.colYs[r+l]=a},_masonryGetContainerSize:function(){var e=Math.max.apply(Math,this.masonry.colYs);return{height:e}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(e){var n=this,r=this.element.width(),l=this.fitRows;e.each(function(){var e=t(this),i=e.outerWidth(!0),s=e.outerHeight(!0);0!==l.x&&i+l.x>r&&(l.x=0,l.y=l.height),n._pushPosition(e,l.x,l.y),l.height=Math.max(l.y+s,l.height),l.x+=i})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(e){var n=this,r=this.cellsByRow;e.each(function(){var e=t(this),l=r.index%r.cols,i=Math.floor(r.index/r.cols),s=(l+.5)*r.columnWidth-e.outerWidth(!0)/2,o=(i+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,s,o),r.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(e){var n=this;e.each(function(){var e=t(this);n._pushPosition(e,0,n.straightDown.y),n.straightDown.y+=e.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var e=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];e--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(e){var n=this,r=n.masonryHorizontal;e.each(function(){var e=t(this),l=Math.ceil(e.outerHeight(!0)/r.rowHeight);if(l=Math.min(l,r.rows),1===l)n._masonryHorizontalPlaceBrick(e,r.rowXs);else{var i,s,o=r.rows+1-l,a=[];for(s=0;o>s;s++)i=r.rowXs.slice(s,s+l),a[s]=Math.max.apply(Math,i);n._masonryHorizontalPlaceBrick(e,a)}})},_masonryHorizontalPlaceBrick:function(e,t){for(var n=Math.min.apply(Math,t),r=0,l=0,i=t.length;i>l;l++)if(t[l]===n){r=l;break}var s=n,o=this.masonryHorizontal.rowHeight*r;this._pushPosition(e,s,o);var a=n+e.outerWidth(!0),u=this.masonryHorizontal.rows+1-i;for(l=0;u>l;l++)this.masonryHorizontal.rowXs[r+l]=a},_masonryHorizontalGetContainerSize:function(){var e=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:e}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(e){var n=this,r=this.element.height(),l=this.fitColumns;e.each(function(){var e=t(this),i=e.outerWidth(!0),s=e.outerHeight(!0);0!==l.y&&s+l.y>r&&(l.x=l.width,l.y=0),n._pushPosition(e,l.x,l.y),l.width=Math.max(l.x+i,l.width),l.y+=s})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(e){var n=this,r=this.cellsByColumn;e.each(function(){var e=t(this),l=Math.floor(r.index/r.rows),i=r.index%r.rows,s=(l+.5)*r.columnWidth-e.outerWidth(!0)/2,o=(i+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,s,o),r.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(e){var n=this;e.each(function(){var e=t(this);n._pushPosition(e,n.straightAcross.x,0),n.straightAcross.x+=e.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},t.fn.imagesLoaded=function(e){function n(){e.call(l,i)}function r(e){var l=e.target;l.src!==o&&-1===t.inArray(l,a)&&(a.push(l),0>=--s&&(setTimeout(n),i.unbind(".imagesLoaded",r)))}var l=this,i=l.find("img").add(l.filter("img")),s=i.length,o="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a=[];return s||n(),i.bind("load.imagesLoaded error.imagesLoaded",r).each(function(){var e=this.src;this.src=o,this.src=e}),l};var x=function(t){e.console&&e.console.error(t)};t.fn.isotope=function(e,n){if("string"==typeof e){var r=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"isotope");return n?t.isFunction(n[e])&&"_"!==e.charAt(0)?(n[e].apply(n,r),undefined):(x("no such method '"+e+"' for isotope instance"),undefined):(x("cannot call methods on isotope prior to initialization; attempted to call method '"+e+"'"),undefined)})}else this.each(function(){var r=t.data(this,"isotope");r?(r.option(e),r._init(n)):t.data(this,"isotope",new t.Isotope(e,this,n))});return this}}(window,jQuery),window.Modernizr=function(e,t,n){function r(e){b.cssText=e}function l(e,t){return r(S.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function o(e,t){for(var r in e){var l=e[r];if(!s(l,"-")&&b[l]!==n)return"pfx"==t?l:!0}return!1}function a(e,t,r){for(var l in e){var s=t[e[l]];if(s!==n)return r===!1?e[l]:i(s,"function")?s.bind(r||t):s}return!1}function u(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),l=(e+" "+E.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?o(l,t):(l=(e+" "+F.join(r+" ")+r).split(" "),a(l,t,n))}function c(){d.input=function(n){for(var r=0,l=n.length;l>r;r++)N[n[r]]=!!(n[r]in k);return N.list&&(N.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),N}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),d.inputtypes=function(e){for(var r,l,i,s=0,o=e.length;o>s;s++)k.setAttribute("type",l=e[s]),r="text"!==k.type,r&&(k.value=x,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(l)&&k.style.WebkitAppearance!==n?(g.appendChild(k),i=t.defaultView,r=i.getComputedStyle&&"textfield"!==i.getComputedStyle(k,null).WebkitAppearance&&0!==k.offsetHeight,g.removeChild(k)):/^(search|tel)$/.test(l)||(r=/^(url|email)$/.test(l)?k.checkValidity&&k.checkValidity()===!1:k.value!=x)),_[e[s]]=!!r;return _}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var p,h,f="2.6.2",d={},v=!0,g=t.documentElement,y="modernizr",m=t.createElement(y),b=m.style,k=t.createElement("input"),x=":)",w={}.toString,S=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",E=C.split(" "),F=C.toLowerCase().split(" "),T={svg:"http://www.w3.org/2000/svg"},A={},_={},N={},D=[],I=D.slice,Q=function(e,n,r,l){var i,s,o,a,u=t.createElement("div"),c=t.body,p=c||t.createElement("body");if(parseInt(r,10))for(;r--;)o=t.createElement("div"),o.id=l?l[r]:y+(r+1),u.appendChild(o);return i=["&#173;",'<style id="s',y,'">',e,"</style>"].join(""),u.id=y,(c?u:p).innerHTML+=i,p.appendChild(u),c||(p.style.background="",p.style.overflow="hidden",a=g.style.overflow,g.style.overflow="hidden",g.appendChild(p)),s=n(u,e),c?u.parentNode.removeChild(u):(p.parentNode.removeChild(p),g.style.overflow=a),!!s},L=function(){function e(e,l){l=l||t.createElement(r[e]||"div"),e="on"+e;var s=e in l;return s||(l.setAttribute||(l=t.createElement("div")),l.setAttribute&&l.removeAttribute&&(l.setAttribute(e,""),s=i(l[e],"function"),i(l[e],"undefined")||(l[e]=n),l.removeAttribute(e))),l=null,s}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),R={}.hasOwnProperty;h=i(R,"undefined")||i(R.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return R.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=I.call(arguments,1),r=function(){if(this instanceof r){var l=function(){};l.prototype=t.prototype;var i=new l,s=t.apply(i,n.concat(I.call(arguments)));return Object(s)===s?s:i}return t.apply(e,n.concat(I.call(arguments)))};return r}),A.flexbox=function(){return u("flexWrap")},A.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},A.canvastext=function(){return!(!d.canvas||!i(t.createElement("canvas").getContext("2d").fillText,"function"))},A.webgl=function(){return!!e.WebGLRenderingContext},A.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:Q(["@media (",S.join("touch-enabled),("),y,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},A.geolocation=function(){return"geolocation"in navigator},A.postmessage=function(){return!!e.postMessage},A.websqldatabase=function(){return!!e.openDatabase},A.indexedDB=function(){return!!u("indexedDB",e)},A.hashchange=function(){return L("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},A.history=function(){return!(!e.history||!history.pushState)},A.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},A.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},A.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},A.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),s(b.backgroundColor,"rgba")||s(b.backgroundColor,"hsla")},A.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},A.backgroundsize=function(){return u("backgroundSize")},A.borderimage=function(){return u("borderImage")},A.borderradius=function(){return u("borderRadius")},A.boxshadow=function(){return u("boxShadow")},A.textshadow=function(){return""===t.createElement("div").style.textShadow},A.opacity=function(){return l("opacity:.55"),/^0.55$/.test(b.opacity)},A.cssanimations=function(){return u("animationName")},A.csscolumns=function(){return u("columnCount")},A.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+S.join(n+e)).slice(0,-e.length)),s(b.backgroundImage,"gradient")},A.cssreflections=function(){return u("boxReflect")},A.csstransforms=function(){return!!u("transform")},A.csstransforms3d=function(){var e=!!u("perspective");return e&&"webkitPerspective"in g.style&&Q("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},A.csstransitions=function(){return u("transition")},A.fontface=function(){var e;return Q('@font-face {font-family:"font";src:url("https://")}',function(n,r){var l=t.getElementById("smodernizr"),i=l.sheet||l.styleSheet,s=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";e=/src/i.test(s)&&0===s.indexOf(r.split(" ")[0])}),e},A.generatedcontent=function(){var e;return Q(["#",y,"{font:0/0 a}#",y,':after{content:"',x,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},A.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},A.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},A.localstorage=function(){try{return localStorage.setItem(y,y),localStorage.removeItem(y),!0}catch(e){return!1}},A.sessionstorage=function(){try{return sessionStorage.setItem(y,y),sessionStorage.removeItem(y),!0}catch(e){return!1}},A.webworkers=function(){return!!e.Worker},A.applicationcache=function(){return!!e.applicationCache},A.svg=function(){return!!t.createElementNS&&!!t.createElementNS(T.svg,"svg").createSVGRect},A.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==T.svg},A.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(T.svg,"animate")))},A.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(T.svg,"clipPath")))};for(var O in A)h(A,O)&&(p=O.toLowerCase(),d[p]=A[O](),D.push((d[p]?"":"no-")+p));return d.input||c(),d.addTest=function(e,t){if("object"==typeof e)for(var r in e)h(e,r)&&d.addTest(r,e[r]);else{if(e=e.toLowerCase(),d[e]!==n)return d;t="function"==typeof t?t():t,v!==n&&v&&(g.className+=" "+(t?"":"no-")+e),d[e]=t}return d},r(""),m=k=null,function(e,t){function r(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function l(){var e=m.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=y[e[v]];return t||(t={},g++,e[v]=g,y[g]=t),t}function s(e,n,r){if(n||(n=t),p)return n.createElement(e);r||(r=i(n));var l;return l=r.cache[e]?r.cache[e].cloneNode():d.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),l.canHaveChildren&&!f.test(e)?r.frag.appendChild(l):l}function o(e,n){if(e||(e=t),p)return e.createDocumentFragment();n=n||i(e);for(var r=n.frag.cloneNode(),s=0,o=l(),a=o.length;a>s;s++)r.createElement(o[s]);return r}function a(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return m.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(m,t.frag)}function u(e){e||(e=t);var n=i(e);return!m.shivCSS||c||n.hasCSS||(n.hasCSS=!!r(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),p||a(e,n),e}var c,p,h=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,v="_html5shiv",g=0,y={};(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,p=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return e.cloneNode===n||e.createDocumentFragment===n||e.createElement===n}()}catch(r){c=!0,p=!0}})();var m={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:p,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:s,createDocumentFragment:o};
e.html5=m,u(t)}(this,t),d._version=f,d._prefixes=S,d._domPrefixes=F,d._cssomPrefixes=E,d.hasEvent=L,d.testProp=function(e){return o([e])},d.testAllProps=u,d.testStyles=Q,d.prefixed=function(e,t,n){return t?u(e,t,n):u(e,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(v?" js "+D.join(" "):""),d}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==g.call(e)}function l(e){return"string"==typeof e}function i(){}function s(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function o(){var e=y.shift();m=1,e?e.t?d(function(){("c"==e.t?h.injectCss:h.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),o()):m=0}function a(e,n,r,l,i,a,u){function c(t){if(!f&&s(p.readyState)&&(b.r=f=1,!m&&o(),p.onload=p.onreadystatechange=null,t)){"img"!=e&&d(function(){x.removeChild(p)},50);for(var r in F[n])F[n].hasOwnProperty(r)&&F[n][r].onload()}}var u=u||h.errorTimeout,p=t.createElement(e),f=0,g=0,b={t:r,s:n,e:i,a:a,x:u};1===F[n]&&(g=1,F[n]=[]),"object"==e?p.data=n:(p.src=n,p.type=e),p.width=p.height="0",p.onerror=p.onload=p.onreadystatechange=function(){c.call(this,g)},y.splice(l,0,b),"img"!=e&&(g||2===F[n]?(x.insertBefore(p,k?null:v),d(c,u)):F[n].push(p))}function u(e,t,n,r,i){return m=0,t=t||"j",l(e)?a("c"==t?S:w,e,t,this.i++,n,r,i):(y.splice(this.i++,0,e),1==y.length&&o()),this}function c(){var e=h;return e.loader={load:u,i:0},e}var p,h,f=t.documentElement,d=e.setTimeout,v=t.getElementsByTagName("script")[0],g={}.toString,y=[],m=0,b="MozAppearance"in f.style,k=b&&!!t.createRange().compareNode,x=k?f:v.parentNode,f=e.opera&&"[object Opera]"==g.call(e.opera),f=!!t.attachEvent&&!f,w=b?"object":f?"script":"img",S=f?"script":w,C=Array.isArray||function(e){return"[object Array]"==g.call(e)},E=[],F={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};h=function(e){function t(e){var t,n,r,e=e.split("!"),l=E.length,i=e.pop(),s=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;s>n;n++)r=e[n].split("="),(t=T[r.shift()])&&(i=t(i,r));for(n=0;l>n;n++)i=E[n](i);return i}function s(e,l,i,s,o){var a=t(e),u=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(l&&(l=r(l)?l:l[e]||l[s]||l[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,l,i,s,o):(F[a.url]?a.noexec=!0:F[a.url]=1,i.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(l)||r(u))&&i.load(function(){c(),l&&l(a.origUrl,o,s),u&&u(a.origUrl,o,s),F[a.url]=2})))}function o(e,t){function n(e,n){if(e){if(l(e))n||(p=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}),s(e,p,t,0,u);else if(Object(e)===e)for(a in o=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(a)&&(!n&&!--o&&(r(p)?p=function(){var e=[].slice.call(arguments);h.apply(this,e),f()}:p[a]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(h[a])),s(e[a],p,t,a,u))}else!n&&f()}var o,a,u=!!e.test,c=e.load||e.both,p=e.callback||i,h=p,f=e.complete||i;n(u?e.yep:e.nope,!!c),c&&n(c)}var a,u,p=this.yepnope.loader;if(l(e))s(e,0,p,0);else if(C(e))for(a=0;e.length>a;a++)u=e[a],l(u)?s(u,0,p,0):C(u)?h(u):Object(u)===u&&o(u,p);else Object(e)===e&&o(e,p)},h.addPrefix=function(e,t){T[e]=t},h.addFilter=function(e){E.push(e)},h.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",p=function(){t.removeEventListener("DOMContentLoaded",p,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=o,e.yepnope.injectJs=function(e,n,r,l,a,u){var c,p,f=t.createElement("script"),l=l||h.errorTimeout;f.src=e;for(p in r)f.setAttribute(p,r[p]);n=u?o:n||i,f.onreadystatechange=f.onload=function(){!c&&s(f.readyState)&&(c=1,n(),f.onload=f.onreadystatechange=null)},d(function(){c||(c=1,n(1))},l),a?f.onload():v.parentNode.insertBefore(f,v)},e.yepnope.injectCss=function(e,n,r,l,s,a){var u,l=t.createElement("link"),n=a?o:n||i;l.href=e,l.rel="stylesheet",l.type="text/css";for(u in r)l.setAttribute(u,r[u]);s||(v.parentNode.insertBefore(l,v),d(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(){"undefined"==typeof console&&(console={},console.log=function(){});var Utils={};Utils["extends"]=function(e,t){t.prototype=new e},Utils.stackCounterLimit=1e3,Utils.stackCounter=0,Utils.recur=function(e){Utils.stackCounter===Utils.stackCounterLimit?(Utils.stackCounter=0,setTimeout(e,0)):(Utils.stackCounter++,e())},Utils.clone=function(e){return JSON.parse(JSON.stringify(e))},Utils.shuffle=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e},Utils.include=function(e,t){for(var n=arguments[2],r=e.length-1;r>=0;r--){var l=!1;if(l=null==n?e[r]===t:0===n(e[r],t),l===!0)return!0}return!1},Utils.remove=function(e,t){for(var n=[],r=0;e.length>r;r++)e[r]!==t&&n.push(e[r]);return n},Utils.repeat=function(e,t,n,r,l){4===arguments.length&&(l={}),t>e?(l._i=e,n(function(n,l){Utils.recur(function(){Utils.repeat(e+1,t,n,r,l)})},l)):r(l)},Utils.meanwhile=function(e,t,n,r){3===arguments.length&&(r={}),null==r._stack_counter&&(r._stack_counter=0),e===!0?t(function(e,t,r){39==r._stack_counter%40?(r._stack_counter=r._stack_counter+1,setTimeout(function(){Utils.neanwhile(e,t,n,r)},0)):(r._stack_counter=r._stack_counter+1,Utils.meanwhile(e,t,n,r))},r):n(r)},Utils.seq=function(){var e=arguments;return function(t){Utils.repeat(0,e.length,function(t,n){var r=arguments.callee;e[n._i](function(){t(r,n)})},function(){t()})}},Utils.partition=function(e,t){for(var n=e.length%t,r=[],l=0;n>l;l++)r.push(null);for(var i=[],l=0;e.length>l;l++)r.push(e[l]),0==r.length%t&&(i.push(r),r=[]);return i},Utils.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Utils.iso8601=function(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},Utils.parseStrictISO8601=function(e){var t="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",n=e.match(RegExp(t)),r=0,l=new Date(n[1],0,1);if(!n[3])throw"missing ISO8061 component";if(l.setMonth(n[3]-1),!n[5])throw"missing ISO8061 component";if(l.setDate(n[5]),!n[7])throw"missing ISO8061 component";if(l.setHours(n[7]),!n[8])throw"missing ISO8061 component";if(l.setMinutes(n[8]),!n[10])throw"missing ISO8061 component";l.setSeconds(n[10]),n[12]&&l.setMilliseconds(1e3*Number("0."+n[12])),n[14]&&(r=60*Number(n[16])+Number(n[17]),r*="-"==n[15]?1:-1),r-=l.getTimezoneOffset();var i=Number(l)+1e3*60*r,s=new Date;return s.setTime(Number(i)),s},Utils.parseISO8601=function(e){var t="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",n=e.match(RegExp(t)),r=0,l=new Date(n[1],0,1);n[3]&&l.setMonth(n[3]-1),n[5]&&l.setDate(n[5]),n[7]&&l.setHours(n[7]),n[8]&&l.setMinutes(n[8]),n[10]&&l.setSeconds(n[10]),n[12]&&l.setMilliseconds(1e3*Number("0."+n[12])),n[14]&&(r=60*Number(n[16])+Number(n[17]),r*="-"==n[15]?1:-1),r-=l.getTimezoneOffset();var i=Number(l)+1e3*60*r,s=new Date;return s.setTime(Number(i)),s},Utils.parseISO8601Components=function(e){var t,n,r,l,i,s,o,a,u="([0-9]{4})(-([0-9]{2}))(-([0-9]{2}))(T([0-9]{2}):([0-9]{2})(:([0-9]{2}))?(.([0-9]+))?)?(Z|([-+])([0-9]{2})(:([0-9]{2}))?)?",c=e.match(RegExp(u));return t=Number(c[1]),n=c[3]-1,r=Number(c[5]),l=Number(c[7]),i=Number(c[8]),s=Number(c[10]),c[12]&&(o=1e3*Number("0."+c[12])),"Z"===c[13]?a=0:c[14]?(a=0,c[17]&&(a=Number(c[17])),a+=60*Number(c[15]),a*="-"==c[14]?-1:1):null==c[14]&&c[11]&&(a=60*Number(c[12])),{year:isNaN(t)?null:t,month:isNaN(n)?null:n,date:isNaN(r)?null:r,hours:isNaN(l)?null:l,minutes:isNaN(i)?null:i,seconds:isNaN(s)?null:s,millisecs:isNaN(o)?null:o,timezone:isNaN(a)?null:a}},Utils.compareDateComponents=function(e,t){var n=Utils.parseISO8601Components(e),r=Utils.parseISO8601Components(t);if(null==n.timezone&&null==r.timezone||null!=n.timezone&&null!=r.timezone){var l=Utils.parseISO8601(e),i=Utils.parseISO8601(t);return l.getTime()==i.getTime()?0:l.getTime()<i.getTime()?-1:1}if(null!=n.timezone&&null==r.timezone){l=Utils.parseISO8601(e),i=Utils.parseISO8601(t);var s=l.getTime(),o=i.getTime(),a=50400;return o>s&&o+a>s?-1:s>o&&s>o-a?1:null}l=Utils.parseISO8601(e),i=Utils.parseISO8601(t),s=l.getTime(),o=i.getTime();var a=50400;return o>s&&o>s+a?-1:s>o&&s+a>o?1:null},Utils.lexicalFormLiteral=function(e,t){var n=e.value,r=e.lang,l=e.type,i=null;if(null!=n&&null!=l&&"string"!=typeof l){var s=l.value;if(null==s){var o=l.prefix,a=l.suffix,u=t.namespaces[o];e.type=u+a,s=u+a}i=-1!=s.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+s+">":'"'+e.value+'"^^<'+s+">"}else i=null==r&&null==l?'"'+n+'"':null==l?'"'+n+'"'+"@"+r:-1!=l.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+l+">":'"'+e.value+'"^^<'+l+">";return i},Utils.lexicalFormBaseUri=function(e,t){var n=null;if(null==e.value){var r=e.prefix,l=e.suffix,i=t.namespaces[r];n=null!=i?i+l:r+":"+l}else n=e.value;return null===n?null:(-1==n.indexOf(":")&&"@graph"!=n&&(n=(t.base||"")+n),n)},Utils.lexicalFormTerm=function(e,t){if("uri"===e.token)return{uri:Utils.lexicalFormBaseUri(e,t)};if("literal"===e.token)return{literal:Utils.lexicalFormLiteral(e,t)};if("blank"===e.token){var n="_:"+e.value;return{blank:n}}throw"Error, cannot get lexical form of unknown token: "+e.token},Utils.normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;escapedUnicode.length>i;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},Utils.hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(n){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}};var InMemoryBTree={},left=-1,right=1;InMemoryBTree.Tree=function(e){0!=arguments.length&&(this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._diskWrite(this.root),this._updateRootNode(this.root),this.comparator=function(e,t){return t>e?-1:e>t?1:0},this.merger=null)},InMemoryBTree.Tree.prototype._allocateNode=function(){return new InMemoryBTree.Node},InMemoryBTree.Tree.prototype._diskWrite=function(){},InMemoryBTree.Tree.prototype._diskRead=function(e){return e},InMemoryBTree.Tree.prototype._diskDelete=function(){},InMemoryBTree.Tree.prototype._updateRootNode=function(e){return e},InMemoryBTree.Tree.prototype.clear=function(){this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0,this._updateRootNode(this.root)},InMemoryBTree.Tree.prototype.search=function(e,t){for(var n=!0,r=this.root;n;){for(var l=0;r.numberActives>l&&1===this.comparator(e,r.keys[l].key);)l++;if(r.numberActives>l&&0===this.comparator(r.keys[l].key,e))return null!=t&&1==t?!0:r.keys[l].data;r.isLeaf===!0?n=!1:r=this._diskRead(r.children[l])}return null},InMemoryBTree.Tree.prototype.walk=function(e){this._walk(e,this.root)},InMemoryBTree.Tree.prototype._walk=function(e,t){if(t.isLeaf)for(var n=0;t.numberActives>n;n++)e(t.keys[n]);else{for(var n=0;t.numberActives>n;n++)this._walk(e,this._diskRead(t.children[n])),e(t.keys[n]);this._walk(e,this._diskRead(t.children[t.numberActives]))}},InMemoryBTree.Tree.prototype.walkNodes=function(e){this._walkNodes(e,this.root)},InMemoryBTree.Tree.prototype._walkNodes=function(e,t){if(t.isLeaf)e(t);else{e(t);for(var n=0;t.numberActives>n;n++)this._walkNodes(e,this._diskRead(t.children[n]));this._walkNodes(e,this._diskRead(t.children[t.numberActives]))}},InMemoryBTree.Tree.prototype._splitChild=function(e,t,n){var r=this._allocateNode();r.isLeaf=n.isLeaf,r.level=n.level,r.numberActives=this.order-1;var l=n.keys[this.order-1];n.keys[this.order-1]=null;for(var i=0;this.order-1>i;i++)r.keys[i]=n.keys[i+this.order],n.keys[i+this.order]=null,n.isLeaf||(r.children[i]=n.children[i+this.order],n.children[i+this.order]=null);for(n.isLeaf||(r.children[i]=n.children[i+this.order],n.children[i+this.order]=null),n.numberActives=this.order-1,i=e.numberActives+1;i>t+1;i--)e.children[i]=e.children[i-1];for(e.children[t+1]=r,i=e.numberActives;i>t;i--)e.keys[i]=e.keys[i-1];e.keys[t]=l,e.numberActives++,this._diskWrite(r),this._diskWrite(e),this._diskWrite(n)},InMemoryBTree.Tree.prototype.insert=function(e,t){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root,this._splitChild(n,0,this.root),this.root=n,this._updateRootNode(this.root),this._insertNonFull(n,e,t)}else this._insertNonFull(this.root,e,t)},InMemoryBTree.Tree.prototype._insertNonFull=function(e,t,n){for(var r=e.numberActives-1;!e.isLeaf;){for(;r>=0&&-1===this.comparator(t,e.keys[r].key);)r--;r++;var l=this._diskRead(e.children[r]);l.numberActives===2*this.order-1&&(this._splitChild(e,r,l),1===this.comparator(t,e.keys[r].key)&&r++),e=this._diskRead(e.children[r]),r=e.numberActives-1}for(;r>=0&&-1===this.comparator(t,e.keys[r].key);)e.keys[r+1]=e.keys[r],r--;e.keys[r+1]={key:t,data:n},e.numberActives++,this._diskWrite(e)},InMemoryBTree.Tree.prototype["delete"]=function(e){for(var t=this.root,n=null,r=!0,l=null,i=null,s=null,o=!0;o===!0;){for(o=!1;r===!0;){if(h=0,0===t.numberActives)return!1;for(;t.numberActives>h&&1===this.comparator(e,t.keys[h].key);)h++;if(l=h,t.numberActives>h&&0===this.comparator(e,t.keys[h].key)&&(r=!1),r===!0){if(t.isLeaf===!0)return!1;if(n=t,t=this._diskRead(t.children[h]),null===t)return!1;l===n.numberActives?(i=this._diskRead(n.children[l-1]),s=null):0===l?(i=null,s=this._diskRead(n.children[1])):(i=this._diskRead(n.children[l-1]),s=this._diskRead(n.children[l+1])),t.numberActives===this.order-1&&null!=n&&(null!=s&&s.numberActives>this.order-1?this._moveKey(n,h,left):null!=i&&i.numberActives>this.order-1?this._moveKey(n,h,right):null!=i&&i.numberActives===this.order-1?t=this._mergeSiblings(n,h,left):null!=s&&s.numberActives===this.order-1&&(t=this._mergeSiblings(n,h,right)))}}if(t.isLeaf&&t.numberActives>this.order-1)return this._deleteKeyFromNode(t,l),!0;if(t.isLeaf&&t===this.root)return this._deleteKeyFromNode(t,l),!0;if(t.isLeaf===!1){var a=null,u=null;if((a=this._diskRead(t.children[l])).numberActives>this.order-1){var c=this._getMaxKeyPos(a);e=c.node.keys[c.index],t.keys[l]=e,this._diskWrite(t),t=a,e=e.key,o=!0,r=!0}else if((a=this._diskRead(t.children[l+1])).numberActives>this.order-1){var c=this._getMinKeyPos(a);e=c.node.keys[c.index],t.keys[l]=e,this._diskWrite(t),t=a,e=e.key,o=!0,r=!0}else if((a=this._diskRead(t.children[l])).numberActives===this.order-1&&(u=this._diskRead(t.children[l+1])).numberActives===this.order-1){var p=this._mergeNodes(a,t.keys[l],u);t.children[l]=p,l++;for(var h=l;t.numberActives>h;h++)t.children[h]=t.children[h+1],t.keys[h-1]=t.keys[h];t.children[h]=null,t.keys[h-1]=null,t.numberActives--,0===t.numberActives&&this.root===t&&(this.root=p),this._diskWrite(t),t=p,o=!0,r=!0}}if(t.isLeaf&&t.numberActives>this.order-1&&r===!1&&this._deleteKeyFromNode(t,l),o===!1)return!0}},InMemoryBTree.Tree.prototype._moveKey=function(e,t,n){n===right&&t--;var r=this._diskRead(e.children[t]),l=this._diskRead(e.children[t+1]);if(n==left){r.keys[r.numberActives]=e.keys[t],r.children[r.numberActives+1]=l.children[0],l.children[0]=null,r.numberActives++,e.keys[t]=l.keys[0];for(var i=1;l.numberActives>i;i++)l.keys[i-1]=l.keys[i],l.children[i-1]=l.children[i];l.children[l.numberActives-1]=l.children[l.numberActives],l.numberActives--}else{l.children[l.numberActives+1]=l.children[l.numberActives];for(var i=l.numberActives;i>0;i--)l.children[i]=l.children[i-1],l.keys[i]=l.keys[i-1];l.keys[0]=null,l.children[0]=null,l.children[0]=r.children[r.numberActives],l.keys[0]=e.keys[t],l.numberActives++,r.children[r.numberActives]=null,e.keys[t]=r.keys[r.numberActives-1],r.keys[r.numberActives-1]=null,r.numberActives--}this._diskWrite(r),this._diskWrite(l),this._diskWrite(e)},InMemoryBTree.Tree.prototype._mergeSiblings=function(e,t){var n,r,l,i;t===e.numberActives?(t--,l=this._diskRead(e.children[e.numberActives-1]),i=this._diskRead(e.children[e.numberActives])):(l=this._diskRead(e.children[t]),i=this._diskRead(e.children[t+1]));var s=this._allocateNode();for(s.isLeaf=l.isLeaf,s.level=l.level,r=0;this.order-1>r;r++)s.keys[r]=l.keys[r],s.children[r]=l.children[r];for(s.keys[this.order-1]=e.keys[t],s.children[this.order-1]=l.children[this.order-1],r=0;this.order-1>r;r++)s.keys[r+this.order]=i.keys[r],s.children[r+this.order]=i.children[r];for(s.children[2*this.order-1]=i.children[this.order-1],e.children[t]=s,r=t;e.numberActives>r;r++)e.keys[r]=e.keys[r+1],e.children[r+1]=e.children[r+2];for(s.numberActives=l.numberActives+i.numberActives+1,e.numberActives--,n=e.numberActives;2*this.order-1>n;n++)e.keys[n]=null;return 0===e.numberActives&&this.root===e&&(this.root=s,s.isLeaf=s.level?!1:!0),this._diskWrite(s),this.root===s&&this._updateRootNode(this.root),this._diskWrite(e),this._diskDelete(l),this._diskDelete(i),s},InMemoryBTree.Tree.prototype._deleteKeyFromNode=function(e,t){var n=2*this.order-1;n>e.numberActives&&(n=e.numberActives);var r;if(e.isLeaf===!1)return!1;for(e.keys[t],r=t;n-1>r;r++)e.keys[r]=e.keys[r+1];return e.keys.pop(),e.numberActives--,this._diskWrite(e),!0},InMemoryBTree.Tree.prototype._mergeNodes=function(e,t,n){var r,l;for(r=this._allocateNode(),r.isLeaf=!0,l=0;e.numberActives>l;l++)r.keys[l]=e.keys[l],r.children[l]=e.children[l];for(r.children[e.numberActives]=e.children[e.numberActives],r.keys[e.numberActives]=t,l=0;n.numberActives>l;l++)r.keys[l+e.numberActives+1]=n.keys[l],r.children[l+e.numberActives+1]=n.children[l];return r.children[2*this.order-1]=n.children[n.numberActives],r.numberActives=e.numberActives+n.numberActives+1,r.isLeaf=e.isLeaf,r.level=e.level,this._diskWrite(r),r},InMemoryBTree.Tree.prototype.audit=function(e){var t=[],n=[],r=this,l=function(l){for(var i=0;n.length>i;i++)if(0===r.comparator(n[i],l)){var s=" !!! duplicated key "+l;e===!0&&console.log(s),t.push(s)}},i=null,r=this;return this.walkNodes(function(s){e===!0&&(console.log("--- Node at "+s.level+" level"),console.log(" - leaf? "+s.isLeaf),console.log(" - num actives? "+s.numberActives),console.log(" - keys: "));for(var o=s.numberActives;s.keys.length>o;o++)null!=s.keys[o]&&e===!0&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var o=s.numberActives+1;s.children.length>o;o++)null!=s.children[o]&&e===!0&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(s.isLeaf===!1)for(var o=0;s.numberActives>o;o++){var a=r._diskRead(s.children[o]).keys[r._diskRead(s.children[o]).numberActives-1].key,u=r._diskRead(s.children[o+1]).keys[0].key;if(e===!0&&console.log("   "+s.keys[o].key+"("+a+","+u+")"),-1===r.comparator(s.keys[o].key,a)){var c=" !!! value max left "+a+" > key "+s.keys[o].key;e===!0&&console.log(c),t.push(c)}if(1===r.comparator(s.keys[o].key,u)){var c=" !!! value min right "+u+" < key "+s.keys[o].key;e===!0&&console.log(c),t.push(c)}l(s.keys[o].key),n.push(s.keys[o].key)}else{if(null===i)i=s.level;else if(i!=s.level){var c=" !!! Leaf node with wrong level value";e===!0&&console.log(c),t.push(c)}for(var o=0;s.numberActives>o;o++)e===!0&&console.log(" "+s.keys[o].key),l(s.keys[o].key),n.push(s.keys[o].key)}if(s!=r.root){if(s.numberActives>2*r.order-1){if(e===!0)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(s.numberActives<r.order-1){if(e===!0)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},InMemoryBTree.Tree.prototype._getMaxKeyPos=function(e){for(var t={};;){if(null===e)break;if(e.isLeaf===!0)return t.node=e,t.index=e.numberActives-1,t;t.node=e,t.index=e.numberActives-1,e=this._diskRead(e.children[e.numberActives])}return t},InMemoryBTree.Tree.prototype._getMinKeyPos=function(e){for(var t={};;){if(null===e)break;if(e.isLeaf===!0)return t.node=e,t.index=0,t;t.node=e,t.index=0,e=this._diskRead(e.children[0])}return t},InMemoryBTree.Node=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};var QuadIndexCommon={};QuadIndexCommon.NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},QuadIndexCommon.NodeKey.prototype.comparator=function(e){for(var t=0;this.order.length>t;t++){var n=this.order[t];if(null==e[n])return 0;if(this[n]<e[n])return-1;if(this[n]>e[n])return 1}return 0},QuadIndexCommon.Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};for(var t=[],n=[],e=["subject","predicate","object","graph"],r=0;e.length>r;r++)"string"==typeof this[e[r]]?(n.push(e[r]),this.keyComponents[e[r]]=null):(t.push(e[r]),this.keyComponents[e[r]]=this[e[r]],this.indexKey.push(e[r]));this.order=t.concat(n),this.key=new QuadIndexCommon.NodeKey(this.keyComponents,this.order)};var QuadIndex={},BaseTree=InMemoryBTree;QuadIndex.Tree=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,BaseTree.Tree.call(this,e.order,e.name,e.persistent,e.cacheMaxSize),this.comparator=function(e,t){for(var n=0;this.componentOrder.length>n;n++){var r=this.componentOrder[n],l=e[r],i=t[r];if(i>l)return-1;if(l>i)return 1}return 0},this.rangeComparator=function(e,t){for(var n=0;this.componentOrder.length>n;n++){var r=this.componentOrder[n];if(null==t[r]||null==e[r])return 0;if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},null!=t&&t(this))},Utils["extends"](BaseTree.Tree,QuadIndex.Tree),QuadIndex.Tree.prototype.insert=function(e,t){return BaseTree.Tree.prototype.insert.call(this,e,null),t&&t(!0),!0},QuadIndex.Tree.prototype.search=function(e,t){var n=BaseTree.Tree.prototype.search.call(this,e,!0);return t&&t(n),n},QuadIndex.Tree.prototype.range=function(e,t){var n=null;return n="string"==typeof this.root?this._rangeTraverse(this,this._diskRead(this.root),e):this._rangeTraverse(this,this.root,e),t&&t(n),n},QuadIndex.Tree.prototype._rangeTraverse=function(e,t,n){for(var t,r,l,i=n.key,s=[],o=[t];o.length>0;){for(t=o.shift(),r=0;t.numberActives>r&&-1===e.rangeComparator(t.keys[r].key,i);)r++;if(t.isLeaf===!0)for(l=r;t.numberActives>l&&0===e.rangeComparator(t.keys[l].key,i);)s.push(t.keys[l].key),l++;else{var a=t.children[r],u=e._diskRead(a);o.push(u);for(var l=r;;){if(!(t.numberActives>l&&0===e.rangeComparator(t.keys[l].key,i)))break;s.push(t.keys[l].key),l++,u=e._diskRead(t.children[l]),o.push(u)}}}return s};var QuadBackend={};QuadBackend.QuadBackend=function(e,t){if(0!=arguments){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};for(var n=0;this.indices.length>n;n++){var r=this.indices[n];this.indexMap[r]=new QuadIndex.Tree({order:this.treeOrder,componentOrder:this.componentOrders[r],persistent:e.persistent,name:(e.name||"")+r,cacheMaxSize:e.cacheMaxSize})}t&&t(this)}},QuadBackend.QuadBackend.prototype.clear=function(){for(var e=0;this.indices.length>e;e++){var t=this.indices[e];this.indexMap[t].clear()}},QuadBackend.QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,n=this.indices,r=0;n.length>r;r++)for(var l=n[r],i=this.componentOrders[l],s=0;i.length>s&&Utils.include(t,i[s])!==!1;s++)if(s==t.length-1)return l;return"SPOG"},QuadBackend.QuadBackend.prototype.index=function(e,t){for(var n=0;this.indices.length>n;n++){var r=this.indices[n],l=this.indexMap[r];l.insert(e)}return t&&t(!0),!0},QuadBackend.QuadBackend.prototype.range=function(e,t){var n=this._indexForPattern(e),r=this.indexMap[n],l=r.range(e);return t&&t(l),l},QuadBackend.QuadBackend.prototype.search=function(e,t){var n=this.indices[0],r=this.indexMap[n],l=r.search(e);return t&&t(null!=l),null!=l},QuadBackend.QuadBackend.prototype["delete"]=function(e,t){for(var n,r,l=0;this.indices.length>l;l++)n=this.indices[l],r=this.indexMap[n],r["delete"](e);return t&&t(!0),!0};var Lexicon={};Lexicon.Lexicon=function(e){this.uriToOID={},this.OIDToUri={},this.literalToOID={},this.OIDToLiteral={},this.blankToOID={},this.OIDToBlank={},this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri,oid:this.defaultGraphOid},this.oidCounter=1,this.knownGraphs={},null!=e&&e(this)},Lexicon.Lexicon.prototype.registerGraph=function(e){return e!=this.defaultGraphOid&&(this.knownGraphs[e]=!0),!0},Lexicon.Lexicon.prototype.registeredGraphs=function(e){var t=[];for(var n in this.knownGraphs)e===!0?t.push(this.OIDToUri["u"+n]):t.push(n);return t},Lexicon.Lexicon.prototype.registerUri=function(e){if(e===this.defaultGraphUri)return this.defaultGraphOid;if(null==this.uriToOID[e]){var t=this.oidCounter,n="u"+t;return this.oidCounter++,this.uriToOID[e]=[t,0],this.OIDToUri[n]=e,t}var r=this.uriToOID[e],t=r[0],l=r[1]+1;return this.uriToOID[e]=[t,l],t},Lexicon.Lexicon.prototype.resolveUri=function(e){if(e===this.defaultGraphUri)return this.defaultGraphOid;var t=this.uriToOID[e];return null!=t?t[0]:-1},Lexicon.Lexicon.prototype.resolveUriCost=function(e){if(e===this.defaultGraphUri)return this.defaultGraphOid;var t=this.uriToOID[e];return null!=t?t[1]:-1},Lexicon.Lexicon.prototype.registerBlank=function(){var e=this.oidCounter;this.oidCounter++;var t=""+e;return this.OIDToBlank[t]=!0,t},Lexicon.Lexicon.prototype.resolveBlank=function(){var e=this.oidCounter;return this.oidCounter++,""+e},Lexicon.Lexicon.prototype.resolveBlankCost=function(){return 0},Lexicon.Lexicon.prototype.registerLiteral=function(e){if(null==this.literalToOID[e]){var t=this.oidCounter,n="l"+t;return this.oidCounter++,this.literalToOID[e]=[t,0],this.OIDToLiteral[n]=e,t}var r=this.literalToOID[e],t=r[0],l=r[1]+1;return this.literalToOID[e]=[t,l],t},Lexicon.Lexicon.prototype.resolveLiteral=function(e){var t=this.literalToOID[e];return null!=t?t[0]:-1},Lexicon.Lexicon.prototype.resolveLiteralCost=function(e){var t=this.literalToOID[e];return null!=t?t[1]:0},Lexicon.Lexicon.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(-1!=t&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var n=e.substring(1,t-1),r=e.substring(t+1,e.length);return{token:"literal",value:n,lang:r}}var t=e.lastIndexOf("^^");if(-1!=t&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var n=e.substring(1,t-1),l=e.substring(t+3,e.length-1);return{token:"literal",value:n,type:l}}var n=e.substring(1,e.length-1);return{token:"literal",value:n}},Lexicon.Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.Lexicon.prototype.retrieve=function(e){try{if(e===this.defaultGraphOid)return{token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0};var t=this.OIDToUri["u"+e];if(null!=t)return this.parseUri(t);var n=this.OIDToLiteral["l"+e];if(null!=n)return this.parseLiteral(n);var r=this.OIDToBlank[""+e];if(null!=r)return{token:"blank",value:"_:"+e};throw"Null value for OID"}catch(l){throw console.log("error in lexicon retrieving OID:"),console.log(e),l.message||l.stack?(l.message&&console.log(l.message),l.stack&&console.log(l.stack)):console.log(l),Error("Unknown retrieving OID in lexicon:"+e)}},Lexicon.Lexicon.prototype.clear=function(){this.uriToOID={},this.OIDToUri={},this.literalToOID={},this.OIDToLiteral={},this.blankToOID={},this.OIDToBlank={}},Lexicon.Lexicon.prototype.unregister=function(e,t){try{return this.unregisterTerm(e.subject.token,t.subject),this.unregisterTerm(e.predicate.token,t.predicate),this.unregisterTerm(e.object.token,t.object),null!=e.graph&&this.unregisterTerm(e.graph.token,t.graph),!0}catch(n){return console.log("Error unregistering quad"),console.log(n.message),!1}},Lexicon.Lexicon.prototype.unregisterTerm=function(e,t){if("uri"===e){if(t!=this.defaultGraphOid){var n="u"+t,r=this.OIDToUri[n],l=this.uriToOID[r],i=l[1];if(""+l[0]!=""+t)throw"Not matching OID : "+t+" vs "+l[0];0===i?(delete this.OIDToUri[n],delete this.uriToOID[r],delete this.knownGraphs[t]):this.uriToOID[r]=[t,i-1]}}else if("literal"===e){this.oidCounter++;var n="l"+t,s=this.OIDToLiteral[n],l=this.literalToOID[s],i=l[1];if(""+l[0]!=""+t)throw"Not matching OID : "+t+" vs "+l[0];0===i?(delete this.OIDToLiteral[n],delete this.literalToOID[s]):this.literalToOID[s]=[t,i-1]}else"blank"===e&&delete this.OIDToBlank[""+t]};var NetworkTransport={};NetworkTransport.load=function(e,t,n){var r=jQuery;console.log("visaRDF"),r.ajax({url:e,headers:{Accept:t},success:function(e,t,r){if("2"==(""+r.status)[0]){for(var l=r.getAllResponseHeaders().split("\n"),i={},s=0;l.length>s;s++){var o=l[s].split(":");i[o[0]]=o[1]}n(!0,{headers:i,data:e})}},error:function(e){if("3"==(""+e.status)[0])if(0==redirection)n(!1,500);else{var r=e.getAllResponseHeaders().Location||e.getAllResponseHeaders().location;null!=r?NetworkTransport.load(r,t,n,redirection-1):n(!1,500)}else n(!1,e.statusCode())}})};var jsonldParser=null;(function(){var e=function(e,t){e.stack="";for(var n in t)e[n]=t[n]};if("undefined"!=typeof window){var t=window.jsonld=window.jsonld||{};Exception=function(t){e(this,t)},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],l=arguments[1],i=0;n>i;i++)if(i in t){var s=t[i];e.call(l,s,i,t)&&r.push(s)}return r})}else if("undefined"!=typeof module&&module.exports){var t={};Exception=function(t){e(this,t),this.stack=Error().stack}}jsonldParser=t;var n={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},r={xsd:"http://www.w3.org/2001/XMLSchema#"},l={"boolean":r.xsd+"boolean","double":r.xsd+"double",integer:r.xsd+"integer"},i=function(e,t,n){t in e?e[t].constructor===Array?e[t].push(n):e[t]=[e[t],n]:e[t]=n},s=function(e){var t;if(e.constructor===Object){t={};var n=Object.keys(e).sort();for(var r in n){var l=n[r];t[l]=s(e[l])}}else if(e.constructor===Array){t=[];for(var r in e)t[r]=s(e[r])}else t=e;return t},o=function(e){var t={"@id":"@id","@language":"@language","@literal":"@literal","@type":"@type"};if(e){var n={};for(var r in e)e[r].constructor===String&&e[r]in t&&(n[e[r]]=r);for(var r in n)t[r]=n[r]}return t},a=function(e,t){var n=null;return t in e&&(e[t].constructor===String?n=e[t]:e[t].constructor===Object&&"@id"in e[t]&&(n=e[t]["@id"])),n},u=function(e,t,n){var r=null;for(var l in e)if(l.length>0&&"@"!==l[0]&&t===a(e,l)){r=l,null!==n&&(n[l]=s(e[l]));break}if(null===r&&"@type"===t&&(r=o(e)["@type"]),null===r)for(var l in e)if(l.length>0&&"@"!==l[0]){var i=a(e,l);if(null!==i){var u=t.indexOf(i);if(0===u&&t.length>i.length){r=l+":"+t.substr(i.length),null!==n&&(n[l]=s(e[l]));break
}}}return null===r&&(r=t),r},c=function(e,t,n){var r=t,l=o(e),i=t.indexOf(":");if(-1!==i){var u=t.substr(0,i);if(u in e){var c=a(e,u);r=c+t.substr(i+1),null!==n&&(n[u]=s(e[u]))}}else if(t in e)r=a(e,t),null!==n&&(n[t]=s(e[t]));else for(var p in l)if(t===l[p]){r=p;break}return r},p=function(e){var t={},n=Object.keys(e).sort();for(var r in n){var l=n[r];t[l]=e[l]}return t},h=function(e){return null!==e&&e.constructor===Object&&"@id"in e&&1===Object.keys(e).length},f=function(e){var t=!1;if(null!==e&&e.constructor===Object&&!("@literal"in e)){var n=Object.keys(e).length;t=n>1||!("@id"in e)}return t};t.normalize=function(e){return(new d).normalize(e)},t.expand=function(e){return(new d).expand({},null,e)},t.compact=function(e,n){var r=null;if(null!==n){n=t.expand(n);var l;n.constructor===Array?(r=[],l=n):l=[n],e.constructor===Array&&(e=t.mergeContexts({},e));for(var i in l){var o={},a=(new d).compact(s(e),null,l[i],o);if(Object.keys(o).length>0){o=p(o);var u=Object.keys(a);u.sort(),u.unshift("@context"),a["@context"]=o;var c={};for(var h in u){var f=u[h];c[f]=a[f]}a=c}null===r?r=a:r.push(a)}}return r},t.mergeContexts=function(e,n){e.constructor===Array&&(e=t.mergeContexts({},e));var r=s(e);if(n.constructor===Array)for(var l in n)r=t.mergeContexts(r,n[l]);else{for(var i in n)if(0!==i.indexOf("@"))for(var o in r)if(r[o]===n[i]){delete r[o];break}for(var i in n)r[i]=s(n[i])}return r},t.expandTerm=c,t.compactIri=function(e,t){return u(e,t,null)},t.frame=function(e,t,n){return(new d).frame(e,t,n)},t.toTriples=function(e,n,r){var l=null,i=t.normalize(e);r=r||null,null===r&&(l=[],r=function(e,t,r){l.push({subject:Utils.lexicalFormTerm(e),predicate:Utils.lexicalFormTerm(t),object:Utils.lexicalFormTerm(r),graph:n})});var s=!1;for(var o in i){var a=i[o],u=a["@id"];u="_"==u[0]?{token:"blank",value:u.split(":")[1]}:{token:"uri",value:u};for(var c in a)if("@id"!==c){var p=a[c];p.constructor!==Array&&(p=[p]);for(var h in p){var f=p[h];if("@type"===c||"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===c?(c="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",f={token:"uri",value:f}):"string"==typeof f?f={token:"literal",value:f}:null!=f["@id"]?f="_"==f["@id"][0]?{token:"blank",value:f["@id"].split(":")[1]}:{token:"uri",value:f["@id"]}:null!=f["@type"]?f={token:"literal",value:f["@literal"],type:f["@type"]}:null!=f["@language"]&&(f={token:"literal",value:f["@literal"],lang:f["@language"]}),s=r(u,{token:"uri",value:c},f)===!1)break}if(s)break}if(s)break}return l},t.resolve=function(e,t,n){var r={},l=function(e,t){if(e.constructor===Array)for(var n in e)l(e[n]);else if(e.constructor===Object)for(var i in e)if("@context"===i)if(e[i].constructor===Array){var s=e[i];for(var n in s)s[n].constructor===String&&(t?s[n]=r[s[n]]:r[s[n]]={})}else e[i].constructor===String&&(t?e[i]=r[e[i]]:r[e[i]]={})};l(e,!1);var i=Object.keys(r).length,s=null;if(0===i)n(e,s);else for(var o in r)t(o,function(t,a){if(--i,null===t)s=s||[],s.push({url:o,error:a});else try{r[o]=t.constructor===String?JSON.parse(t)["@context"]:t["@context"]}catch(u){s=s||[],s.push({url:o,error:u})}0===i&&(null===s&&l(e,!0),n(e,s))})};var d=function(){};d.prototype.compact=function(e,t,n,r){var i,a=o(e);if(null===n)i=null,this.getCoerceType(e,t,r);else if(n.constructor===Array){i=[];for(var c in n)i.push(this.compact(e,t,n[c],r))}else if(n.constructor===Object&&"@id"in n&&n["@id"].constructor===Array)i={},i[a["@id"]]=this.compact(e,t,n["@id"],r);else if(f(n)){i={};for(var p in n)if("@context"!==n[p]){var h=u(e,p,r);h===p&&h in i||(i[h]=this.compact(e,p,n[p],r))}}else{var d=this.getCoerceType(e,t,r),v=null;if(n.constructor===Object?"@language"in n||(v="@type"in n?n["@type"]:"@id"in n?"@id":d):n.constructor===String&&(v=d),null!==d||v!==l["boolean"]&&v!==l.integer&&v!==l["double"]||(d=v),null!==d){if(null===v)throw{message:"Cannot coerce type when a language is specified. The language information would be lost."};if(v!==d)throw new Exception({message:"Cannot coerce type because the type does not match.",type:v,expected:d});n.constructor===Object?"@id"in n?i=n["@id"]:"@literal"in n&&(i=n["@literal"]):i=n,d===l["boolean"]?i="true"===i||0!=i:d===l["double"]?i=parseFloat(i):d===l.integer&&(i=parseInt(i))}else if(n.constructor===Object){i={};for(var p in n)i[a[p]]=n[p]}else i=s(n);"@id"===v&&(i.constructor===Object?i[a["@id"]]=u(e,i[a["@id"]],r):i=u(e,i,r))}return i},d.prototype.expand=function(e,n,r){var a;if(null===r)a=null;else if(null===n&&r.constructor===String)a=c(e,r,null);else if(r.constructor===Array){a=[];for(var u in r)a.push(this.expand(e,n,r[u]))}else if(r.constructor===Object){"@context"in r&&(e=t.mergeContexts(e,r["@context"])),a={};for(var p in r)"@embed"===p||"@explicit"===p||"@default"===p||"@omitDefault"===p?i(a,p,s(r[p])):"@context"!==p&&i(a,c(e,p,null),this.expand(e,p,r[p]))}else{var h=this.getCoerceType(e,n,null),f=o(e);null!==h||r.constructor!==Number&&r.constructor!==Boolean||(h=r.constructor===Boolean?l["boolean"]:-1==(""+r).indexOf(".")?l.integer:l["double"]),n===f["@id"]||n===f["@type"]?a=c(e,r,null):null!==h?(a={},"@id"===h?a["@id"]=c(e,r,null):(a["@type"]=h,h===l["double"]&&(r=r.toExponential(6).replace(/(e(?:\+|-))([0-9])$/,"$10$2")),a["@literal"]=""+r)):a=""+r}return a},d.prototype.normalize=function(e){var t=[];if(null!==e){this.ng={tmp:null,c14n:null};var r=this.expand(n,null,e);this.nameBlankNodes(r);var l={};C(null,null,r,l);for(var i in l){var s=l[i],o={},a=Object.keys(s).sort();for(var u in a){var c=a[u];o[c]=s[c]}t.push(o)}this.canonicalizeBlankNodes(t),t.sort(function(e,t){return m(e["@id"],t["@id"])})}return t},d.prototype.getCoerceType=function(e,t,n){var r=null,l=c(e,t,null);if("@id"===l||"@type"===l)r="@id";else if(l=u(e,l,null),l in e&&e[l].constructor===Object&&"@type"in e[l]){var i=e[l]["@type"];r=c(e,i,n),null!==n&&(n[l]=s(e[l]))}return r};var v=function(e){return 0===e.indexOf("_:")},g=function(e){return e.constructor===Object&&"@id"in e&&v(e["@id"])},y=function(e){return f(e)&&(!("@id"in e)||g(e))},m=function(e,t){var n=0;if(e.constructor===Array&&t.constructor===Array)for(var r=0;e.length>r&&0===n;++r)n=m(e[r],t[r]);else n=t>e?-1:e>t?1:0;return n},b=function(e,t,n){var r=0;return n in e?r=n in t?m(e[n],t[n]):-1:n in t&&(r=1),r},k=function(e,t){var n=0;return e.constructor===String?n=t.constructor!==String?-1:m(e,t):t.constructor===String?n=1:(n=b(e,t,"@literal"),0===n&&("@literal"in e?(n=b(e,t,"@type"),0===n&&(n=b(e,t,"@language"))):n=m(e["@id"],t["@id"]))),n},x=function(e,t){var n=0;for(var r in e)if("@id"!==r){var l=e[r].constructor===Array?e[r].length:1,i=t[r].constructor===Array?t[r].length:1;if(n=m(l,i),0===n){var s=e[r],o=t[r];s.constructor!==Array&&(s=[s],o=[o]),s=s.filter(function(e){return!g(e)}),o=o.filter(function(e){return!g(e)}),n=m(s.length,o.length)}if(0===n){s.sort(k),o.sort(k);for(var a=0;s.length>a&&0===n;++a)n=k(s[a],o[a])}if(0!==n)break}return n},w=function(e){var t=-1,n={next:function(){return++t,n.current()},current:function(){return"_:"+e+t},inNamespace:function(t){return 0===t.indexOf("_:"+e)}};return n},S=function(e,t,n){if(null===e);else if(e.constructor===Array)for(var r in e)S(e[r],t,n);else if(e.constructor===Object){"@id"in e?e["@id"].constructor==Array?S(e["@id"],t,n):f(e)&&(t[e["@id"]]=e):y(e)&&n.push(e);for(var l in e)S(e[l],t,n)}},C=function(e,t,n,r){var l=null;if(null===n);else if(n.constructor===Array)for(var i in n)C(e,t,n[i],r);else if(n.constructor===Object)if("@literal"in n||"@type"===t)l=s(n);else if(n["@id"].constructor===Array){if(null!==e)throw{message:"Embedded graph literals cannot be flattened."};for(var o in n["@id"])C(e,t,n["@id"][o],r)}else{var a;n["@id"]in r?a=r[n["@id"]]:(a={"@id":n["@id"]},r[n["@id"]]=a),l={"@id":a["@id"]};for(var u in n){var c=n[u];null!==c&&"@id"!==u&&(u in a?a[u].constructor!==Array&&(a[u]=[a[u]]):a[u]=[],C(a[u],u,c,r),1===a[u].length&&(a[u]=a[u][0]))}}else l=n;if(null!==l&&null!==e)if(e.constructor===Array){var p=!1;l.constructor===Object&&"@id"in l&&(p=e.filter(function(e){return e.constructor===Object&&"@id"in e&&e["@id"]===l["@id"]}).length>0),p||e.push(l)}else e[t]=l};d.prototype.nameBlankNodes=function(e){var t=this.ng.tmp=w("tmp"),n={},r=[];S(e,n,r);for(var l in r){var i=r[l];if(!("@id"in i)){for(;t.next()in n;);i["@id"]=t.current(),n[t.current()]=i}}},d.prototype.renameBlankNode=function(e,t){var n=e["@id"];e["@id"]=t;var r=this.subjects;r[t]=r[n],delete r[n],this.edges.refs[t]=this.edges.refs[n],this.edges.props[t]=this.edges.props[n],delete this.edges.refs[n],delete this.edges.props[n];var l=this.edges.refs[t].all;for(var i in l){var s=l[i].s;s===n&&(s=t);var o=r[s],a=this.edges.props[s].all;for(var u in a)if(a[u].s===n){a[u].s=t;var c=a[u].p,p=o[c].constructor===Object?[o[c]]:o[c].constructor===Array?o[c]:[];for(var h in p)p[h].constructor===Object&&"@id"in p[h]&&p[h]["@id"]===n&&(p[h]["@id"]=t)}}var a=this.edges.props[t].all;for(var i in a){var s=a[i].s;l=this.edges.refs[s].all;for(var f in l)l[f].s===n&&(l[f].s=t)}},d.prototype.canonicalizeBlankNodes=function(e){this.renamed={},this.mappings={},this.serializations={};var t=this.edges={refs:{},props:{}},n=this.subjects={},r=[];for(var l in e){var i=e[l]["@id"];n[i]=e[l],t.refs[i]={all:[],bnodes:[]},t.props[i]={all:[],bnodes:[]},v(i)&&r.push(e[l])}this.collectEdges();var s=this.ng.c14n=w("c14n"),o=this.ng.tmp;for(var l in r){var a=r[l],i=a["@id"];if(s.inNamespace(i)){for(;o.next()in n;);this.renameBlankNode(a,o.current()),i=a["@id"]}this.serializations[i]={props:null,refs:null}}for(var u=!0,c=this;r.length>0;){u&&(u=!1,r.sort(function(e,t){return c.deepCompareBlankNodes(e,t)}));var a=r.shift(),i=a["@id"],p=["props","refs"];for(var h in p){var f=p[h];if(null===this.serializations[i][f]){var d={};d[i]="s1"}else d=this.serializations[i][f].m;var g=Object.keys(d);g.sort(function(e,t){return m(d[e],d[t])});var y=[];for(var l in g){var b=g[l];!s.inNamespace(i)&&b in n&&(this.renameBlankNode(n[b],s.next()),y.push(b))}var x=r;r=[];for(var l in x){var S=x[l],C=S["@id"];if(!s.inNamespace(C)){for(var E in y)this.markSerializationDirty(C,y[E],f)&&(u=!0);r.push(S)}}}}for(var F in t.props)if(t.props[F].bnodes.length>0){var a=n[F];for(var T in a)0!==T.indexOf("@")&&a[T].constructor===Array&&a[T].sort(k)}},MappingBuilder=function(){this.count=1,this.processed={},this.mapping={},this.adj={},this.keyStack=[{keys:["s1"],idx:0}],this.done={},this.s=""},MappingBuilder.prototype.copy=function(){var e=new MappingBuilder;return e.count=this.count,e.processed=s(this.processed),e.mapping=s(this.mapping),e.adj=s(this.adj),e.keyStack=s(this.keyStack),e.done=s(this.done),e.s=this.s,e},MappingBuilder.prototype.mapNode=function(e){return e in this.mapping||(this.mapping[e]=0===e.indexOf("_:c14n")?"c"+e.substr(6):"s"+this.count++),this.mapping[e]};var E=function(e){var t="",n=!0;for(var r in e)if("@id"!==r){n?n=!1:t+="|",t+="<"+r+">";var l=e[r].constructor===Array?e[r]:[e[r]];for(var i in l){var s=l[i];s.constructor===Object?"@id"in s?t+=v(s["@id"])?"_:":"<"+s["@id"]+">":(t+='"'+s["@literal"]+'"',"@type"in s?t+="^^<"+s["@type"]+">":"@language"in s&&(t+="@"+s["@language"])):t+='"'+s+'"'}}return t};MappingBuilder.prototype.serialize=function(e,t){if(this.keyStack.length>0)for(var n=this.keyStack.pop();n.idx<n.keys.length;++n.idx){var r=n.keys[n.idx];if(!(r in this.adj)){this.keyStack.push(n);break}if(r in this.done)this.s+="_"+r;else{this.done[r]=!0;var l=r,i=this.adj[r],s=i.i;if(s in e){var o=e[s];l+="["+E(o)+"]";var a=!0;l+="[";var u=t.refs[s].all;for(var c in u)a?a=!1:l+="|",l+="<"+u[c].p+">",l+=v(u[c].s)?"_:":"<"+u[c].s+">";l+="]"}l+=i.k.join(""),this.s+=l,this.keyStack.push({keys:i.k,idx:0}),this.serialize(e,t)}}},d.prototype.markSerializationDirty=function(e,t,n){var r=!1,l=this.serializations[e];return null!==l[n]&&t in l[n].m&&(l[n]=null,r=!0),r};var F=function(e){e.unshift.apply(e,e.splice(1,e.length))},T=function(e,t){var n=0;return n=e.length==t.length?m(e,t):e.length>t.length?m(e.substr(0,t.length),t):m(e,t.substr(0,e.length))};d.prototype.serializeCombos=function(e,t,n,r,l,i,o){if(o.length>0){i=s(i),i[r.mapNode(o[0].s)]=o[0].s;var a=r.copy();o=o.slice(1);for(var u=Math.max(1,o.length),c=0;u>c;++c){var p=0===c?r:a.copy();this.serializeCombos(e,t,n,p,l,i,o),F(o)}}else{var h=Object.keys(i).sort();if(r.adj[n]={i:t,k:h,m:i},r.serialize(this.subjects,this.edges),null===e[l]||0>=T(r.s,e[l].s)){for(var f in h){var d=h[f];this.serializeBlankNode(e,i[d],r,l)}r.serialize(this.subjects,this.edges),(null===e[l]||0>=T(r.s,e[l].s)&&r.s.length>=e[l].s.length)&&(e[l]={s:r.s,m:r.mapping})}}},d.prototype.serializeBlankNode=function(e,t,n,r){if(!(t in n.processed)){n.processed[t]=!0;var l=n.mapNode(t),i=n.copy(),s=this.edges[r][t].bnodes,o={},a=[];for(var u in s)s[u].s in n.mapping?o[n.mapping[s[u].s]]=s[u].s:a.push(s[u]);for(var c=Math.max(1,a.length),u=0;c>u;++u){var p=0===u?n:i.copy();this.serializeCombos(e,t,l,p,r,o,a)}}},d.prototype.deepCompareBlankNodes=function(e,t){var n=0,r=e["@id"],l=t["@id"];if(r===l)n=0;else if(n=this.shallowCompareBlankNodes(e,t),0===n)for(var i=["props","refs"],o=0;0===n&&i.length>o;++o){var a=i[o],u=this.serializations[r],c=this.serializations[l];if(null===u[a]){var p=new MappingBuilder;"refs"===a&&(p.mapping=s(u.props.m),p.count=Object.keys(p.mapping).length+1),this.serializeBlankNode(u,r,p,a)}if(null===c[a]){var p=new MappingBuilder;"refs"===a&&(p.mapping=s(c.props.m),p.count=Object.keys(p.mapping).length+1),this.serializeBlankNode(c,l,p,a)}n=m(u[a].s,c[a].s)}return n},d.prototype.shallowCompareBlankNodes=function(e,t){var n=0,r=Object.keys(e),l=Object.keys(t);if(n=m(r.length,l.length),0===n&&(n=m(r.sort(),l.sort())),0===n&&(n=x(e,t)),0===n){var i=this.edges.refs[e["@id"]].all,s=this.edges.refs[t["@id"]].all;n=m(i.length,s.length)}if(0===n)for(var o=0;i.length>o&&0===n;++o)n=this.compareEdges(i[o],s[o]);return n},d.prototype.compareEdges=function(e,t){var n=0,r=v(e.s),l=v(t.s),i=this.ng.c14n;if(r!=l)n=r?1:-1;else if(r||(n=m(e.s,t.s)),0===n&&(n=m(e.p,t.p)),0===n&&null!==i){var s=i.inNamespace(e.s),o=i.inNamespace(t.s);s!=o?n=s?1:-1:s&&(n=m(e.s,t.s))}return n},d.prototype.collectEdges=function(){var e=this.edges.refs,t=this.edges.props;for(var n in this.subjects){var r=this.subjects[n];for(var l in r)if("@id"!==l){var i=r[l],s=i.constructor!==Array?[i]:i;for(var o in s){var a=s[o];if(a.constructor===Object&&"@id"in a&&a["@id"]in this.subjects){var u=a["@id"];e[u].all.push({s:n,p:l}),t[n].all.push({s:u,p:l})}}}}var c=this;for(var n in e)e[n].all.sort(function(e,t){return c.compareEdges(e,t)}),e[n].bnodes=e[n].all.filter(function(e){return v(e.s)});for(var n in t)t[n].all.sort(function(e,t){return c.compareEdges(e,t)}),t[n].bnodes=t[n].all.filter(function(e){return v(e.s)})};var A=function(e,t){var n=!1,r="@type";if("@type"in t&&e.constructor===Object&&r in e)for(var l=e[r].constructor===Array?e[r]:[e[r]],i=t[r].constructor===Array?t[r]:[t[r]],s=0;i.length>s&&!n;++s){r=i[s];for(var o in l)if(l[o]===r){n=!0;break}}return n},_=function(e,t){var n=!1,r="@type";if(!(r in t)){var l=Object.keys(t).filter(function(e){return 0!==e.indexOf("@")});if(0===l.length)n=!0;else if(e.constructor===Object&&"@id"in e){n=!0;for(var i in l)if(!(l[i]in e)){n=!1;break}}}return n},N=function(e,t,n,r,l,i,s,o){var a=t["@id"],u=a in r?r[a]:null,c=("@embed"in n&&n["@embed"]||!("@embed"in n)&&o.defaults.embedOn)&&(null===u||u.autoembed&&!l);if(c){if(null===u)u={},r[a]=u;else if(null!==u.parent){if(u.parent[u.key].constructor===Array){var p=u.parent[u.key];for(var h in p)if(p[h].constructor===Object&&"@id"in p[h]&&p[h]["@id"]===a){p[h]={"@id":t["@id"]};break}}else u.parent[u.key]={"@id":t["@id"]};var f=function(e){var t=Object.keys(r);for(var n in t)n=t[n],n in r&&null!==r[n].parent&&r[n].parent["@id"]===e&&(delete r[n],f(n))};f(a)}u.autoembed=l,u.parent=i,u.key=s;var d=n["@explicit"]===!0||o.defaults.explicitOn;if(d)for(g in t)"@id"===g||g in n||delete t[g];var v=Object.keys(t);for(h in v){var g=v[h];if(0!==g.indexOf("@")){if(g in n)var y=n[g],m=!1;else var y=t[g].constructor===Array?[]:{},m=!0;var b=t[g],k=b.constructor===Array?b:[b];for(var x in k)k[x].constructor===Object&&"@id"in k[x]&&k[x]["@id"]in e&&(k[x]=e[k[x]["@id"]]);t[g]=D(e,k,y,r,m,t,g,o)}}for(g in n)if(!(0===g.indexOf("@")||g in t&&null!==t[g])){var y=n[g];if(y.constructor===Array)t[g]=[];else{y.constructor===Array&&(y=y.length>0?y[0]:{});var w=y["@omitDefault"]===!0||o.defaults.omitDefaultOn;w||(t[g]="@default"in y?y["@default"]:null)}}}else t={"@id":t["@id"]};return t},D=function(e,t,n,r,l,i,s,o){var a,u=null,c=-1;n.constructor===Array?(u=[],a=n,0===a.length&&a.push({})):(a=[n],c=1);for(var p=[],d=0;a.length>d&&0!==c;++d){if(n=a[d],n.constructor!==Object)throw{message:"Invalid JSON-LD frame. Frame must be an object or an array.",frame:n};p[d]=[];for(var v=0;t.length>v&&0!==c;++v){var g=t[v];(A(g,n)||_(g,n))&&(p[d].push(g),--c)}}for(var y in p)for(var m in p[y]){n=a[y];var b=p[y][m];if(f(b)&&(b=N(e,b,n,r,l,i,s,o)),null===u)u=b;else{var k=h(b)&&b["@id"]in r;null===i&&k||u.push(b)}}return u};d.prototype.frame=function(e,n,r){var l;e=t.normalize(e);var i=null;if("@context"in n)i=s(n["@context"]),n=t.expand(n);else if(n.constructor===Array){n.length>0&&"@context"in n[0]&&(i=s(n[0]["@context"]));var o=[];for(var a in n)o.push(t.expand(n[a]));n=o}r={defaults:{embedOn:!0,explicitOn:!1,omitDefaultOn:!1}};var u={};for(var a in e)u[e[a]["@id"]]=e[a];return l=D(u,e,n,{},!1,null,null,r),null!==i&&null!==l&&(l=t.compact(i,l)),l}})();var JSONLDParser={};JSONLDParser.parser={},JSONLDParser.parser.parse=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),jsonldParser.toTriples(e,t)};var RDFLoader={};RDFLoader.RDFLoader=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":N3Parser.parser,"text/plain":N3Parser.parser,"text/n3":N3Parser.parser,"application/ld+json":JSONLDParser.parser,"application/json":JSONLDParser.parser},null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)Utils.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var n=0;this.precedences.length>n;n++)this.acceptHeaderValue=0!=n?this.acceptHeaderValue+","+this.precedences[n]:this.acceptHeaderValue+this.precedences[n]},RDFLoader.RDFLoader.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},RDFLoader.RDFLoader.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],n=0;this.precedences.length>n;n++)this.precedences[n]!=e&&t.push(this.precedences[n]);this.precedences=t},RDFLoader.RDFLoader.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},RDFLoader.RDFLoader.prototype.load=function(e,t,n){var r=this;NetworkTransport.load(e,this.acceptHeaderValue,function(l,i){if(1==l){var s=i.headers["Content-Type"]||i.headers["content-type"],o=i.data;if(null!=s){s=s.split(";")[0];for(var a in r.parsers)if(-1!=a.indexOf("/")){var u=a.split("/");if("*"===u[1]){if(-1!=s.indexOf(u[0]))return r.tryToParse(r.parsers[a],t,o,n)}else{if(-1!=s.indexOf(a))return r.tryToParse(r.parsers[a],t,o,n);if(-1!=s.indexOf(u[1]))return r.tryToParse(r.parsers[a],t,o,n)}}else if(-1!=s.indexOf(a))return r.tryToParse(r.parsers[a],e,t,n);n(!1,"Unknown media type : "+s)}else console.log("Unknown media type"),console.log(i.headers),n(!1,"Uknown media type")}else n(!1,"Network error: "+i)})},RDFLoader.RDFLoader.prototype.loadFromFile=function(e,t,n,r){try{var l=this,i=require("fs");i.readFile(n.split("file:/")[1],function(n,i){if(n)throw n;var i=i.toString("utf8");l.tryToParse(e,t,i,r)})}catch(s){r(!1,s)}},RDFLoader.RDFLoader.prototype.tryToParse=function(e,t,n,r){try{"string"==typeof n&&(n=Utils.normalizeUnicodeLiterals(n));var l=e.parse(n,t);null!=l?r(!0,l):r(!1,"parsing error")}catch(i){console.log(i.message),console.log(i.stack),r(!1,"parsing error with mime type : "+i)}};var AbstractQueryTree={};AbstractQueryTree.AbstractQueryTree=function(){},AbstractQueryTree.AbstractQueryTree.prototype.parseQueryString=function(e){return SparqlParser.parser.parse(e)},AbstractQueryTree.AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw Error("unknown executable unit: "+e.kind)},AbstractQueryTree.AbstractQueryTree.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},AbstractQueryTree.AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var n={kind:"BGP",value:e.triplesContext};return n=AbstractQueryTree.translatePathExpressionsInBGP(n,t)}if("graphunionpattern"===e.token){var r=this.build(e.value[0],t),l=this.build(e.value[1],t);return{kind:"UNION",value:[r,l]}}if("graphgraphpattern"===e.token){var i=this.build(e.value,t);return{kind:"GRAPH",value:i,graph:e.graph}}throw Error("not supported token in query:"+e.token)},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var n,r,l,i=[],s=0;e.value.length>s;s++)if(e.value[s].predicate&&"path"===e.value[s].predicate.token){n=e.value[s],r=e.value.slice(s+1);var o=AbstractQueryTree.translatePathExpression(n,t),a=null;if("BGP"!==o.kind){if("ZERO_OR_MORE_PATH"===o.kind||"ONE_OR_MORE_PATH"===o.kind){if(l=i.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:i},rvalue:o}:o,"ZERO_OR_MORE_PATH"===o.kind)if("var"===o.y.token&&0===o.y.value.indexOf("fresh:")&&"var"===o.x.token&&0===o.x.value.indexOf("fresh:"))for(var u=0;e.value.length>u;u++)e.value[u].object&&"var"===e.value[u].object.token&&e.value[u].object.value===o.x.value&&(a=Utils.clone(e.value[u]),a.object=o.y);else if("var"===o.y.token&&0===o.y.value.indexOf("fresh:"))for(var u=0;e.value.length>u;u++)e.value[u].subject&&"var"===e.value[u].subject.token&&e.value[u].subject.value===o.y.value&&(a=Utils.clone(e.value[u]),a.subject=o.x);if(r.length>0){var c=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:r},t);if(null!=a){var p=i.concat([a]).concat(r);return{kind:"UNION",value:[{kind:"JOIN",lvalue:l,rvalue:c},{kind:"BGP",value:p}]}}return{kind:"JOIN",lvalue:l,rvalue:c}}return l}return o}i=i.concat(o.value)}else i.push(e.value[s]);return e.value=i,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var n=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:n,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var n=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:n,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var r,l,i=e.subject,s=e.object,o=e.graph,a=[],u=0;e.predicate.value.length>u;u++)u!=e.predicate.value.length-1?(r={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):r=s,l={subject:i,predicate:e.predicate.value[u],object:r},null!=o&&(l.graph=Utils.clone(o)),a.push(l),u!=e.predicate.value.length-1&&(i=Utils.clone(r));var c={kind:"BGP",value:a};return AbstractQueryTree.translatePathExpressionsInBGP(c,t)}},AbstractQueryTree.AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var n=e.filters||[],r={kind:"EMPTY_PATTERN"},l=0;e.patterns.length>l;l++){var i=e.patterns[l];if("optionalgraphpattern"===i.token){var s=this.build(i.value,t);r="FILTER"===s.kind?{kind:"LEFT_JOIN",lvalue:r,rvalue:s.value,filter:s.filter}:{kind:"LEFT_JOIN",lvalue:r,rvalue:s,filter:!0}}else{var s=this.build(i,t);r="EMPTY_PATTERN"==r.kind?s:{kind:"JOIN",lvalue:r,rvalue:s}}}if(0!=n.length){if("EMPTY_PATTERN"===r.kind)return{kind:"FILTER",filter:n,value:r};if("LEFT_JOIN"===r.kind&&r.filter===!0)return{kind:"FILTER",filter:n,value:r};if("LEFT_JOIN"===r.kind)return{kind:"FILTER",filter:n,value:r};if("JOIN"===r.kind)return{kind:"FILTER",filter:n,value:r};if("UNION"===r.kind)return{kind:"FILTER",filter:n,value:r};if("GRAPH"===r.kind)return{kind:"FILTER",filter:n,value:r};if("BGP"===r.kind)return{kind:"FILTER",filter:n,value:r};throw Error("Unknow kind of algebra expression: "+r.kind)}return r},AbstractQueryTree.AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var n=[],r=0;e.filter.length>r;r++)e.filter[r].value=this._bindFilter(e.filter[r].value,t),n.push(e.filter[r]);e.filter=n}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind)e.filter=this._bindFilter(e.filter[r].value,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var n=0;e.length>n;n++){delete e[n].graph,delete e[n].variables;for(var r in e[n]){var l=e[n][r];"var"===l.token&&null!=t[l.value]&&(e[n][r]=t[l.value])}}return e},AbstractQueryTree.AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var n=e.expressionType;if("relationalexpression"==n)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==n||"conditionaland"==n)for(var r=0;e.operands.length>r;r++)e.operands[r]=this._bindFilter(e.operands[r],t);else if("additiveexpression"==n){e.summand=this._bindFilter(e.summand,t);for(var r=0;e.summands.length>r;r++)e.summands[r].expression=this._bindFilter(e.summands[r].expression,t)}else if("builtincall"==n)for(var r=0;e.args.length>r;r++)e.args[r]=this._bindFilter(e.args[r],t);else if("multiplicativeexpression"==n){e.factor=this._bindFilter(e.factor,t);for(var r=0;e.factors.length>r;r++)e.factors[r].expression=this._bindFilter(e.factors[r].expression,t)}else if("unaryexpression"==n)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==n)for(var r=0;e.factors.args>r;r++)e.args[r]=this._bindFilter(e.args[r],t);else if("atomic"==n&&"var"==e.primaryexpression&&null!=t[e.value.value]){var l=t[e.value.value];e.primaryexpression="uri"===l.token?"iri":"literal",e.value=l}}return e},AbstractQueryTree.AbstractQueryTree.prototype.replace=function(e,t,n,r){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=Utils.clone(n)),null!=e.filter){for(var l=[],i=0;e.filter.length>i;i++)e.filter[i].value=this._replaceFilter(e.filter[i].value,t,n,r),l.push(e.filter[i]);e.filter=l}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,n,r);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,n,r);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,n,r),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=Utils.clone(n)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=Utils.clone(n));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,n,r),e.value[1]=this.replace(e.value[1],t,n,r);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,n);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,n,r),e.rvalue=this.replace(e.rvalue,t,n,r);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,n,r);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.AbstractQueryTree.prototype._replaceTripleContext=function(e,t,n,r){for(var l=0;e.length>l;l++)for(var i in e[l]){var s=e[l][i];"var"===s.token&&"var"===t.token&&s.value===t.value?e[l][i]=n:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[l][i]=n:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||Utils.lexicalFormTerm(s,r)[s.token]!==Utils.lexicalFormTerm(t,r)[s.token]||(e[l][i]=n)}return e},AbstractQueryTree.AbstractQueryTree.prototype._replaceFilter=function(e,t,n,r){if(null!=e.expressionType){var l=e.expressionType;if("relationalexpression"==l)e.op1=this._replaceFilter(e.op1,t,n,r),e.op2=this._replaceFilter(e.op2,t,n,r);else if("conditionalor"==l||"conditionaland"==l)for(var i=0;e.operands.length>i;i++)e.operands[i]=this._replaceFilter(e.operands[i],t,n,r);else if("additiveexpression"==l){e.summand=this._replaceFilter(e.summand,t,n,r);for(var i=0;e.summands.length>i;i++)e.summands[i].expression=this._replaceFilter(e.summands[i].expression,t,n,r)}else if("builtincall"==l)for(var i=0;e.args.length>i;i++)e.args[i]=this._replaceFilter(e.args[i],t,n,r);else if("multiplicativeexpression"==l){e.factor=this._replaceFilter(e.factor,t,n,r);for(var i=0;e.factors.length>i;i++)e.factors[i].expression=this._replaceFilter(e.factors[i].expression,t,n,r)}else if("unaryexpression"==l)e.expression=this._replaceFilter(e.expression,t,n,r);else if("irireforfunction"==l)for(var i=0;e.factors.args>i;i++)e.args[i]=this._replaceFilter(e.args[i],t,n,r);else if("atomic"==l){var s=null;e.primaryexpression==t.token&&e.value==t.value?s=n.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(s=n.value),null!=s&&(e.primaryexpression="uri"===n.token?"iri":n.token,e.value=s)}}return e},AbstractQueryTree.AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(console.log("UNION!!"),null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(console.log("COMPARING:"+e.value[0].variables.join("/")),console.log("VS "+e.values[1].variables.join("/")),e.value[0].variables.join("/")===e.values[1].variables.join("/"))return this.treeWithUnion(e.value[0])?!0:this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"===e.kind?!1:"EMPTY_PATTERN"===e.kind?!1:!1;var t=this.treeWithUnion(e.lvalue);if(t)return!0;this.treeWithUnion(e.rvalue)}};var SparqlParser={};SparqlParser.parser=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,n){function r(e){zn>Gn||(Gn>zn&&(zn=Gn,qn=[]),qn.push(e))
}function l(){var e;return e=i(),null===e&&(e=N()),e}function i(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=s(),null!==e?(t=u(),null===t&&(t=h(),null===t&&(t=f(),null===t&&(t=d()))),null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t,n){return{token:"query",kind:"query",prologue:t,units:[n]}}(n,e[0],e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[2] Query"),e}function s(){var e,t,n,l,i,s;if(Xn++,i=Gn,s=Gn,e=o(),e=null!==e?e:"",null!==e){for(t=[],n=Dn();null!==n;)t.push(n),n=Dn();if(null!==t){for(n=[],l=a();null!==l;)n.push(l),l=a();null!==n?e=[e,t,n]:(e=null,Gn=s)}else e=null,Gn=s}else e=null,Gn=s;return null!==e&&(e=function(e,t,n){return{token:"prologue",base:t,prefixes:n}}(i,e[0],e[2])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[3] Prologue"),e}function o(){var e,n,l,i,s,o;for(Xn++,s=Gn,o=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("BASE"===t.substr(Gn,4)?(n="BASE",Gn+=4):(n=null,0===Xn&&r('"BASE"')),null===n&&("base"===t.substr(Gn,4)?(n="base",Gn+=4):(n=null,0===Xn&&r('"base"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?(i=an(),null!==i?e=[e,n,l,i]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;return null!==e&&(e=function(e,t){Yn(t);var n={};return n.token="base",n.value=t,n}(s,e[3])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[4] BaseDecl"),e}function a(){var e,n,l,i,s,o,a,u;for(Xn++,a=Gn,u=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("PREFIX"===t.substr(Gn,6)?(n="PREFIX",Gn+=6):(n=null,0===Xn&&r('"PREFIX"')),null===n&&("prefix"===t.substr(Gn,6)?(n="prefix",Gn+=6):(n=null,0===Xn&&r('"prefix"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=un(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=an(),null!==o?e=[e,n,l,i,s,o]:(e=null,Gn=u)):(e=null,Gn=u)}else e=null,Gn=u;else e=null,Gn=u}else e=null,Gn=u;else e=null,Gn=u;return null!==e&&(e=function(e,t,n){Vn(t,n);var r={};return r.token="prefix",r.prefix=t,r.local=n,r}(a,e[3],e[5])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[5] PrefixDecl"),e}function u(){var e,t,n,l,i,s,o,a,u,c,h;if(Xn++,c=Gn,h=Gn,e=p(),null!==e){for(t=[],n=Dn();null!==n;)t.push(n),n=Dn();if(null!==t){for(n=[],l=v();null!==l;)n.push(l),l=v();if(null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=m(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(o=b(),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(u=A(),null!==u?e=[e,t,n,l,i,s,o,a,u]:(e=null,Gn=h)):(e=null,Gn=h)}else e=null,Gn=h;else e=null,Gn=h}else e=null,Gn=h;else e=null,Gn=h}else e=null,Gn=h}else e=null,Gn=h}else e=null,Gn=h;return null!==e&&(e=function(e,t,n,r,l){for(var i={named:[],implicit:[]},s=0;n.length>s;s++){var o=n[s];"default"===o.kind?i.implicit.push(o.graph):i.named.push(o.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="select",a.token="executableunit",a.dataset=i,a.projection=t.vars,a.modifier=t.modifier,a.pattern=r,null!=l&&null!=l.limit&&(a.limit=l.limit),null!=l&&null!=l.offset&&(a.offset=l.offset),null!=l&&null!=l.order&&""!=l.order&&(a.order=l.order),null!=l&&null!=l.group&&(a.group=l.group),a}(c,e[0],e[2],e[4],e[6])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[6] SelectQuery"),e}function c(){var e,t,n,l;return Xn++,l=Gn,e=p(),null!==e?(t=m(),null!==t?(n=b(),null!==n?e=[e,t,n]:(e=null,Gn=l)):(e=null,Gn=l)):(e=null,Gn=l),Xn--,0===Xn&&null===e&&r("[7] SubSelect"),e}function p(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v,g,y,m,b,k,x,w;for(Xn++,k=Gn,x=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("SELECT"===t.substr(Gn,6)?(n="SELECT",Gn+=6):(n=null,0===Xn&&r('"SELECT"')),null===n&&("select"===t.substr(Gn,6)?(n="select",Gn+=6):(n=null,0===Xn&&r('"select"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("DISTINCT"===t.substr(Gn,8)?(i="DISTINCT",Gn+=8):(i=null,0===Xn&&r('"DISTINCT"')),null===i&&("distinct"===t.substr(Gn,8)?(i="distinct",Gn+=8):(i=null,0===Xn&&r('"distinct"'))),null===i&&("REDUCED"===t.substr(Gn,7)?(i="REDUCED",Gn+=7):(i=null,0===Xn&&r('"REDUCED"')),null===i&&("reduced"===t.substr(Gn,7)?(i="reduced",Gn+=7):(i=null,0===Xn&&r('"reduced"')))),i=null!==i?i:"",null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s){for(w=Gn,a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(u=Rt(),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?a=[a,u,c]:(a=null,Gn=w)}else a=null,Gn=w;else a=null,Gn=w;if(null===a){for(w=Gn,a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(40===t.charCodeAt(Gn)?(u="(",Gn++):(u=null,0===Xn&&r('"("')),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();if(null!==c)if(p=Pt(),null!==p){for(h=[],f=Dn();null!==f;)h.push(f),f=Dn();if(null!==h)if("AS"===t.substr(Gn,2)?(f="AS",Gn+=2):(f=null,0===Xn&&r('"AS"')),null===f&&("as"===t.substr(Gn,2)?(f="as",Gn+=2):(f=null,0===Xn&&r('"as"'))),null!==f){for(d=[],v=Dn();null!==v;)d.push(v),v=Dn();if(null!==d)if(v=Rt(),null!==v){for(g=[],y=Dn();null!==y;)g.push(y),y=Dn();if(null!==g)if(41===t.charCodeAt(Gn)?(y=")",Gn++):(y=null,0===Xn&&r('")"')),null!==y){for(m=[],b=Dn();null!==b;)m.push(b),b=Dn();null!==m?a=[a,u,c,p,h,f,d,v,g,y,m]:(a=null,Gn=w)}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}if(null!==a)for(o=[];null!==a;){for(o.push(a),w=Gn,a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(u=Rt(),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?a=[a,u,c]:(a=null,Gn=w)}else a=null,Gn=w;else a=null,Gn=w;if(null===a){for(w=Gn,a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(40===t.charCodeAt(Gn)?(u="(",Gn++):(u=null,0===Xn&&r('"("')),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();if(null!==c)if(p=Pt(),null!==p){for(h=[],f=Dn();null!==f;)h.push(f),f=Dn();if(null!==h)if("AS"===t.substr(Gn,2)?(f="AS",Gn+=2):(f=null,0===Xn&&r('"AS"')),null===f&&("as"===t.substr(Gn,2)?(f="as",Gn+=2):(f=null,0===Xn&&r('"as"'))),null!==f){for(d=[],v=Dn();null!==v;)d.push(v),v=Dn();if(null!==d)if(v=Rt(),null!==v){for(g=[],y=Dn();null!==y;)g.push(y),y=Dn();if(null!==g)if(41===t.charCodeAt(Gn)?(y=")",Gn++):(y=null,0===Xn&&r('")"')),null!==y){for(m=[],b=Dn();null!==b;)m.push(b),b=Dn();null!==m?a=[a,u,c,p,h,f,d,v,g,y,m]:(a=null,Gn=w)}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}else a=null,Gn=w;else a=null,Gn=w}}else o=null;if(null===o){for(w=Gn,o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(42===t.charCodeAt(Gn)?(a="*",Gn++):(a=null,0===Xn&&r('"*"')),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();null!==u?o=[o,a,u]:(o=null,Gn=w)}else o=null,Gn=w;else o=null,Gn=w}null!==o?e=[e,n,l,i,s,o]:(e=null,Gn=x)}else e=null,Gn=x}else e=null,Gn=x;else e=null,Gn=x}else e=null,Gn=x;else e=null,Gn=x;return null!==e&&(e=function(e,t,n){var r=[];if(3===n.length&&"*"===n[1])return{vars:[{token:"variable",kind:"*"}],modifier:Kn(t)};for(var l=0;n.length>l;l++){var i=n[l];3===i.length?r.push({token:"variable",kind:"var",value:i[1]}):r.push({token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:Kn(t)}}(k,e[3],e[5])),null===e&&(Gn=k),Xn--,0===Xn&&null===e&&r("[8] SelectClause"),e}function h(){var e,n,l,i,s,o,a,u,c,p,h,f;for(Xn++,h=Gn,f=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("CONSTRUCT"===t.substr(Gn,9)?(n="CONSTRUCT",Gn+=9):(n=null,0===Xn&&r('"CONSTRUCT"')),null===n&&("construct"===t.substr(Gn,9)?(n="construct",Gn+=9):(n=null,0===Xn&&r('"construct"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=ct(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s){for(o=[],a=v();null!==a;)o.push(a),a=v();if(null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(u=m(),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?(p=b(),null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=f)):(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f}else e=null,Gn=f}else e=null,Gn=f}else e=null,Gn=f;else e=null,Gn=f}else e=null,Gn=f;else e=null,Gn=f;return null!==e&&(e=function(e,t,n,r,l){for(var i={named:[],implicit:[]},s=0;n.length>s;s++){var o=n[s];"default"===o.kind?i.implicit.push(o.graph):i.named.push(o.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=i,a.template=t,a.pattern=r,null!=l&&null!=l.limit&&(a.limit=l.limit),null!=l&&null!=l.offset&&(a.offset=l.offset),null!=l&&null!=l.order&&""!=l.order&&(a.order=l.order),a}(h,e[3],e[5],e[7],e[9])),null===e&&(Gn=h),Xn--,0===Xn&&null===e&&r("[9] ConstructQuery"),e}function f(){var e,n,l,i,s,o;if(Xn++,o=Gn,"DESCRIBE"===t.substr(Gn,8)?(e="DESCRIBE",Gn+=8):(e=null,0===Xn&&r('"DESCRIBE"')),null!==e){if(l=Lt(),null!==l)for(n=[];null!==l;)n.push(l),l=Lt();else n=null;if(null===n&&(42===t.charCodeAt(Gn)?(n="*",Gn++):(n=null,0===Xn&&r('"*"'))),null!==n){for(l=[],i=v();null!==i;)l.push(i),i=v();null!==l?(i=m(),i=null!==i?i:"",null!==i?(s=b(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=o)):(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o}else e=null,Gn=o;return Xn--,0===Xn&&null===e&&r("[10] DescribeQuery"),e}function d(){var e,n,l,i,s,o,a,u;for(Xn++,a=Gn,u=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("ASK"===t.substr(Gn,3)?(n="ASK",Gn+=3):(n=null,0===Xn&&r('"ASK"')),null===n&&("ask"===t.substr(Gn,3)?(n="ask",Gn+=3):(n=null,0===Xn&&r('"ask"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l){for(i=[],s=v();null!==s;)i.push(s),s=v();if(null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=m(),null!==o?e=[e,n,l,i,s,o]:(e=null,Gn=u)):(e=null,Gn=u)}else e=null,Gn=u}else e=null,Gn=u}else e=null,Gn=u;else e=null,Gn=u;return null!==e&&(e=function(e,t,n){for(var r={named:[],implicit:[]},l=0;t.length>l;l++){var i=t[l];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="ask",s.token="executableunit",s.dataset=r,s.pattern=n,s}(a,e[3],e[5])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[11] AskQuery"),e}function v(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"FROM"===t.substr(Gn,4)?(e="FROM",Gn+=4):(e=null,0===Xn&&r('"FROM"')),null===e&&("from"===t.substr(Gn,4)?(e="from",Gn+=4):(e=null,0===Xn&&r('"from"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=g(),null===l&&(l=y()),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?e=[e,n,l,i]:(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[12] DatasetClause"),e}function g(){var e,t,n,l;for(Xn++,n=Gn,l=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();return null!==e?(t=ln(),null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t){return{graph:t,kind:"default",token:"graphClause"}}(n,e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[13] DefaultGraphClause"),e}function y(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,"NAMED"===t.substr(Gn,5)?(e="NAMED",Gn+=5):(e=null,0===Xn&&r('"NAMED"')),null===e&&("named"===t.substr(Gn,5)?(e="named",Gn+=5):(e=null,0===Xn&&r('"named"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=ln(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return{graph:t,kind:"named",token:"graphCluase"}}(i,e[2])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[14] NamedGraphClause"),e}function m(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"WHERE"===t.substr(Gn,5)?(e="WHERE",Gn+=5):(e=null,0===Xn&&r('"WHERE"')),null===e&&("where"===t.substr(Gn,5)?(e="where",Gn+=5):(e=null,0===Xn&&r('"where"'))),e=null!==e?e:"",null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=V(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?e=[e,n,l,i]:(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[16] WhereClause"),e}function b(){var e,t,n,l,i,s;return Xn++,i=Gn,s=Gn,e=k(),e=null!==e?e:"",null!==e?(t=w(),t=null!==t?t:"",null!==t?(n=S(),n=null!==n?n:"",null!==n?(l=E(),l=null!==l?l:"",null!==l?e=[e,t,n,l]:(e=null,Gn=s)):(e=null,Gn=s)):(e=null,Gn=s)):(e=null,Gn=s),null!==e&&(e=function(e,t,n,r){var l={};return null!=r&&(null!=r.limit&&(l.limit=r.limit),null!=r.offset&&(l.offset=r.offset)),null!=t&&(l.group=t),l.order=n,l}(i,e[0],e[2],e[3])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[17] SolutionModifier"),e}function k(){var e,n,l,i,s,o,a,u;if(Xn++,a=Gn,u=Gn,"GROUP"===t.substr(Gn,5)?(e="GROUP",Gn+=5):(e=null,0===Xn&&r('"GROUP"')),null===e&&("group"===t.substr(Gn,5)?(e="group",Gn+=5):(e=null,0===Xn&&r('"group"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("BY"===t.substr(Gn,2)?(l="BY",Gn+=2):(l=null,0===Xn&&r('"BY"')),null===l&&("by"===t.substr(Gn,2)?(l="by",Gn+=2):(l=null,0===Xn&&r('"by"'))),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i){if(o=x(),null!==o)for(s=[];null!==o;)s.push(o),o=x();else s=null;null!==s?e=[e,n,l,i,s]:(e=null,Gn=u)}else e=null,Gn=u}else e=null,Gn=u;else e=null,Gn=u}else e=null,Gn=u;return null!==e&&(e=function(e,t){return t}(a,e[4])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[18] GroupClause"),e}function x(){var e,n,l,i,s,o,a,u,c,p,h,f,d;for(Xn++,h=Gn,f=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(n=zt(),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?e=[e,n,l]:(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f;if(null!==e&&(e=function(e,t){return t}(h,e[1])),null===e&&(Gn=h),null===e){for(h=Gn,f=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(n=ot(),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?e=[e,n,l]:(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f;if(null!==e&&(e=function(e,t){return t}(h,e[1])),null===e&&(Gn=h),null===e){for(h=Gn,f=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(40===t.charCodeAt(Gn)?(n="(",Gn++):(n=null,0===Xn&&r('"("')),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=Pt(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s){if(d=Gn,"AS"===t.substr(Gn,2)?(o="AS",Gn+=2):(o=null,0===Xn&&r('"AS"')),null===o&&("as"===t.substr(Gn,2)?(o="as",Gn+=2):(o=null,0===Xn&&r('"as"'))),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(u=Rt(),null!==u?o=[o,a,u]:(o=null,Gn=d)):(o=null,Gn=d)}else o=null,Gn=d;if(o=null!==o?o:"",null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(41===t.charCodeAt(Gn)?(u=")",Gn++):(u=null,0===Xn&&r('")"')),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?e=[e,n,l,i,s,o,a,u,c]:(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f}else e=null,Gn=f}else e=null,Gn=f}else e=null,Gn=f;else e=null,Gn=f}else e=null,Gn=f;else e=null,Gn=f;if(null!==e&&(e=function(e,t,n){return 0!=n.length?{token:"aliased_expression",expression:t,alias:n[2]}:t}(h,e[3],e[5])),null===e&&(Gn=h),null===e){for(h=Gn,f=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(n=Rt(),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?e=[e,n,l]:(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f;null!==e&&(e=function(e,t){return t}(h,e[1])),null===e&&(Gn=h)}}}return Xn--,0===Xn&&null===e&&r("[19] GroupCondition"),e}function w(){var e,n,l,i;if(Xn++,i=Gn,"HAVING"===t.substr(Gn,6)?(e="HAVING",Gn+=6):(e=null,0===Xn&&r('"HAVING"')),null!==e){if(l=st(),null!==l)for(n=[];null!==l;)n.push(l),l=st();else n=null;null!==n?e=[e,n]:(e=null,Gn=i)}else e=null,Gn=i;return Xn--,0===Xn&&null===e&&r("[20] HavingClause"),e}function S(){var e,n,l,i,s,o,a,u,c;if(Xn++,u=Gn,c=Gn,"ORDER"===t.substr(Gn,5)?(e="ORDER",Gn+=5):(e=null,0===Xn&&r('"ORDER"')),null===e&&("order"===t.substr(Gn,5)?(e="order",Gn+=5):(e=null,0===Xn&&r('"order"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("BY"===t.substr(Gn,2)?(l="BY",Gn+=2):(l=null,0===Xn&&r('"BY"')),null===l&&("by"===t.substr(Gn,2)?(l="by",Gn+=2):(l=null,0===Xn&&r('"by"'))),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i){if(o=C(),null!==o)for(s=[];null!==o;)s.push(o),o=C();else s=null;if(null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?e=[e,n,l,i,s,o]:(e=null,Gn=c)}else e=null,Gn=c}else e=null,Gn=c}else e=null,Gn=c;else e=null,Gn=c}else e=null,Gn=c;return null!==e&&(e=function(e,t){return t}(u,e[4])),null===e&&(Gn=u),Xn--,0===Xn&&null===e&&r("[22] OrderClause"),e}function C(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"ASC"===t.substr(Gn,3)?(e="ASC",Gn+=3):(e=null,0===Xn&&r('"ASC"')),null===e&&("asc"===t.substr(Gn,3)?(e="asc",Gn+=3):(e=null,0===Xn&&r('"asc"')),null===e&&("DESC"===t.substr(Gn,4)?(e="DESC",Gn+=4):(e=null,0===Xn&&r('"DESC"')),null===e&&("desc"===t.substr(Gn,4)?(e="desc",Gn+=4):(e=null,0===Xn&&r('"desc"'))))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=Xt(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?e=[e,n,l,i]:(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;if(null!==e&&(e=function(e,t,n){return{direction:t.toUpperCase(),expression:n}}(o,e[0],e[2])),null===e&&(Gn=o),null===e){if(o=Gn,a=Gn,e=st(),null===e&&(e=Rt()),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?e=[e,n]:(e=null,Gn=a)}else e=null,Gn=a;null!==e&&(e=function(e,t){if("var"===t.token)var t={token:"expression",expressionType:"atomic",primaryexpression:"var",value:t};return{direction:"ASC",expression:t}}(o,e[0])),null===e&&(Gn=o)}return Xn--,0===Xn&&null===e&&r("[23] OrderCondition"),e}function E(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=F(),null!==e?(t=T(),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null===e&&(l=Gn,e=T(),null!==e?(t=F(),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l)),null!==e&&(e=function(e,t){for(var n={},r=0;t.length>r;r++){var l=t[r];null!=l.limit?n.limit=l.limit:null!=l.offset&&(n.offset=l.offset)}return n}(n,e)),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[24] LimitOffsetClauses"),e}function F(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"LIMIT"===t.substr(Gn,5)?(e="LIMIT",Gn+=5):(e=null,0===Xn&&r('"LIMIT"')),null===e&&("limit"===t.substr(Gn,5)?(e="limit",Gn+=5):(e=null,0===Xn&&r('"limit"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=vn(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?e=[e,n,l,i]:(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return{limit:parseInt(t.value)}}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[25] LimitClause"),e}function T(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"OFFSET"===t.substr(Gn,6)?(e="OFFSET",Gn+=6):(e=null,0===Xn&&r('"OFFSET"')),null===e&&("offset"===t.substr(Gn,6)?(e="offset",Gn+=6):(e=null,0===Xn&&r('"offset"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=vn(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?e=[e,n,l,i]:(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return{offset:parseInt(t.value)}}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[26] OffsetClause"),e}function A(){var e,n,l,i,s,o,a,u,c;if(Xn++,u=Gn,"BINDINGS"===t.substr(Gn,8)?(e="BINDINGS",Gn+=8):(e=null,0===Xn&&r('"BINDINGS"')),null!==e){for(n=[],l=Rt();null!==l;)n.push(l),l=Rt();if(null!==n)if(123===t.charCodeAt(Gn)?(l="{",Gn++):(l=null,0===Xn&&r('"{"')),null!==l){if(i=[],c=Gn,40===t.charCodeAt(Gn)?(s="(",Gn++):(s=null,0===Xn&&r('"("')),null!==s){if(a=_(),null!==a)for(o=[];null!==a;)o.push(a),a=_();else o=null;null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?s=[s,o,a]:(s=null,Gn=c)):(s=null,Gn=c)}else s=null,Gn=c;for(null===s&&(s=Nn());null!==s;){if(i.push(s),c=Gn,40===t.charCodeAt(Gn)?(s="(",Gn++):(s=null,0===Xn&&r('"("')),null!==s){if(a=_(),null!==a)for(o=[];null!==a;)o.push(a),a=_();else o=null;null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?s=[s,o,a]:(s=null,Gn=c)):(s=null,Gn=c)}else s=null,Gn=c;null===s&&(s=Nn())}null!==i?(125===t.charCodeAt(Gn)?(s="}",Gn++):(s=null,0===Xn&&r('"}"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=u)):(e=null,Gn=u)}else e=null,Gn=u;else e=null,Gn=u}else e=null,Gn=u;return e=null!==e?e:"",Xn--,0===Xn&&null===e&&r("[27] BindingsClause"),e}function _(){var e;return Xn++,e=ln(),null===e&&(e=Yt(),null===e&&(e=Kt(),null===e&&(e=nn(),null===e&&("UNDEF"===t.substr(Gn,5)?(e="UNDEF",Gn+=5):(e=null,0===Xn&&r('"UNDEF"')))))),Xn--,0===Xn&&null===e&&r("[28] BindingValue"),e}function N(){var e,n,l,i,o,a,u,c,p,h;if(Xn++,c=Gn,p=Gn,e=s(),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=D(),null!==l){for(h=Gn,i=[],o=Dn();null!==o;)i.push(o),o=Dn();if(null!==i)if(59===t.charCodeAt(Gn)?(o=";",Gn++):(o=null,0===Xn&&r('";"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(u=N(),u=null!==u?u:"",null!==u?i=[i,o,a,u]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h;i=null!==i?i:"",null!==i?e=[e,n,l,i]:(e=null,Gn=p)}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;return null!==e&&(e=function(e,t,n,r){var l={};l.token="query",l.kind="update",l.prologue=t;var i=[n];return null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),l.units=i,l}(c,e[0],e[2],e[3])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[30] Update"),e}function D(){var e;return Xn++,e=I(),null===e&&(e=Q(),null===e&&(e=L(),null===e&&(e=R(),null===e&&(e=O(),null===e&&(e=P(),null===e&&(e=j(),null===e&&(e=M()))))))),Xn--,0===Xn&&null===e&&r("[31] Update1"),e}function I(){var e,n,l,i,s,o,a,u,c,p;if(Xn++,u=Gn,c=Gn,"LOAD"===t.substr(Gn,4)?(e="LOAD",Gn+=4):(e=null,0===Xn&&r('"LOAD"')),null===e&&("load"===t.substr(Gn,4)?(e="load",Gn+=4):(e=null,0===Xn&&r('"load"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=ln(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i){if(p=Gn,"INTO"===t.substr(Gn,4)?(s="INTO",Gn+=4):(s=null,0===Xn&&r('"INTO"')),null===s&&("into"===t.substr(Gn,4)?(s="into",Gn+=4):(s=null,0===Xn&&r('"into"'))),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=G(),null!==a?s=[s,o,a]:(s=null,Gn=p)):(s=null,Gn=p)}else s=null,Gn=p;s=null!==s?s:"",null!==s?e=[e,n,l,i,s]:(e=null,Gn=c)}else e=null,Gn=c}else e=null,Gn=c;else e=null,Gn=c}else e=null,Gn=c;return null!==e&&(e=function(e,t,n){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=t,r.destinyGraph=n[2],r}(u,e[2],e[4])),null===e&&(Gn=u),Xn--,0===Xn&&null===e&&r("[32] Load"),e}function Q(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"CLEAR"===t.substr(Gn,5)?(e="CLEAR",Gn+=5):(e=null,0===Xn&&r('"CLEAR"')),null===e&&("clear"===t.substr(Gn,5)?(e="clear",Gn+=5):(e=null,0===Xn&&r('"clear"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("SILENT"===t.substr(Gn,6)?(l="SILENT",Gn+=6):(l=null,0===Xn&&r('"SILENT"')),null===l&&("silent"===t.substr(Gn,6)?(l="silent",Gn+=6):(l=null,0===Xn&&r('"silent"'))),l=null!==l?l:"",null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=X(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};return n.kind="clear",n.token="executableunit",n.destinyGraph=t,n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[33] Clear"),e}function L(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"DROP"===t.substr(Gn,4)?(e="DROP",Gn+=4):(e=null,0===Xn&&r('"DROP"')),null===e&&("drop"===t.substr(Gn,4)?(e="drop",Gn+=4):(e=null,0===Xn&&r('"drop"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("SILENT"===t.substr(Gn,6)?(l="SILENT",Gn+=6):(l=null,0===Xn&&r('"SILENT"')),null===l&&("silent"===t.substr(Gn,6)?(l="silent",Gn+=6):(l=null,0===Xn&&r('"silent"'))),l=null!==l?l:"",null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=X(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};return n.kind="drop",n.token="executableunit",n.destinyGraph=t,n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[34] Drop"),e}function R(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"CREATE"===t.substr(Gn,6)?(e="CREATE",Gn+=6):(e=null,0===Xn&&r('"CREATE"')),null===e&&("create"===t.substr(Gn,6)?(e="create",Gn+=6):(e=null,0===Xn&&r('"create"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("SILENT"===t.substr(Gn,6)?(l="SILENT",Gn+=6):(l=null,0===Xn&&r('"SILENT"')),null===l&&("silent"===t.substr(Gn,6)?(l="silent",Gn+=6):(l=null,0===Xn&&r('"silent"'))),l=null!==l?l:"",null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=G(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};return n.kind="create",n.token="executableunit",n.destinyGraph=t,n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[35] Create"),e}function O(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"INSERT"===t.substr(Gn,6)?(e="INSERT",Gn+=6):(e=null,0===Xn&&r('"INSERT"')),null===e&&("insert"===t.substr(Gn,6)?(e="insert",Gn+=6):(e=null,0===Xn&&r('"insert"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("DATA"===t.substr(Gn,4)?(l="DATA",Gn+=4):(l=null,0===Xn&&r('"DATA"')),null===l&&("data"===t.substr(Gn,4)?(l="data",Gn+=4):(l=null,0===Xn&&r('"data"'))),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=q(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};return n.kind="insertdata",n.token="executableunit",n.quads=t,n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[36] InsertData"),e}function P(){var e,n,l,i,s,o;if(Xn++,s=Gn,o=Gn,"DELETE"===t.substr(Gn,6)?(e="DELETE",Gn+=6):(e=null,0===Xn&&r('"DELETE"')),null===e&&("delete"===t.substr(Gn,6)?(e="delete",Gn+=6):(e=null,0===Xn&&r('"delete"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?("DATA"===t.substr(Gn,4)?(l="DATA",Gn+=4):(l=null,0===Xn&&r('"DATA"')),null===l&&("data"===t.substr(Gn,4)?(l="data",Gn+=4):(l=null,0===Xn&&r('"data"'))),null!==l?(i=q(),null!==i?e=[e,n,l,i]:(e=null,Gn=o)):(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;return null!==e&&(e=function(e,t){var n={};return n.kind="deletedata",n.token="executableunit",n.quads=t,n}(s,e[3])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[37] DeleteData"),e}function j(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"DELETE"===t.substr(Gn,6)?(e="DELETE",Gn+=6):(e=null,0===Xn&&r('"DELETE"')),null===e&&("delete"===t.substr(Gn,6)?(e="delete",Gn+=6):(e=null,0===Xn&&r('"delete"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("WHERE"===t.substr(Gn,5)?(l="WHERE",Gn+=5):(l=null,0===Xn&&r('"WHERE"')),null===l&&("where"===t.substr(Gn,5)?(l="where",Gn+=5):(l=null,0===Xn&&r('"where"'))),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=V(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};n.kind="modify",n.pattern=t,n["with"]=null,n.using=null;var r=[],l=t.patterns[0];l=null==l.triplesContext&&null!=l.patterns?l.patterns[0].triplesContext:l.triplesContext;for(var i=0;l.length>i;i++){var s={},o=l[i];s.subject=o.subject,s.predicate=o.predicate,s.object=o.object,s.graph=o.graph,r.push(s)}return n["delete"]=r,n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[38] DeleteWhere"),e}function M(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v;if(Xn++,f=Gn,d=Gn,v=Gn,"WITH"===t.substr(Gn,4)?(e="WITH",Gn+=4):(e=null,0===Xn&&r('"WITH"')),null===e&&("with"===t.substr(Gn,4)?(e="with",Gn+=4):(e=null,0===Xn&&r('"with"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=ln(),null!==l?e=[e,n,l]:(e=null,Gn=v)):(e=null,Gn=v)}else e=null,Gn=v;if(e=null!==e?e:"",null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n){if(v=Gn,l=B(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=H(),s=null!==s?s:"",null!==s?l=[l,i,s]:(l=null,Gn=v)):(l=null,Gn=v)}else l=null,Gn=v;if(null===l&&(l=H()),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i){for(s=[],o=U();null!==o;)s.push(o),o=U();if(null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if("WHERE"===t.substr(Gn,5)?(a="WHERE",Gn+=5):(a=null,0===Xn&&r('"WHERE"')),null===a&&("where"===t.substr(Gn,5)?(a="where",Gn+=5):(a=null,0===Xn&&r('"where"'))),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(c=V(),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d}else e=null,Gn=d}else e=null,Gn=d}else e=null,Gn=d}else e=null,Gn=d;return null!==e&&(e=function(e,t,n,r,l){var i={};return i.kind="modify",i["with"]=""!=t?t[2]:null,3===n.length&&""===n[2]?(i["delete"]=n[0],i.insert=null):3===n.length&&null!=n[0].length&&null!=n[1].length&&null!=n[2].length?(i["delete"]=n[0],i.insert=n[2]):(i.insert=n,i["delete"]=null),""!=r&&(i.using=r),i.pattern=l,i}(f,e[0],e[2],e[4],e[8])),null===e&&(Gn=f),Xn--,0===Xn&&null===e&&r("[39] Modify"),e}function B(){var e,n,l,i;return Xn++,l=Gn,i=Gn,"DELETE"===t.substr(Gn,6)?(e="DELETE",Gn+=6):(e=null,0===Xn&&r('"DELETE"')),null===e&&("delete"===t.substr(Gn,6)?(e="delete",Gn+=6):(e=null,0===Xn&&r('"delete"'))),null!==e?(n=z(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[40] DeleteClause"),e}function H(){var e,n,l,i;return Xn++,l=Gn,i=Gn,"INSERT"===t.substr(Gn,6)?(e="INSERT",Gn+=6):(e=null,0===Xn&&r('"INSERT"')),null===e&&("insert"===t.substr(Gn,6)?(e="insert",Gn+=6):(e=null,0===Xn&&r('"insert"'))),null!==e?(n=z(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[41] InsertClause"),e}function U(){var e,n,l,i,s,o,a,u,c;for(Xn++,a=Gn,u=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("USING"===t.substr(Gn,5)?(n="USING",Gn+=5):(n=null,0===Xn&&r('"USING"')),null===n&&("using"===t.substr(Gn,5)?(n="using",Gn+=5):(n=null,0===Xn&&r('"using"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l){if(i=ln(),null===i)if(c=Gn,"NAMED"===t.substr(Gn,5)?(i="NAMED",Gn+=5):(i=null,0===Xn&&r('"NAMED"')),null===i&&("named"===t.substr(Gn,5)?(i="named",Gn+=5):(i=null,0===Xn&&r('"named"'))),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=ln(),null!==o?i=[i,s,o]:(i=null,Gn=c)):(i=null,Gn=c)}else i=null,Gn=c;null!==i?e=[e,n,l,i]:(e=null,Gn=u)}else e=null,Gn=u}else e=null,Gn=u;else e=null,Gn=u;return null!==e&&(e=function(e,t){return null!=t.length?{kind:"named",uri:t[2]}:{kind:"default",uri:t}}(a,e[3])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[42] UsingClause"),e}function G(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,"GRAPH"===t.substr(Gn,5)?(e="GRAPH",Gn+=5):(e=null,0===Xn&&r('"GRAPH"')),null===e&&("graph"===t.substr(Gn,5)?(e="graph",Gn+=5):(e=null,0===Xn&&r('"graph"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=ln(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return t}(i,e[2])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[43] GraphRef"),e}function X(){var e,n;return Xn++,n=Gn,e=G(),null!==e&&(e=function(e,t){return t}(n,e)),null===e&&(Gn=n),null===e&&(n=Gn,"DEFAULT"===t.substr(Gn,7)?(e="DEFAULT",Gn+=7):(e=null,0===Xn&&r('"DEFAULT"')),null===e&&("default"===t.substr(Gn,7)?(e="default",Gn+=7):(e=null,0===Xn&&r('"default"'))),null!==e&&(e=function(){return"default"}(n)),null===e&&(Gn=n),null===e&&(n=Gn,"NAMED"===t.substr(Gn,5)?(e="NAMED",Gn+=5):(e=null,0===Xn&&r('"NAMED"')),null===e&&("named"===t.substr(Gn,5)?(e="named",Gn+=5):(e=null,0===Xn&&r('"named"'))),null!==e&&(e=function(){return"named"
}(n)),null===e&&(Gn=n),null===e&&(n=Gn,"ALL"===t.substr(Gn,3)?(e="ALL",Gn+=3):(e=null,0===Xn&&r('"ALL"')),null===e&&("all"===t.substr(Gn,3)?(e="all",Gn+=3):(e=null,0===Xn&&r('"all"'))),null!==e&&(e=function(){return"all"}(n)),null===e&&(Gn=n)))),Xn--,0===Xn&&null===e&&r("[44] GraphRefAll"),e}function z(){var e,n,l,i,s,o,a,u,c,p;for(Xn++,c=Gn,p=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(123===t.charCodeAt(Gn)?(n="{",Gn++):(n=null,0===Xn&&r('"{"')),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=$(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(125===t.charCodeAt(Gn)?(o="}",Gn++):(o=null,0===Xn&&r('"}"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=p)}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p;return null!==e&&(e=function(e,t){return t.quadsContext}(c,e[3])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[45] QuadPattern"),e}function q(){var e,n,l,i,s,o,a,u,c,p;for(Xn++,c=Gn,p=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(123===t.charCodeAt(Gn)?(n="{",Gn++):(n=null,0===Xn&&r('"{"')),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=$(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(125===t.charCodeAt(Gn)?(o="}",Gn++):(o=null,0===Xn&&r('"}"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=p)}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p;return null!==e&&(e=function(e,t){return t.quadsContext}(c,e[3])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[46] QuadData"),e}function $(){var e,n,l,i,s,o,a,u;if(Xn++,o=Gn,a=Gn,e=J(),e=null!==e?e:"",null!==e){for(n=[],u=Gn,l=W(),null!==l?(46===t.charCodeAt(Gn)?(i=".",Gn++):(i=null,0===Xn&&r('"."')),i=null!==i?i:"",null!==i?(s=J(),s=null!==s?s:"",null!==s?l=[l,i,s]:(l=null,Gn=u)):(l=null,Gn=u)):(l=null,Gn=u);null!==l;)n.push(l),u=Gn,l=W(),null!==l?(46===t.charCodeAt(Gn)?(i=".",Gn++):(i=null,0===Xn&&r('"."')),i=null!==i?i:"",null!==i?(s=J(),s=null!==s?s:"",null!==s?l=[l,i,s]:(l=null,Gn=u)):(l=null,Gn=u)):(l=null,Gn=u);null!==n?e=[e,n]:(e=null,Gn=a)}else e=null,Gn=a;return null!==e&&(e=function(e,t,n){var r=[];if(null!=t.triplesContext&&null!=t.triplesContext)for(var l=0;t.triplesContext.length>l;l++){var i=t.triplesContext[l];i.graph=null,r.push(i)}if(n&&n.length>0&&n[0].length>0&&(r=r.concat(n[0][0].quadsContext),null!=n[0][2]&&null!=n[0][2].triplesContext))for(var l=0;n[0][2].triplesContext.length>l;l++){var i=n[0][2].triplesContext[l];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}}(o,e[0],e[1])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[47] Quads"),e}function W(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v;for(Xn++,d=Gn,v=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("GRAPH"===t.substr(Gn,5)?(n="GRAPH",Gn+=5):(n=null,0===Xn&&r('"GRAPH"')),null===n&&("graph"===t.substr(Gn,5)?(n="graph",Gn+=5):(n=null,0===Xn&&r('"graph"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=Lt(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(123===t.charCodeAt(Gn)?(o="{",Gn++):(o=null,0===Xn&&r('"{"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a)if(u=J(),u=null!==u?u:"",null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();if(null!==c)if(125===t.charCodeAt(Gn)?(p="}",Gn++):(p=null,0===Xn&&r('"}"')),null!==p){for(h=[],f=Dn();null!==f;)h.push(f),f=Dn();null!==h?e=[e,n,l,i,s,o,a,u,c,p,h]:(e=null,Gn=v)}else e=null,Gn=v;else e=null,Gn=v}else e=null,Gn=v;else e=null,Gn=v}else e=null,Gn=v;else e=null,Gn=v}else e=null,Gn=v;else e=null,Gn=v}else e=null,Gn=v;else e=null,Gn=v;return null!==e&&(e=function(e,t,n){for(var r=[],l=0;n.triplesContext.length>l;l++){var i=n.triplesContext[l];i.graph=t,r.push(i)}return{token:"quadsnottriples",quadsContext:r}}(d,e[3],e[7])),null===e&&(Gn=d),Xn--,0===Xn&&null===e&&r("[48] QuadsNotTriples"),e}function J(){var e,n,l,i,s,o,a,u;if(Xn++,o=Gn,a=Gn,e=ht(),null!==e){for(u=Gn,n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(46===t.charCodeAt(Gn)?(l=".",Gn++):(l=null,0===Xn&&r('"."')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=J(),s=null!==s?s:"",null!==s?n=[n,l,i,s]:(n=null,Gn=u)):(n=null,Gn=u)}else n=null,Gn=u;else n=null,Gn=u;n=null!==n?n:"",null!==n?e=[e,n]:(e=null,Gn=a)}else e=null,Gn=a;return null!==e&&(e=function(e,t,n){var r=t.triplesContext;return"object"==typeof n&&null!=n.length&&null!=n[3].triplesContext&&(r=r.concat(n[3].triplesContext)),{token:"triplestemplate",triplesContext:r}}(o,e[0],e[1])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[49] TriplesTemplate"),e}function V(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,123===t.charCodeAt(Gn)?(e="{",Gn++):(e=null,0===Xn&&r('"{"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=c(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(125===t.charCodeAt(Gn)?(s="}",Gn++):(s=null,0===Xn&&r('"}"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;if(null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o),null===e){if(o=Gn,a=Gn,123===t.charCodeAt(Gn)?(e="{",Gn++):(e=null,0===Xn&&r('"{"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=Y(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(125===t.charCodeAt(Gn)?(s="}",Gn++):(s=null,0===Xn&&r('"}"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o)}return Xn--,0===Xn&&null===e&&r("[50] GroupGraphPattern"),e}function Y(){var e,n,l,i,s,o,a,u,c,p,h;if(Xn++,c=Gn,p=Gn,e=K(),e=null!==e?e:"",null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n){if(l=[],h=Gn,i=Z(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(46===t.charCodeAt(Gn)?(o=".",Gn++):(o=null,0===Xn&&r('"."')),o=null!==o?o:"",null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(u=K(),u=null!==u?u:"",null!==u?i=[i,s,o,a,u]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h}else i=null,Gn=h;for(;null!==i;)if(l.push(i),h=Gn,i=Z(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(46===t.charCodeAt(Gn)?(o=".",Gn++):(o=null,0===Xn&&r('"."')),o=null!==o?o:"",null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(u=K(),u=null!==u?u:"",null!==u?i=[i,s,o,a,u]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h}else i=null,Gn=h;null!==l?e=[e,n,l]:(e=null,Gn=p)}else e=null,Gn=p}else e=null,Gn=p;return null!==e&&(e=function(e,t,n){var r=[];null!=t&&t!=[]&&r.push(t);for(var l=0;n.length>l;l++)for(var i=0;n[l].length>i;i++)null!=n[l][i].token&&r.push(n[l][i]);for(var s=[],o=[],a=[],l=0;r.length>l;l++)if("triplespattern"!=r[l].token&&"filter"!=r[l].token){if(0!=o.length||0!=a.length){for(var u=[],i=0;o.length>i;i++)u=u.concat(o[i].triplesContext);u.length>0&&s.push({token:"basicgraphpattern",triplesContext:u}),o=[]}s.push(r[l])}else"triplespattern"===r[l].token?o.push(r[l]):a.push(r[l]);if(0!=o.length||0!=a.length){for(var u=[],i=0;o.length>i;i++)u=u.concat(o[i].triplesContext);u.length>0&&s.push({token:"basicgraphpattern",triplesContext:u})}return{token:"groupgraphpattern",patterns:s,filters:a}}(c,e[0],e[2])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[51] GroupGraphPatternSub"),e}function K(){var e,n,l,i,s,o,a;if(Xn++,s=Gn,o=Gn,e=yt(),null!==e){for(a=Gn,n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(46===t.charCodeAt(Gn)?(l=".",Gn++):(l=null,0===Xn&&r('"."')),null!==l?(i=K(),i=null!==i?i:"",null!==i?n=[n,l,i]:(n=null,Gn=a)):(n=null,Gn=a)):(n=null,Gn=a),n=null!==n?n:"",null!==n?e=[e,n]:(e=null,Gn=o)}else e=null,Gn=o;return null!==e&&(e=function(e,t,n){var r=t.triplesContext;return"object"==typeof n&&null!=n.length&&null!=n[2].triplesContext&&(r=r.concat(n[2].triplesContext)),{token:"triplespattern",triplesContext:r}}(s,e[0],e[1])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[54] TriplesBlock"),e}function Z(){var e;return Xn++,e=lt(),null===e&&(e=et(),null===e&&(e=rt(),null===e&&(e=tt(),null===e&&(e=nt(),null===e&&(e=it()))))),Xn--,0===Xn&&null===e&&r("[53] GraphPatternNotTriples"),e}function et(){var e,n,l,i,s,o;for(Xn++,s=Gn,o=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("OPTIONAL"===t.substr(Gn,8)?(n="OPTIONAL",Gn+=8):(n=null,0===Xn&&r('"OPTIONAL"')),null===n&&("optional"===t.substr(Gn,8)?(n="optional",Gn+=8):(n=null,0===Xn&&r('"optional"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?(i=V(),null!==i?e=[e,n,l,i]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;return null!==e&&(e=function(e,t){return{token:"optionalgraphpattern",value:t}}(s,e[3])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[54] OptionalGraphPattern"),e}function tt(){var e,n,l,i,s,o,a,u;for(Xn++,a=Gn,u=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("GRAPH"===t.substr(Gn,5)?(n="GRAPH",Gn+=5):(n=null,0===Xn&&r('"GRAPH"')),null===n&&("graph"===t.substr(Gn,5)?(n="graph",Gn+=5):(n=null,0===Xn&&r('"graph"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=Lt(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=V(),null!==o?e=[e,n,l,i,s,o]:(e=null,Gn=u)):(e=null,Gn=u)}else e=null,Gn=u;else e=null,Gn=u}else e=null,Gn=u;else e=null,Gn=u;return null!==e&&(e=function(e,t,n){for(var r=0;n.patterns.length>r;r++)for(var l=n.patterns[r],i=0;l.triplesContext.length>i;i++){var s=l.triplesContext[i];s.graph=t}return n.token="groupgraphpattern",n}(a,e[3],e[5])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[55] GraphGraphPattern"),e}function nt(){var e,n,l,i,s;return Xn++,i=Gn,s=Gn,"SERVICE"===t.substr(Gn,7)?(e="SERVICE",Gn+=7):(e=null,0===Xn&&r('"SERVICE"')),null!==e?(n=Lt(),null!==n?(l=V(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)):(e=null,Gn=s),null!==e&&(e=function(e,t,n){return{token:"servicegraphpattern",status:"todo",value:[t,n]}}(i,e[1],e[2])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[56] ServiceGraphPattern"),e}function rt(){var e,n,l,i;return Xn++,l=Gn,i=Gn,"MINUS"===t.substr(Gn,5)?(e="MINUS",Gn+=5):(e=null,0===Xn&&r('"MINUS"')),null!==e?(n=V(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return{token:"minusgraphpattern",status:"todo",value:t}}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[57] MinusGraphPattern"),e}function lt(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=V(),null!==e){for(n=[],c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("UNION"===t.substr(Gn,5)?(i="UNION",Gn+=5):(i=null,0===Xn&&r('"UNION"')),null===i&&("union"===t.substr(Gn,5)?(i="union",Gn+=5):(i=null,0===Xn&&r('"union"'))),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=V(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;for(;null!==l;){for(n.push(l),c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("UNION"===t.substr(Gn,5)?(i="UNION",Gn+=5):(i=null,0===Xn&&r('"UNION"')),null===i&&("union"===t.substr(Gn,5)?(i="union",Gn+=5):(i=null,0===Xn&&r('"union"'))),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=V(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}null!==n?e=[e,n]:(e=null,Gn=u)}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;for(var r={token:"graphunionpattern",value:[t]},l=0;n.length>l;l++)if(l==n.length-1)r.value.push(n[l][3]);else{r.value.push(n[l][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r}(a,e[0],e[1])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[58] GroupOrUnionGraphPattern"),e}function it(){var e,n,l,i,s,o;for(Xn++,s=Gn,o=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if("FILTER"===t.substr(Gn,6)?(n="FILTER",Gn+=6):(n=null,0===Xn&&r('"FILTER"')),null===n&&("filter"===t.substr(Gn,6)?(n="filter",Gn+=6):(n=null,0===Xn&&r('"filter"'))),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();null!==l?(i=st(),null!==i?e=[e,n,l,i]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;return null!==e&&(e=function(e,t){return{token:"filter",value:t}}(s,e[3])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[59] Filter"),e}function st(){var e;return Xn++,e=Xt(),null===e&&(e=zt(),null===e&&(e=ot())),Xn--,0===Xn&&null===e&&r("[60] Constraint"),e}function ot(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=ln(),null!==e?(t=at(),null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=t,r.args=n.value,r}(n,e[0],e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[61] FunctionCall"),e}function at(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,e=Nn(),null!==e&&(e=function(){var e={};return e.token="args",e.value=[],e}(a)),null===e&&(Gn=a),null===e){if(a=Gn,u=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e)if("DISTINCT"===t.substr(Gn,8)?(n="DISTINCT",Gn+=8):(n=null,0===Xn&&r('"DISTINCT"')),null===n&&("distinct"===t.substr(Gn,8)?(n="distinct",Gn+=8):(n=null,0===Xn&&r('"distinct"'))),n=null!==n?n:"",null!==n)if(l=Pt(),null!==l){for(i=[],c=Gn,44===t.charCodeAt(Gn)?(s=",",Gn++):(s=null,0===Xn&&r('","')),null!==s?(o=Pt(),null!==o?s=[s,o]:(s=null,Gn=c)):(s=null,Gn=c);null!==s;)i.push(s),c=Gn,44===t.charCodeAt(Gn)?(s=",",Gn++):(s=null,0===Xn&&r('","')),null!==s?(o=Pt(),null!==o?s=[s,o]:(s=null,Gn=c)):(s=null,Gn=c);null!==i?(41===t.charCodeAt(Gn)?(s=")",Gn++):(s=null,0===Xn&&r('")"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=u)):(e=null,Gn=u)}else e=null,Gn=u;else e=null,Gn=u;else e=null,Gn=u;null!==e&&(e=function(e,t,n,r){for(var l=[],i=0;r.length>i;i++)l.push(r[i][1]);var s={};return s.token="args",s.value=[n].concat(l),s.distinct=null!=t&&"DISTINCT"===t.toUpperCase()?!0:!1,s}(a,e[1],e[2],e[3])),null===e&&(Gn=a)}return Xn--,0===Xn&&null===e&&r("[62] ArgList"),e}function ut(){var e,n,l,i,s,o,a,u;if(Xn++,o=Gn,e=Nn(),null!==e&&(e=function(){var e={};return e.token="args",e.value=[],e}(o)),null===e&&(Gn=o),null===e){if(o=Gn,a=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e)if(n=Pt(),null!==n){for(l=[],u=Gn,44===t.charCodeAt(Gn)?(i=",",Gn++):(i=null,0===Xn&&r('","')),null!==i?(s=Pt(),null!==s?i=[i,s]:(i=null,Gn=u)):(i=null,Gn=u);null!==i;)l.push(i),u=Gn,44===t.charCodeAt(Gn)?(i=",",Gn++):(i=null,0===Xn&&r('","')),null!==i?(s=Pt(),null!==s?i=[i,s]:(i=null,Gn=u)):(i=null,Gn=u);null!==l?(41===t.charCodeAt(Gn)?(i=")",Gn++):(i=null,0===Xn&&r('")"')),null!==i?e=[e,n,l,i]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a;null!==e&&(e=function(e,t,n){for(var r=[],l=0;n.length>l;l++)r.push(n[l][1]);var i={};return i.token="args",i.value=[t].concat(r),i}(o,e[1],e[2])),null===e&&(Gn=o)}return Xn--,0===Xn&&null===e&&r("[63] ExpressionList"),e}function ct(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,123===t.charCodeAt(Gn)?(e="{",Gn++):(e=null,0===Xn&&r('"{"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=pt(),l=null!==l?l:"",null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(125===t.charCodeAt(Gn)?(s="}",Gn++):(s=null,0===Xn&&r('"}"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[64] ConstructTemplate"),e}function pt(){var e,n,l,i,s,o,a,u;if(Xn++,o=Gn,a=Gn,e=ht(),null!==e){for(u=Gn,n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(46===t.charCodeAt(Gn)?(l=".",Gn++):(l=null,0===Xn&&r('"."')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=pt(),s=null!==s?s:"",null!==s?n=[n,l,i,s]:(n=null,Gn=u)):(n=null,Gn=u)}else n=null,Gn=u;else n=null,Gn=u;n=null!==n?n:"",null!==n?e=[e,n]:(e=null,Gn=a)}else e=null,Gn=a;return null!==e&&(e=function(e,t,n){var r=t.triplesContext;return"object"==typeof n&&null!=n.length&&null!=n[3].triplesContext&&(r=r.concat(n[3].triplesContext)),{token:"triplestemplate",triplesContext:r}}(o,e[0],e[1])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[65] ConstructTriples"),e}function ht(){var e,t,n,l,i,s;for(Xn++,i=Gn,s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=Qt(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=ft(),null!==l?e=[e,t,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s;if(null!==e&&(e=function(e,t,n){var r=n.triplesContext,l=t;if(n.pairs)for(var i=0;n.pairs.length>i;i++){var s=n.pairs[i],o=null;null!=s[1].length&&(s[1]=s[1][0]),l.token&&"triplesnodecollection"===l.token?(o={subject:l.chainSubject[0],predicate:s[0],object:s[1]},r.push(o),r=r.concat(l.triplesContext)):(o={subject:l,predicate:s[0],object:s[1]},r.push(o))}var a={};return a.token="triplessamesubject",a.triplesContext=r,a.chainSubject=l,a}(i,e[1],e[3])),null===e&&(Gn=i),null===e){for(i=Gn,s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=_t(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=dt(),null!==l?e=[e,t,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s;null!==e&&(e=function(e,t,n){var r=t.triplesContext,l=t.chainSubject;if(n.pairs)for(var i=0;n.pairs.length>i;i++){var s=n.pairs[i];if(null!=s[1].length&&(s[1]=s[1][0]),"triplesnodecollection"===t.token)for(var o=0;l.length>o;o++){var a=l[o];if(null!=a.triplesContext){var u={subject:a.chainSubject,predicate:s[0],object:s[1]};r.concat(a.triplesContext)}else{var u={subject:l[o],predicate:s[0],object:s[1]};r.push(u)}}else{var u={subject:l,predicate:s[0],object:s[1]};r.push(u)}}var c={};return c.token="triplessamesubject",c.triplesContext=r,c.chainSubject=l,c}(i,e[1],e[3])),null===e&&(Gn=i)}return Xn--,0===Xn&&null===e&&r("[66] TriplesSameSubject"),e}function ft(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v;if(Xn++,h=Gn,f=Gn,e=gt(),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=vt(),null!==l){for(i=[],d=Gn,s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(59===t.charCodeAt(Gn)?(o=";",Gn++):(o=null,0===Xn&&r('";"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a){if(v=Gn,u=gt(),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?(p=vt(),null!==p?u=[u,c,p]:(u=null,Gn=v)):(u=null,Gn=v)}else u=null,Gn=v;u=null!==u?u:"",null!==u?s=[s,o,a,u]:(s=null,Gn=d)}else s=null,Gn=d}else s=null,Gn=d;else s=null,Gn=d;for(;null!==s;){for(i.push(s),d=Gn,s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(59===t.charCodeAt(Gn)?(o=";",Gn++):(o=null,0===Xn&&r('";"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();if(null!==a){if(v=Gn,u=gt(),null!==u){for(c=[],p=Dn();null!==p;)c.push(p),p=Dn();null!==c?(p=vt(),null!==p?u=[u,c,p]:(u=null,Gn=v)):(u=null,Gn=v)}else u=null,Gn=v;u=null!==u?u:"",null!==u?s=[s,o,a,u]:(s=null,Gn=d)}else s=null,Gn=d}else s=null,Gn=d;else s=null,Gn=d}null!==i?e=[e,n,l,i]:(e=null,Gn=f)}else e=null,Gn=f;else e=null,Gn=f}else e=null,Gn=f;return null!==e&&(e=function(e,t,n,r){var l={};l.token="propertylist";for(var i=[],s=[],o=0;n.length>o;o++)null!=n[o].triplesContext?(i=i.concat(n[o].triplesContext),"triplesnodecollection"===n[o].token&&null!=n[o].chainSubject.length?s.push([t,n[o].chainSubject[0]]):s.push([t,n[o].chainSubject])):s.push([t,n[o]]);for(var o=0;r.length>o;o++)for(var a=r[o][3],u=a[0],c=a[2]||[],p=0;c.length>p;p++)null!=c[p].triplesContext?(i=i.concat(c[p].triplesContext),s.push([u,c[p].chainSubject])):s.push([u,c[p]]);return l.pairs=s,l.triplesContext=i,l}(h,e[0],e[2],e[3])),null===e&&(Gn=h),Xn--,0===Xn&&null===e&&r("[67] PropertyListNotEmpty"),e}function dt(){var e;return Xn++,e=ft(),e=null!==e?e:"",Xn--,0===Xn&&null===e&&r("[68] PropertyList"),e}function vt(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=It(),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n){if(l=[],c=Gn,44===t.charCodeAt(Gn)?(i=",",Gn++):(i=null,0===Xn&&r('","')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=It(),null!==o?i=[i,s,o]:(i=null,Gn=c)):(i=null,Gn=c)}else i=null,Gn=c;for(;null!==i;)if(l.push(i),c=Gn,44===t.charCodeAt(Gn)?(i=",",Gn++):(i=null,0===Xn&&r('","')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=It(),null!==o?i=[i,s,o]:(i=null,Gn=c)):(i=null,Gn=c)}else i=null,Gn=c;null!==l?e=[e,n,l]:(e=null,Gn=u)}else e=null,Gn=u}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){var r=[];r.push(t);for(var l=0;n.length>l;l++)for(var i=0;n[l].length>i;i++)"object"==typeof n[l][i]&&null!=n[l][i].token&&r.push(n[l][i]);return r}(a,e[0],e[2])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[69] ObjectList"),e}function gt(){var e,n;return Xn++,e=Lt(),null===e&&(n=Gn,97===t.charCodeAt(Gn)?(e="a",Gn++):(e=null,0===Xn&&r('"a"')),null!==e&&(e=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}(n)),null===e&&(Gn=n)),Xn--,0===Xn&&null===e&&r("[71] Verb"),e}function yt(){var e,t,n,l,i,s;for(Xn++,i=Gn,s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=Qt(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=mt(),null!==l?e=[e,t,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s;if(null!==e&&(e=function(e,t,n){var r=n.triplesContext,l=t;if(n.pairs)for(var i=0;n.pairs.length>i;i++){var s=n.pairs[i],o=null;null!=s[1].length&&(s[1]=s[1][0]),l.token&&"triplesnodecollection"===l.token?(o={subject:l.chainSubject[0],predicate:s[0],object:s[1]},r.push(o),r=r.concat(l.triplesContext)):(o={subject:l,predicate:s[0],object:s[1]},r.push(o))}var a={};return a.token="triplessamesubject",a.triplesContext=r,a.chainSubject=l,a}(i,e[1],e[3])),null===e&&(Gn=i),null===e){for(i=Gn,s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=_t(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=bt(),null!==l?e=[e,t,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s;null!==e&&(e=function(e,t,n){var r=t.triplesContext,l=t.chainSubject;if(n.pairs)for(var i=0;n.pairs.length>i;i++){var s=n.pairs[i];if(null!=s[1].length&&(s[1]=s[1][0]),"triplesnodecollection"===t.token)for(var o=0;l.length>o;o++){var a=l[o];if(null!=a.triplesContext){var u={subject:a.chainSubject,predicate:s[0],object:s[1]};r.concat(a.triplesContext)}else{var u={subject:l[o],predicate:s[0],object:s[1]};r.push(u)}}else{var u={subject:l,predicate:s[0],object:s[1]};r.push(u)}}var c={};return c.token="triplessamesubject",c.triplesContext=r,c.chainSubject=l,c}(i,e[1],e[3])),null===e&&(Gn=i)}return Xn--,0===Xn&&null===e&&r("[72] TriplesSameSubjectPath"),e}function mt(){var e,n,l,i,s,o,a,u,c,p,h,f,d;if(Xn++,p=Gn,h=Gn,e=kt(),null===e&&(e=Rt()),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=vt(),null!==l){for(i=[],f=Gn,s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(59===t.charCodeAt(Gn)?(o=";",Gn++):(o=null,0===Xn&&r('";"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(d=Gn,u=kt(),null===u&&(u=Rt()),null!==u?(c=vt(),null!==c?u=[u,c]:(u=null,Gn=d)):(u=null,Gn=d),u=null!==u?u:"",null!==u?s=[s,o,a,u]:(s=null,Gn=f)):(s=null,Gn=f)}else s=null,Gn=f;else s=null,Gn=f;for(;null!==s;){for(i.push(s),f=Gn,s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(59===t.charCodeAt(Gn)?(o=";",Gn++):(o=null,0===Xn&&r('";"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?(d=Gn,u=kt(),null===u&&(u=Rt()),null!==u?(c=vt(),null!==c?u=[u,c]:(u=null,Gn=d)):(u=null,Gn=d),u=null!==u?u:"",null!==u?s=[s,o,a,u]:(s=null,Gn=f)):(s=null,Gn=f)}else s=null,Gn=f;else s=null,Gn=f}null!==i?e=[e,n,l,i]:(e=null,Gn=h)}else e=null,Gn=h;else e=null,Gn=h}else e=null,Gn=h;return null!==e&&(e=function(e,t,n,r){token={},token.token="propertylist";for(var l=[],i=[],s=0;n.length>s;s++)null!=n[s].triplesContext?(l=l.concat(n[s].triplesContext),"triplesnodecollection"===n[s].token&&null!=n[s].chainSubject.length?i.push([t,n[s].chainSubject[0]]):i.push([t,n[s].chainSubject])):i.push([t,n[s]]);for(var s=0;r.length>s;s++)for(var o=r[s][3],a=o[0],u=o[1]||[],c=0;u.length>c;c++)null!=u[c].triplesContext?(l=l.concat(u[c].triplesContext),i.push([a,u[c].chainSubject])):i.push([a,u[c]]);return token.pairs=i,token.triplesContext=l,token}(p,e[0],e[2],e[3])),null===e&&(Gn=p),Xn--,0===Xn&&null===e&&r("[73] PropertyListNotEmptyPath"),e}function bt(){var e;return Xn++,e=ft(),e=null!==e?e:"",Xn--,0===Xn&&null===e&&r("[74] PropertyListPath"),e}function kt(){var e,t;return Xn++,t=Gn,e=xt(),null!==e&&(e=function(e,t){var n={};return n.token="path",n.kind="element",n.value=t,t}(t,e)),null===e&&(Gn=t),Xn--,0===Xn&&null===e&&r("[75]"),e}function xt(){var e,n,l,i,s,o,a;if(Xn++,s=Gn,o=Gn,e=wt(),null!==e){for(n=[],a=Gn,124===t.charCodeAt(Gn)?(l="|",Gn++):(l=null,0===Xn&&r('"|"')),null!==l?(i=wt(),null!==i?l=[l,i]:(l=null,Gn=a)):(l=null,Gn=a);null!==l;)n.push(l),a=Gn,124===t.charCodeAt(Gn)?(l="|",Gn++):(l=null,0===Xn&&r('"|"')),null!==l?(i=wt(),null!==i?l=[l,i]:(l=null,Gn=a)):(l=null,Gn=a);null!==n?e=[e,n]:(e=null,Gn=o)}else e=null,Gn=o;return null!==e&&(e=function(e,t,n){if(null==n||0===n.length)return t;for(var r=[],l=0;n.length>l;l++)r.push(n[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i}(s,e[0],e[1])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[78] PathAlternative"),e}function wt(){var e,n,l,i,s,o,a;if(Xn++,s=Gn,o=Gn,e=Ct(),null!==e){for(n=[],a=Gn,47===t.charCodeAt(Gn)?(l="/",Gn++):(l=null,0===Xn&&r('"/"')),null!==l?(i=Ct(),null!==i?l=[l,i]:(l=null,Gn=a)):(l=null,Gn=a);null!==l;)n.push(l),a=Gn,47===t.charCodeAt(Gn)?(l="/",Gn++):(l=null,0===Xn&&r('"/"')),null!==l?(i=Ct(),null!==i?l=[l,i]:(l=null,Gn=a)):(l=null,Gn=a);null!==n?e=[e,n]:(e=null,Gn=o)}else e=null,Gn=o;return null!==e&&(e=function(e,t,n){if(null==n||0===n.length)return t;for(var r=[t],l=0;n.length>l;l++)r.push(n[l][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i}(s,e[0],e[1])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[79] PathSequence"),e}function St(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=Ft(),null!==e?(t=Et(),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t,n){if(t.token&&"path"!=t.token&&""==n)return t;if(t.token&&t.token!=r&&""!=n){var r={};return r.token="path",r.kind="element",r.value=t,r.modifier=n,r}return t.modifier=n,t}(n,e[0],e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[88] PathElt"),e}function Ct(){var e,n,l,i;return Xn++,e=St(),null===e&&(l=Gn,i=Gn,94===t.charCodeAt(Gn)?(e="^",Gn++):(e=null,0===Xn&&r('"^"')),null!==e?(n=St(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){var n={};return n.token="path",n.kind="inversePath",n.value=t,n}(l,e[1])),null===e&&(Gn=l)),Xn--,0===Xn&&null===e&&r("[81] PathEltOrInverse"),e}function Et(){var e,n,l,i,s,o,a,u,c;return Xn++,42===t.charCodeAt(Gn)?(e="*",Gn++):(e=null,0===Xn&&r('"*"')),null===e&&(63===t.charCodeAt(Gn)?(e="?",Gn++):(e=null,0===Xn&&r('"?"')),null===e&&(43===t.charCodeAt(Gn)?(e="+",Gn++):(e=null,0===Xn&&r('"+"')),null===e&&(o=Gn,123===t.charCodeAt(Gn)?(e="{",Gn++):(e=null,0===Xn&&r('"{"')),null!==e?(a=Gn,n=vn(),null!==n?(u=Gn,44===t.charCodeAt(Gn)?(l=",",Gn++):(l=null,0===Xn&&r('","')),null!==l?(125===t.charCodeAt(Gn)?(i="}",Gn++):(i=null,0===Xn&&r('"}"')),null===i&&(c=Gn,i=vn(),null!==i?(125===t.charCodeAt(Gn)?(s="}",Gn++):(s=null,0===Xn&&r('"}"')),null!==s?i=[i,s]:(i=null,Gn=c)):(i=null,Gn=c)),null!==i?l=[l,i]:(l=null,Gn=u)):(l=null,Gn=u),null===l&&(125===t.charCodeAt(Gn)?(l="}",Gn++):(l=null,0===Xn&&r('"}"'))),null!==l?n=[n,l]:(n=null,Gn=a)):(n=null,Gn=a),null===n&&(a=Gn,44===t.charCodeAt(Gn)?(n=",",Gn++):(n=null,0===Xn&&r('","')),null!==n?(l=vn(),null!==l?(125===t.charCodeAt(Gn)?(i="}",Gn++):(i=null,0===Xn&&r('"}"')),null!==i?n=[n,l,i]:(n=null,Gn=a)):(n=null,Gn=a)):(n=null,Gn=a)),null!==n?e=[e,n]:(e=null,Gn=o)):(e=null,Gn=o)))),Xn--,0===Xn&&null===e&&r("[82] PathMod"),e}function Ft(){var e,n,l,i,s;return Xn++,e=ln(),null===e&&(i=Gn,97===t.charCodeAt(Gn)?(e="a",Gn++):(e=null,0===Xn&&r('"a"')),null!==e&&(e=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}(i)),null===e&&(Gn=i),null===e&&(i=Gn,33===t.charCodeAt(Gn)?(e="!",Gn++):(e=null,0===Xn&&r('"!"')),null!==e?(n=Tt(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null===e&&(i=Gn,s=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e?(n=xt(),null!==n?(41===t.charCodeAt(Gn)?(l=")",Gn++):(l=null,0===Xn&&r('")"')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)):(e=null,Gn=s),null!==e&&(e=function(e,t){return t}(i,e[1])),null===e&&(Gn=i)))),Xn--,0===Xn&&null===e&&r("[83] PathPrimary"),e}function Tt(){var e,n,l,i,s,o,a,u;if(e=At(),null===e)if(o=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e){if(a=Gn,n=At(),null!==n){for(l=[],u=Gn,124===t.charCodeAt(Gn)?(i="|",Gn++):(i=null,0===Xn&&r('"|"')),null!==i?(s=At(),null!==s?i=[i,s]:(i=null,Gn=u)):(i=null,Gn=u);null!==i;)l.push(i),u=Gn,124===t.charCodeAt(Gn)?(i="|",Gn++):(i=null,0===Xn&&r('"|"')),null!==i?(s=At(),null!==s?i=[i,s]:(i=null,Gn=u)):(i=null,Gn=u);null!==l?n=[n,l]:(n=null,Gn=a)}else n=null,Gn=a;n=null!==n?n:"",null!==n?(41===t.charCodeAt(Gn)?(l=")",Gn++):(l=null,0===Xn&&r('")"')),null!==l?e=[e,n,l]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;return e}function At(){var e,n,l;return Xn++,e=ln(),null===e&&(97===t.charCodeAt(Gn)?(e="a",Gn++):(e=null,0===Xn&&r('"a"')),null===e&&(l=Gn,94===t.charCodeAt(Gn)?(e="^",Gn++):(e=null,0===Xn&&r('"^"')),null!==e?(n=ln(),null===n&&(97===t.charCodeAt(Gn)?(n="a",Gn++):(n=null,0===Xn&&r('"a"'))),null!==n?e=[e,n]:(e=null,Gn=l)):(e=null,Gn=l))),Xn--,0===Xn&&null===e&&r("[85] PathOneInPropertySet"),e}function _t(){var e,t;return Xn++,t=Gn,e=Dt(),null!==e&&(e=function(e,t){for(var n=[],r=[],l=null,i=0;t.length>i;i++){Wn++;var s=null;null==t[i].chainSubject&&null==t[i].triplesContext?s=t[i]:(s=t[i].chainSubject,n=n.concat(nextSubject.triplesContext)),l={subject:{token:"blank",value:"_:"+Wn},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:s},0==i&&r.push(l.subject),n.push(l),l=i===t.length-1?{subject:{token:"blank",value:"_:"+Wn},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+Wn},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(Wn+1)}},n.push(l)}return{token:"triplesnodecollection",triplesContext:n,chainSubject:r}}(t,e)),null===e&&(Gn=t),null===e&&(e=Nt()),Xn--,0===Xn&&null===e&&r("[87] TriplesNode"),e}function Nt(){var e,n,l,i,s,o,a,u,c,p;for(Xn++,c=Gn,p=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(91===t.charCodeAt(Gn)?(n="[",Gn++):(n=null,0===Xn&&r('"["')),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(i=ft(),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(93===t.charCodeAt(Gn)?(o="]",Gn++):(o=null,0===Xn&&r('"]"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=p)}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p;return null!==e&&(e=function(e,t){Wn++;for(var n={token:"blank",value:"_:"+Wn},r=[],l=0;t.pairs.length>l;l++){var i=t.pairs[l],s={};s.subject=n,s.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),s.object=i[1],r.push(s)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:t.triplesContext.concat(r),chainSubject:n}}(c,e[3])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[88] BlankNodePropertyList"),e}function Dt(){var e,n,l,i,s,o,a,u,c,p;for(Xn++,c=Gn,p=Gn,e=[],n=Dn();null!==n;)e.push(n),n=Dn();if(null!==e)if(40===t.charCodeAt(Gn)?(n="(",Gn++):(n=null,0===Xn&&r('"("')),null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l){if(s=It(),null!==s)for(i=[];null!==s;)i.push(s),s=It();else i=null;if(null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();if(null!==s)if(41===t.charCodeAt(Gn)?(o=")",Gn++):(o=null,0===Xn&&r('")"')),null!==o){for(a=[],u=Dn();null!==u;)a.push(u),u=Dn();null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=p)
}else e=null,Gn=p;else e=null,Gn=p}else e=null,Gn=p}else e=null,Gn=p}else e=null,Gn=p;else e=null,Gn=p;return null!==e&&(e=function(e,t){return t}(c,e[3])),null===e&&(Gn=c),Xn--,0===Xn&&null===e&&r("[89] Collection"),e}function It(){var e,t,n,l,i,s;for(Xn++,i=Gn,s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=Qt(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?e=[e,t,n]:(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s;if(null===e){for(s=Gn,e=[],t=Dn();null!==t;)e.push(t),t=Dn();if(null!==e)if(t=_t(),null!==t){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?e=[e,t,n]:(e=null,Gn=s)}else e=null,Gn=s;else e=null,Gn=s}return null!==e&&(e=function(e,t){return t[1]}(i,e)),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[90] GraphNode"),e}function Qt(){var e;return Xn++,e=Rt(),null===e&&(e=Ot()),Xn--,0===Xn&&null===e&&r("[91] VarOrTerm"),e}function Lt(){var e;return Xn++,e=Rt(),null===e&&(e=ln()),Xn--,0===Xn&&null===e&&r("[92] VarOrIRIref"),e}function Rt(){var e,t;return Xn++,t=Gn,e=hn(),null===e&&(e=fn()),null!==e&&(e=function(e,t){var n={};return n.token="var",n.value=t,n}(t,e)),null===e&&(Gn=t),Xn--,0===Xn&&null===e&&r("[93] Var"),e}function Ot(){var e;return Xn++,e=ln(),null===e&&(e=Yt(),null===e&&(e=Kt(),null===e&&(e=nn(),null===e&&(e=on(),null===e&&(e=Nn()))))),Xn--,0===Xn&&null===e&&r("[94] GraphTerm"),e}function Pt(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=jt(),null!==e){for(n=[],c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("||"===t.substr(Gn,2)?(i="||",Gn+=2):(i=null,0===Xn&&r('"||"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=jt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;for(;null!==l;){for(n.push(l),c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("||"===t.substr(Gn,2)?(i="||",Gn+=2):(i=null,0===Xn&&r('"||"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=jt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}null!==n?e=[e,n]:(e=null,Gn=u)}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;var r={};r.token="expression",r.expressionType="conditionalor";for(var l=[t],i=0;n.length>i;i++)l.push(n[i][3]);return r.operands=l,r}(a,e[0],e[1])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[96] ConditionalOrExpression"),e}function jt(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=Mt(),null!==e){for(n=[],c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("&&"===t.substr(Gn,2)?(i="&&",Gn+=2):(i=null,0===Xn&&r('"&&"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Mt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;for(;null!==l;){for(n.push(l),c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("&&"===t.substr(Gn,2)?(i="&&",Gn+=2):(i=null,0===Xn&&r('"&&"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Mt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}null!==n?e=[e,n]:(e=null,Gn=u)}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;var r={};r.token="expression",r.expressionType="conditionaland";for(var l=[t],i=0;n.length>i;i++)l.push(n[i][3]);return r.operands=l,r}(a,e[0],e[1])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[97] ConditionalAndExpression"),e}function Mt(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=Bt(),null!==e){for(n=[],c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(61===t.charCodeAt(Gn)?(i="=",Gn++):(i=null,0===Xn&&r('"="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("!="===t.substr(Gn,2)?(i="!=",Gn+=2):(i=null,0===Xn&&r('"!="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(60===t.charCodeAt(Gn)?(i="<",Gn++):(i=null,0===Xn&&r('"<"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(62===t.charCodeAt(Gn)?(i=">",Gn++):(i=null,0===Xn&&r('">"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("<="===t.substr(Gn,2)?(i="<=",Gn+=2):(i=null,0===Xn&&r('"<="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(">="===t.substr(Gn,2)?(i=">=",Gn+=2):(i=null,0===Xn&&r('">="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}}}}}for(;null!==l;){for(n.push(l),c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(61===t.charCodeAt(Gn)?(i="=",Gn++):(i=null,0===Xn&&r('"="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("!="===t.substr(Gn,2)?(i="!=",Gn+=2):(i=null,0===Xn&&r('"!="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(60===t.charCodeAt(Gn)?(i="<",Gn++):(i=null,0===Xn&&r('"<"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(62===t.charCodeAt(Gn)?(i=">",Gn++):(i=null,0===Xn&&r('">"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if("<="===t.substr(Gn,2)?(i="<=",Gn+=2):(i=null,0===Xn&&r('"<="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(">="===t.substr(Gn,2)?(i=">=",Gn+=2):(i=null,0===Xn&&r('">="')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Bt(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}}}}}}null!==n?e=[e,n]:(e=null,Gn=u)}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;var r={};return r.expressionType="relationalexpression",r.operator=n[0][1],r.op1=t,r.op2=n[0][3],r.token="expression",r}(a,e[0],e[1])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[99] RelationalExpression"),e}function Bt(){var e,n,l,i,s,o,a,u,c,p,h;if(Xn++,u=Gn,c=Gn,e=Ht(),null!==e){for(n=[],p=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(43===t.charCodeAt(Gn)?(i="+",Gn++):(i=null,0===Xn&&r('"+"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ht(),null!==o?l=[l,i,s,o]:(l=null,Gn=p)):(l=null,Gn=p)}else l=null,Gn=p;else l=null,Gn=p;if(null===l){for(p=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(45===t.charCodeAt(Gn)?(i="-",Gn++):(i=null,0===Xn&&r('"-"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ht(),null!==o?l=[l,i,s,o]:(l=null,Gn=p)):(l=null,Gn=p)}else l=null,Gn=p;else l=null,Gn=p;if(null===l)if(p=Gn,l=tn(),null===l&&(l=tn()),null!==l){for(h=Gn,i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(42===t.charCodeAt(Gn)?(s="*",Gn++):(s=null,0===Xn&&r('"*"')),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=Ut(),null!==a?i=[i,s,o,a]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h;if(null===i){for(h=Gn,i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(47===t.charCodeAt(Gn)?(s="/",Gn++):(s=null,0===Xn&&r('"/"')),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=Ut(),null!==a?i=[i,s,o,a]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h}i=null!==i?i:"",null!==i?l=[l,i]:(l=null,Gn=p)}else l=null,Gn=p}for(;null!==l;){for(n.push(l),p=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(43===t.charCodeAt(Gn)?(i="+",Gn++):(i=null,0===Xn&&r('"+"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ht(),null!==o?l=[l,i,s,o]:(l=null,Gn=p)):(l=null,Gn=p)}else l=null,Gn=p;else l=null,Gn=p;if(null===l){for(p=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(45===t.charCodeAt(Gn)?(i="-",Gn++):(i=null,0===Xn&&r('"-"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ht(),null!==o?l=[l,i,s,o]:(l=null,Gn=p)):(l=null,Gn=p)}else l=null,Gn=p;else l=null,Gn=p;if(null===l)if(p=Gn,l=tn(),null===l&&(l=tn()),null!==l){for(h=Gn,i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(42===t.charCodeAt(Gn)?(s="*",Gn++):(s=null,0===Xn&&r('"*"')),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=Ut(),null!==a?i=[i,s,o,a]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h;if(null===i){for(h=Gn,i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(47===t.charCodeAt(Gn)?(s="/",Gn++):(s=null,0===Xn&&r('"/"')),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=Ut(),null!==a?i=[i,s,o,a]:(i=null,Gn=h)):(i=null,Gn=h)}else i=null,Gn=h;else i=null,Gn=h}i=null!==i?i:"",null!==i?l=[l,i]:(l=null,Gn=p)}else l=null,Gn=p}}null!==n?e=[e,n]:(e=null,Gn=c)}else e=null,Gn=c;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=t,r.summands=[];for(var l=0;n.length>l;l++){var i=n[l],s={};if(4==i.length&&"string"==typeof i[1])s.operator=i[1],s.expression=i[3];else{var o={},a=s[0],u=s[1][1],c=s[1][3],u=null;0>a.value?(s.operator="-",a.value=-a.value):s.operator="+",o.token="expression",o.expressionType="multiplicativeexpression",o.operator=a,o.factors=[{operator:u,expression:c}],s.expression=o}r.summands.push(s)}return r}(u,e[0],e[1])),null===e&&(Gn=u),Xn--,0===Xn&&null===e&&r("[101] AdditiveExpression"),e}function Ht(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,e=Ut(),null!==e){for(n=[],c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(42===t.charCodeAt(Gn)?(i="*",Gn++):(i=null,0===Xn&&r('"*"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ut(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(47===t.charCodeAt(Gn)?(i="/",Gn++):(i=null,0===Xn&&r('"/"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ut(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}for(;null!==l;){for(n.push(l),c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(42===t.charCodeAt(Gn)?(i="*",Gn++):(i=null,0===Xn&&r('"*"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ut(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c;if(null===l){for(c=Gn,l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(47===t.charCodeAt(Gn)?(i="/",Gn++):(i=null,0===Xn&&r('"/"')),null!==i){for(s=[],o=Dn();null!==o;)s.push(o),o=Dn();null!==s?(o=Ut(),null!==o?l=[l,i,s,o]:(l=null,Gn=c)):(l=null,Gn=c)}else l=null,Gn=c;else l=null,Gn=c}}null!==n?e=[e,n]:(e=null,Gn=u)}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){if(0===n.length)return t;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=t,r.factors=[];for(var l=0;n.length>l;l++){var i=n[l],s={};s.operator=i[1],s.expression=i[3],r.factors.push(s)}return r}(a,e[0],e[1])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[102] MultiplicativeExpression"),e}function Ut(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,33===t.charCodeAt(Gn)?(e="!",Gn++):(e=null,0===Xn&&r('"!"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=Gt(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="unaryexpression",n.unaryexpression="!",n.expression=t,n}(i,e[2])),null===e&&(Gn=i),null===e){if(i=Gn,s=Gn,43===t.charCodeAt(Gn)?(e="+",Gn++):(e=null,0===Xn&&r('"+"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=Gt(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="unaryexpression",n.unaryexpression="+",n.expression=t,n}(i,e[2])),null===e&&(Gn=i),null===e){if(i=Gn,s=Gn,45===t.charCodeAt(Gn)?(e="-",Gn++):(e=null,0===Xn&&r('"-"')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=Gt(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="unaryexpression",n.unaryexpression="-",n.expression=t,n}(i,e[2])),null===e&&(Gn=i),null===e&&(e=Gt())}}return Xn--,0===Xn&&null===e&&r("[103] UnaryExpression"),e}function Gt(){var e,t;return Xn++,e=Xt(),null===e&&(e=zt(),null===e&&(e=Vt(),null===e&&(t=Gn,e=Yt(),null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="atomic",n.primaryexpression="rdfliteral",n.value=t,n}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=Kt(),null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="atomic",n.primaryexpression="numericliteral",n.value=t,n}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=nn(),null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="atomic",n.primaryexpression="booleanliteral",n.value=t,n}(t,e)),null===e&&(Gn=t),null===e&&(e=Jt(),null===e&&(t=Gn,e=Rt(),null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="atomic",n.primaryexpression="var",n.value=t,n}(t,e)),null===e&&(Gn=t)))))))),Xn--,0===Xn&&null===e&&r("[104] PrimaryExpression"),e}function Xt(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(l=Pt(),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(41===t.charCodeAt(Gn)?(s=")",Gn++):(s=null,0===Xn&&r('")"')),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){return t}(o,e[2])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[105] BrackettedExpression"),e}function zt(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v,g,y,m,b;if(Xn++,y=Gn,m=Gn,"STR"===t.substr(Gn,3)?(e="STR",Gn+=3):(e=null,0===Xn&&r('"STR"')),null===e&&("str"===t.substr(Gn,3)?(e="str",Gn+=3):(e=null,0===Xn&&r('"str"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="str",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"LANG"===t.substr(Gn,4)?(e="LANG",Gn+=4):(e=null,0===Xn&&r('"LANG"')),null===e&&("lang"===t.substr(Gn,4)?(e="lang",Gn+=4):(e=null,0===Xn&&r('"lang"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="lang",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"LANGMATCHES"===t.substr(Gn,11)?(e="LANGMATCHES",Gn+=11):(e=null,0===Xn&&r('"LANGMATCHES"')),null===e&&("langmatches"===t.substr(Gn,11)?(e="langmatches",Gn+=11):(e=null,0===Xn&&r('"langmatches"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(44===t.charCodeAt(Gn)?(a=",",Gn++):(a=null,0===Xn&&r('","')),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(c=Pt(),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?(41===t.charCodeAt(Gn)?(h=")",Gn++):(h=null,0===Xn&&r('")"')),null!==h?e=[e,n,l,i,s,o,a,u,c,p,h]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[t,n],r}(y,e[4],e[8])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"DATATYPE"===t.substr(Gn,8)?(e="DATATYPE",Gn+=8):(e=null,0===Xn&&r('"DATATYPE"')),null===e&&("datatype"===t.substr(Gn,8)?(e="datatype",Gn+=8):(e=null,0===Xn&&r('"datatype"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="datatype",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"BOUND"===t.substr(Gn,5)?(e="BOUND",Gn+=5):(e=null,0===Xn&&r('"BOUND"')),null===e&&("bound"===t.substr(Gn,5)?(e="bound",Gn+=5):(e=null,0===Xn&&r('"bound"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Rt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="bound",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"IRI"===t.substr(Gn,3)?(e="IRI",Gn+=3):(e=null,0===Xn&&r('"IRI"')),null===e&&("iri"===t.substr(Gn,3)?(e="iri",Gn+=3):(e=null,0===Xn&&r('"iri"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="iri",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"URI"===t.substr(Gn,3)?(e="URI",Gn+=3):(e=null,0===Xn&&r('"URI"')),null===e&&("uri"===t.substr(Gn,3)?(e="uri",Gn+=3):(e=null,0===Xn&&r('"uri"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="uri",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"BNODE"===t.substr(Gn,5)?(e="BNODE",Gn+=5):(e=null,0===Xn&&r('"BNODE"')),null===e&&("bnode"===t.substr(Gn,5)?(e="bnode",Gn+=5):(e=null,0===Xn&&r('"bnode"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n){if(b=Gn,40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?l=[l,i,s,o,a]:(l=null,Gn=b)):(l=null,Gn=b)}else l=null,Gn=b;else l=null,Gn=b}else l=null,Gn=b;null===l&&(l=Nn()),null!==l?e=[e,n,l]:(e=null,Gn=m)}else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="bnode",n.args=5===t.length?[t[2]]:null,n}(y,e[2])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"COALESCE"===t.substr(Gn,8)?(e="COALESCE",Gn+=8):(e=null,0===Xn&&r('"COALESCE"')),null===e&&("coalesce"===t.substr(Gn,8)?(e="coalesce",Gn+=8):(e=null,0===Xn&&r('"coalesce"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=ut(),null!==l?e=[e,n,l]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="coalesce",n.args=t,n}(y,e[2])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"IF"===t.substr(Gn,2)?(e="IF",Gn+=2):(e=null,0===Xn&&r('"IF"')),null===e&&("if"===t.substr(Gn,2)?(e="if",Gn+=2):(e=null,0===Xn&&r('"if"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(44===t.charCodeAt(Gn)?(a=",",Gn++):(a=null,0===Xn&&r('","')),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(c=Pt(),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();if(null!==p)if(44===t.charCodeAt(Gn)?(h=",",Gn++):(h=null,0===Xn&&r('","')),null!==h){for(f=[],d=Dn();null!==d;)f.push(d),d=Dn();if(null!==f)if(d=Pt(),null!==d){for(v=[],g=Dn();null!==g;)v.push(g),g=Dn();null!==v?(41===t.charCodeAt(Gn)?(g=")",Gn++):(g=null,0===Xn&&r('")"')),null!==g?e=[e,n,l,i,s,o,a,u,c,p,h,f,d,v,g]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t,n,r){var l={};return l.token="expression",l.expressionType="builtincall",l.builtincall="if",l.args=[t,n,r],l}(y,e[4],e[8],e[12])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"ISLITERAL"===t.substr(Gn,9)?(e="ISLITERAL",Gn+=9):(e=null,0===Xn&&r('"ISLITERAL"')),null===e&&("isliteral"===t.substr(Gn,9)?(e="isliteral",Gn+=9):(e=null,0===Xn&&r('"isliteral"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="isliteral",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"ISBLANK"===t.substr(Gn,7)?(e="ISBLANK",Gn+=7):(e=null,0===Xn&&r('"ISBLANK"')),null===e&&("isblank"===t.substr(Gn,7)?(e="isblank",Gn+=7):(e=null,0===Xn&&r('"isblank"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="isblank",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"SAMETERM"===t.substr(Gn,8)?(e="SAMETERM",Gn+=8):(e=null,0===Xn&&r('"SAMETERM"')),null===e&&("sameterm"===t.substr(Gn,8)?(e="sameterm",Gn+=8):(e=null,0===Xn&&r('"sameterm"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(44===t.charCodeAt(Gn)?(a=",",Gn++):(a=null,0===Xn&&r('","')),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(c=Pt(),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?(41===t.charCodeAt(Gn)?(h=")",Gn++):(h=null,0===Xn&&r('")"')),null!==h?e=[e,n,l,i,s,o,a,u,c,p,h]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[t,n],r}(y,e[4],e[8])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"ISURI"===t.substr(Gn,5)?(e="ISURI",Gn+=5):(e=null,0===Xn&&r('"ISURI"')),null===e&&("isuri"===t.substr(Gn,5)?(e="isuri",Gn+=5):(e=null,0===Xn&&r('"isuri"')),null===e&&("ISIRI"===t.substr(Gn,5)?(e="ISIRI",Gn+=5):(e=null,0===Xn&&r('"ISIRI"')),null===e&&("isiri"===t.substr(Gn,5)?(e="isiri",Gn+=5):(e=null,0===Xn&&r('"isiri"'))))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(41===t.charCodeAt(Gn)?(a=")",Gn++):(a=null,0===Xn&&r('")"')),null!==a?e=[e,n,l,i,s,o,a]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m;if(null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="isuri",n.args=[t],n}(y,e[4])),null===e&&(Gn=y),null===e){if(y=Gn,m=Gn,"custom:"===t.substr(Gn,7)?(e="custom:",Gn+=7):(e=null,0===Xn&&r('"custom:"')),null===e&&("CUSTOM:"===t.substr(Gn,7)?(e="CUSTOM:",Gn+=7):(e=null,0===Xn&&r('"CUSTOM:"'))),null!==e){if(/^[a-zA-Z0-9_]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[a-zA-Z0-9_]")),null!==l)for(n=[];null!==l;)n.push(l),/^[a-zA-Z0-9_]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[a-zA-Z0-9_]"));else n=null;if(null!==n){for(l=[],i=Dn();null!==i;)l.push(i),i=Dn();if(null!==l)if(40===t.charCodeAt(Gn)?(i="(",Gn++):(i=null,0===Xn&&r('"("')),null!==i){for(s=[],b=Gn,o=[],a=Dn();null!==a;)o.push(a),a=Dn();for(null!==o?(a=Pt(),null!==a?(44===t.charCodeAt(Gn)?(u=",",Gn++):(u=null,0===Xn&&r('","')),null!==u?o=[o,a,u]:(o=null,Gn=b)):(o=null,Gn=b)):(o=null,Gn=b);null!==o;){for(s.push(o),b=Gn,o=[],a=Dn();null!==a;)o.push(a),a=Dn();null!==o?(a=Pt(),null!==a?(44===t.charCodeAt(Gn)?(u=",",Gn++):(u=null,0===Xn&&r('","')),null!==u?o=[o,a,u]:(o=null,Gn=b)):(o=null,Gn=b)):(o=null,Gn=b)}if(null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(a=Pt(),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();null!==u?(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c?e=[e,n,l,i,s,o,a,u,c]:(e=null,Gn=m)):(e=null,Gn=m)}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m}else e=null,Gn=m;else e=null,Gn=m}else e=null,Gn=m}else e=null,Gn=m;null!==e&&(e=function(e,t,n,r){var l={};l.token="expression",l.expressionType="custom",l.name=t.join("");for(var i=[],s=0;n.length>s;s++)i.push(n[s][1]);return i.push(r),l.args=i,l}(y,e[1],e[4],e[6])),null===e&&(Gn=y),null===e&&(e=qt(),null===e&&(e=$t(),null===e&&(e=Wt())))}}}}}}}}}}}}}}return Xn--,0===Xn&&null===e&&r("[106] BuiltInCall"),e}function qt(){var e,n,l,i,s,o,a,u,c,p,h,f,d,v,g,y;if(Xn++,v=Gn,g=Gn,"REGEX"===t.substr(Gn,5)?(e="REGEX",Gn+=5):(e=null,0===Xn&&r('"REGEX"')),null===e&&("regex"===t.substr(Gn,5)?(e="regex",Gn+=5):(e=null,0===Xn&&r('"regex"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if(s=Pt(),null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(44===t.charCodeAt(Gn)?(a=",",Gn++):(a=null,0===Xn&&r('","')),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(c=Pt(),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();if(null!==p){if(y=Gn,44===t.charCodeAt(Gn)?(h=",",Gn++):(h=null,0===Xn&&r('","')),null!==h){for(f=[],d=Dn();null!==d;)f.push(d),d=Dn();null!==f?(d=Pt(),null!==d?h=[h,f,d]:(h=null,Gn=y)):(h=null,Gn=y)}else h=null,Gn=y;if(h=null!==h?h:"",null!==h){for(f=[],d=Dn();null!==d;)f.push(d),d=Dn();null!==f?(41===t.charCodeAt(Gn)?(d=")",Gn++):(d=null,0===Xn&&r('")"')),null!==d?e=[e,n,l,i,s,o,a,u,c,p,h,f,d]:(e=null,Gn=g)):(e=null,Gn=g)}else e=null,Gn=g}else e=null,Gn=g}else e=null,Gn=g;else e=null,Gn=g}else e=null,Gn=g;else e=null,Gn=g}else e=null,Gn=g;else e=null,Gn=g}else e=null,Gn=g;else e=null,Gn=g}else e=null,Gn=g;return null!==e&&(e=function(e,t,n,r){var l={};return l.token="expression",l.expressionType="regex",l.text=t,l.pattern=n,l.flags=r[2],l}(v,e[4],e[8],e[10])),null===e&&(Gn=v),Xn--,0===Xn&&null===e&&r("[107] RegexExpression"),e}function $t(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,"EXISTS"===t.substr(Gn,6)?(e="EXISTS",Gn+=6):(e=null,0===Xn&&r('"EXISTS"')),null===e&&("exists"===t.substr(Gn,6)?(e="exists",Gn+=6):(e=null,0===Xn&&r('"exists"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(l=V(),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="exists",n.args=[t],n}(i,e[2])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[108] ExistsFunc"),e}function Wt(){var e,n,l,i,s,o,a;if(Xn++,o=Gn,a=Gn,"NOT"===t.substr(Gn,3)?(e="NOT",Gn+=3):(e=null,0===Xn&&r('"NOT"')),null===e&&("not"===t.substr(Gn,3)?(e="not",Gn+=3):(e=null,0===Xn&&r('"not"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if("EXISTS"===t.substr(Gn,6)?(l="EXISTS",Gn+=6):(l=null,0===Xn&&r('"EXISTS"')),null===l&&("exists"===t.substr(Gn,6)?(l="exists",Gn+=6):(l=null,0===Xn&&r('"exists"'))),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();null!==i?(s=V(),null!==s?e=[e,n,l,i,s]:(e=null,Gn=a)):(e=null,Gn=a)}else e=null,Gn=a;else e=null,Gn=a}else e=null,Gn=a;return null!==e&&(e=function(e,t){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="notexists",n.args=[t],n}(o,e[4])),null===e&&(Gn=o),Xn--,0===Xn&&null===e&&r("[109] NotExistsFunc"),e
}function Jt(){var e,n,l,i,s,o,a,u,c,p,h,f,d;if(Xn++,f=Gn,d=Gn,"COUNT"===t.substr(Gn,5)?(e="COUNT",Gn+=5):(e=null,0===Xn&&r('"COUNT"')),null===e&&("count"===t.substr(Gn,5)?(e="count",Gn+=5):(e=null,0===Xn&&r('"count"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if("DISTINCT"===t.substr(Gn,8)?(s="DISTINCT",Gn+=8):(s=null,0===Xn&&r('"DISTINCT"')),null===s&&("distinct"===t.substr(Gn,8)?(s="distinct",Gn+=8):(s=null,0===Xn&&r('"distinct"'))),s=null!==s?s:"",null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(42===t.charCodeAt(Gn)?(a="*",Gn++):(a=null,0===Xn&&r('"*"')),null===a&&(a=Pt()),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=t?"DISTINCT":t,r.expression=n,r}(f,e[4],e[6])),null===e&&(Gn=f),null===e){if(f=Gn,d=Gn,"SUM"===t.substr(Gn,3)?(e="SUM",Gn+=3):(e=null,0===Xn&&r('"SUM"')),null===e&&("sum"===t.substr(Gn,3)?(e="sum",Gn+=3):(e=null,0===Xn&&r('"sum"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if("DISTINCT"===t.substr(Gn,8)?(s="DISTINCT",Gn+=8):(s=null,0===Xn&&r('"DISTINCT"')),null===s&&("distinct"===t.substr(Gn,8)?(s="distinct",Gn+=8):(s=null,0===Xn&&r('"distinct"'))),s=null!==s?s:"",null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(a=Pt(),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=t?"DISTINCT":t,r.expression=n,r}(f,e[4],e[6])),null===e&&(Gn=f),null===e){if(f=Gn,d=Gn,"MIN"===t.substr(Gn,3)?(e="MIN",Gn+=3):(e=null,0===Xn&&r('"MIN"')),null===e&&("min"===t.substr(Gn,3)?(e="min",Gn+=3):(e=null,0===Xn&&r('"min"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if("DISTINCT"===t.substr(Gn,8)?(s="DISTINCT",Gn+=8):(s=null,0===Xn&&r('"DISTINCT"')),null===s&&("distinct"===t.substr(Gn,8)?(s="distinct",Gn+=8):(s=null,0===Xn&&r('"distinct"'))),s=null!==s?s:"",null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(a=Pt(),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=t?"DISTINCT":t,r.expression=n,r}(f,e[4],e[6])),null===e&&(Gn=f),null===e){if(f=Gn,d=Gn,"MAX"===t.substr(Gn,3)?(e="MAX",Gn+=3):(e=null,0===Xn&&r('"MAX"')),null===e&&("max"===t.substr(Gn,3)?(e="max",Gn+=3):(e=null,0===Xn&&r('"max"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if("DISTINCT"===t.substr(Gn,8)?(s="DISTINCT",Gn+=8):(s=null,0===Xn&&r('"DISTINCT"')),null===s&&("distinct"===t.substr(Gn,8)?(s="distinct",Gn+=8):(s=null,0===Xn&&r('"distinct"'))),s=null!==s?s:"",null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(a=Pt(),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;if(null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=t?"DISTINCT":t,r.expression=n,r}(f,e[4],e[6])),null===e&&(Gn=f),null===e){if(f=Gn,d=Gn,"AVG"===t.substr(Gn,3)?(e="AVG",Gn+=3):(e=null,0===Xn&&r('"AVG"')),null===e&&("avg"===t.substr(Gn,3)?(e="avg",Gn+=3):(e=null,0===Xn&&r('"avg"'))),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();if(null!==n)if(40===t.charCodeAt(Gn)?(l="(",Gn++):(l=null,0===Xn&&r('"("')),null!==l){for(i=[],s=Dn();null!==s;)i.push(s),s=Dn();if(null!==i)if("DISTINCT"===t.substr(Gn,8)?(s="DISTINCT",Gn+=8):(s=null,0===Xn&&r('"DISTINCT"')),null===s&&("distinct"===t.substr(Gn,8)?(s="distinct",Gn+=8):(s=null,0===Xn&&r('"distinct"'))),s=null!==s?s:"",null!==s){for(o=[],a=Dn();null!==a;)o.push(a),a=Dn();if(null!==o)if(a=Pt(),null!==a){for(u=[],c=Dn();null!==c;)u.push(c),c=Dn();if(null!==u)if(41===t.charCodeAt(Gn)?(c=")",Gn++):(c=null,0===Xn&&r('")"')),null!==c){for(p=[],h=Dn();null!==h;)p.push(h),h=Dn();null!==p?e=[e,n,l,i,s,o,a,u,c,p]:(e=null,Gn=d)}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;else e=null,Gn=d}else e=null,Gn=d;null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=t?"DISTINCT":t,r.expression=n,r}(f,e[4],e[6])),null===e&&(Gn=f)}}}}return Xn--,0===Xn&&null===e&&r("[110] Aggregate"),e}function Vt(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=ln(),null!==e?(t=at(),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t,n){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=t,r.args=n.value,r}(n,e[0],e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[117] IRIrefOrFunction"),e}function Yt(){var e,n,l,i,s,o;return Xn++,i=Gn,s=Gn,e=rn(),null!==e?(n=dn(),null===n&&(o=Gn,"^^"===t.substr(Gn,2)?(n="^^",Gn+=2):(n=null,0===Xn&&r('"^^"')),null!==n?(l=ln(),null!==l?n=[n,l]:(n=null,Gn=o)):(n=null,Gn=o)),n=null!==n?n:"",null!==n?e=[e,n]:(e=null,Gn=s)):(e=null,Gn=s),null!==e&&(e=function(e,t,n){return"string"==typeof n&&n.length>0?{token:"literal",value:t.value,lang:n.slice(1),type:null}:"object"==typeof n?(n.shift(),{token:"literal",value:t.value,lang:null,type:n[0]}):{token:"literal",value:t.value,lang:null,type:null}}(i,e[0],e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[112] RDFLiteral"),e}function Kt(){var e;return Xn++,e=Zt(),null===e&&(e=en(),null===e&&(e=tn())),Xn--,0===Xn&&null===e&&r("[113] NumericLiteral"),e}function Zt(){var e;return Xn++,e=yn(),null===e&&(e=gn(),null===e&&(e=vn())),Xn--,0===Xn&&null===e&&r("[114] NumericLiteralUnsigned"),e}function en(){var e;return Xn++,e=kn(),null===e&&(e=bn(),null===e&&(e=mn())),Xn--,0===Xn&&null===e&&r("[115] NumericLiteralPositive"),e}function tn(){var e;return Xn++,e=Sn(),null===e&&(e=wn(),null===e&&(e=xn())),Xn--,0===Xn&&null===e&&r("[116] NumericLiteralNegative"),e}function nn(){var e,n;return Xn++,n=Gn,"TRUE"===t.substr(Gn,4)?(e="TRUE",Gn+=4):(e=null,0===Xn&&r('"TRUE"')),null===e&&("true"===t.substr(Gn,4)?(e="true",Gn+=4):(e=null,0===Xn&&r('"true"'))),null!==e&&(e=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e}(n)),null===e&&(Gn=n),null===e&&(n=Gn,"FALSE"===t.substr(Gn,5)?(e="FALSE",Gn+=5):(e=null,0===Xn&&r('"FALSE"')),null===e&&("false"===t.substr(Gn,5)?(e="false",Gn+=5):(e=null,0===Xn&&r('"false"'))),null!==e&&(e=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e}(n)),null===e&&(Gn=n)),Xn--,0===Xn&&null===e&&r("[117] BooleanLiteral"),e}function rn(){var e,t;return Xn++,t=Gn,e=Tn(),null!==e&&(e=function(e,t){return{token:"string",value:t}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=An(),null!==e&&(e=function(e,t){return{token:"string",value:t}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=En(),null!==e&&(e=function(e,t){return{token:"string",value:t}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=Fn(),null!==e&&(e=function(e,t){return{token:"string",value:t}}(t,e)),null===e&&(Gn=t)))),Xn--,0===Xn&&null===e&&r("[118] String"),e}function ln(){var e,t;return Xn++,t=Gn,e=an(),null!==e&&(e=function(e,t){return{token:"uri",prefix:null,suffix:null,value:t}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=sn(),null!==e&&(e=function(e,t){return t}(t,e)),null===e&&(Gn=t)),Xn--,0===Xn&&null===e&&r("[119] IRIref"),e}function sn(){var e,t;return Xn++,t=Gn,e=cn(),null!==e&&(e=function(e,t){return{token:"uri",prefix:t[0],suffix:t[1],value:null}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=un(),null!==e&&(e=function(e,t){return{token:"uri",prefix:t,suffix:"",value:null}}(t,e)),null===e&&(Gn=t)),Xn--,0===Xn&&null===e&&r("[120] PrefixedName"),e}function on(){var e,t;return Xn++,t=Gn,e=pn(),null!==e&&(e=function(e,t){return{token:"blank",value:t}}(t,e)),null===e&&(Gn=t),null===e&&(t=Gn,e=Qn(),null!==e&&(e=function(){return Wn++,{token:"blank",value:"_:"+Wn}}(t)),null===e&&(Gn=t)),Xn--,0===Xn&&null===e&&r("[121] BlankNode"),e}function an(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,60===t.charCodeAt(Gn)?(e="<",Gn++):(e=null,0===Xn&&r('"<"')),null!==e){for(n=[],/^[^<>"{}|^`\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^<>"{}|^`\\\\]'));null!==l;)n.push(l),/^[^<>"{}|^`\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^<>"{}|^`\\\\]'));null!==n?(62===t.charCodeAt(Gn)?(l=">",Gn++):(l=null,0===Xn&&r('">"')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return t.join("")}(i,e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[122] IRI_REF"),e}function un(){var e,n,l,i;return Xn++,l=Gn,i=Gn,e=jn(),e=null!==e?e:"",null!==e?(58===t.charCodeAt(Gn)?(n=":",Gn++):(n=null,0===Xn&&r('":"')),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[0])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[123] PNAME_NS"),e}function cn(){var e,t,n,l;return Xn++,n=Gn,l=Gn,e=un(),null!==e?(t=Mn(),null!==t?e=[e,t]:(e=null,Gn=l)):(e=null,Gn=l),null!==e&&(e=function(e,t,n){return[t,n]}(n,e[0],e[1])),null===e&&(Gn=n),Xn--,0===Xn&&null===e&&r("[124] PNAME_LN"),e}function pn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,"_:"===t.substr(Gn,2)?(e="_:",Gn+=2):(e=null,0===Xn&&r('"_:"')),null!==e?(n=Mn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[125] BLANK_NODE_LABEL"),e}function hn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,63===t.charCodeAt(Gn)?(e="?",Gn++):(e=null,0===Xn&&r('"?"')),null!==e?(n=On(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[126] VAR1"),e}function fn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,36===t.charCodeAt(Gn)?(e="$",Gn++):(e=null,0===Xn&&r('"$"')),null!==e?(n=On(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[127] VAR2"),e}function dn(){var e,n,l,i,s,o,a,u,c;if(Xn++,a=Gn,u=Gn,64===t.charCodeAt(Gn)?(e="@",Gn++):(e=null,0===Xn&&r('"@"')),null!==e){if(/^[a-zA-Z]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[a-zA-Z]")),null!==l)for(n=[];null!==l;)n.push(l),/^[a-zA-Z]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[a-zA-Z]"));else n=null;if(null!==n){if(l=[],c=Gn,45===t.charCodeAt(Gn)?(i="-",Gn++):(i=null,0===Xn&&r('"-"')),null!==i){if(/^[a-zA-Z0-9]/.test(t.charAt(Gn))?(o=t.charAt(Gn),Gn++):(o=null,0===Xn&&r("[a-zA-Z0-9]")),null!==o)for(s=[];null!==o;)s.push(o),/^[a-zA-Z0-9]/.test(t.charAt(Gn))?(o=t.charAt(Gn),Gn++):(o=null,0===Xn&&r("[a-zA-Z0-9]"));else s=null;null!==s?i=[i,s]:(i=null,Gn=c)}else i=null,Gn=c;for(;null!==i;)if(l.push(i),c=Gn,45===t.charCodeAt(Gn)?(i="-",Gn++):(i=null,0===Xn&&r('"-"')),null!==i){if(/^[a-zA-Z0-9]/.test(t.charAt(Gn))?(o=t.charAt(Gn),Gn++):(o=null,0===Xn&&r("[a-zA-Z0-9]")),null!==o)for(s=[];null!==o;)s.push(o),/^[a-zA-Z0-9]/.test(t.charAt(Gn))?(o=t.charAt(Gn),Gn++):(o=null,0===Xn&&r("[a-zA-Z0-9]"));else s=null;null!==s?i=[i,s]:(i=null,Gn=c)}else i=null,Gn=c;null!==l?e=[e,n,l]:(e=null,Gn=u)}else e=null,Gn=u}else e=null,Gn=u;return null!==e&&(e=function(e,t,n){return 0===n.length?("@"+t.join("")).toLowerCase():("@"+t.join("")+"-"+n[0][1].join("")).toLowerCase()}(a,e[1],e[2])),null===e&&(Gn=a),Xn--,0===Xn&&null===e&&r("[128] LANGTAG"),e}function vn(){var e,n,l;if(Xn++,l=Gn,/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]")),null!==n)for(e=[];null!==n;)e.push(n),/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]"));else e=null;return null!==e&&(e=function(e,t){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#integer",n.value=$n(t),n}(l,e)),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[129] INTEGER"),e}function gn(){var e,n,l,i,s,o;if(Xn++,s=Gn,o=Gn,/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]")),null!==n)for(e=[];null!==n;)e.push(n),/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]"));else e=null;if(null!==e)if(46===t.charCodeAt(Gn)?(n=".",Gn++):(n=null,0===Xn&&r('"."')),null!==n){for(l=[],/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]"));null!==i;)l.push(i),/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]"));null!==l?e=[e,n,l]:(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;if(null!==e&&(e=function(e,t,n,r){var l={};return l.token="literal",l.lang=null,l.type="http://www.w3.org/2001/XMLSchema#decimal",l.value=$n([t,n,r]),l}(s,e[0],e[1],e[2])),null===e&&(Gn=s),null===e){if(s=Gn,o=Gn,46===t.charCodeAt(Gn)?(e=".",Gn++):(e=null,0===Xn&&r('"."')),null!==e){if(/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]")),null!==l)for(n=[];null!==l;)n.push(l),/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]"));else n=null;null!==n?e=[e,n]:(e=null,Gn=o)}else e=null,Gn=o;null!==e&&(e=function(e,t,n){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=$n([t,n]),r}(s,e[0],e[1])),null===e&&(Gn=s)}return Xn--,0===Xn&&null===e&&r("[130] DECIMAL"),e}function yn(){var e,n,l,i,s,o;if(Xn++,s=Gn,o=Gn,/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]")),null!==n)for(e=[];null!==n;)e.push(n),/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]"));else e=null;if(null!==e)if(46===t.charCodeAt(Gn)?(n=".",Gn++):(n=null,0===Xn&&r('"."')),null!==n){for(l=[],/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]"));null!==i;)l.push(i),/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]"));null!==l?(i=Cn(),null!==i?e=[e,n,l,i]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;if(null!==e&&(e=function(e,t,n,r,l){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=$n([t,n,r,l]),i}(s,e[0],e[1],e[2],e[3])),null===e&&(Gn=s),null===e){if(s=Gn,o=Gn,46===t.charCodeAt(Gn)?(e=".",Gn++):(e=null,0===Xn&&r('"."')),null!==e){if(/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]")),null!==l)for(n=[];null!==l;)n.push(l),/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]"));else n=null;null!==n?(l=Cn(),null!==l?e=[e,n,l]:(e=null,Gn=o)):(e=null,Gn=o)}else e=null,Gn=o;if(null!==e&&(e=function(e,t,n,r){var l={};return l.token="literal",l.lang=null,l.type="http://www.w3.org/2001/XMLSchema#double",l.value=$n([t,n,r]),l}(s,e[0],e[1],e[2])),null===e&&(Gn=s),null===e){if(s=Gn,o=Gn,/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]")),null!==n)for(e=[];null!==n;)e.push(n),/^[0-9]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[0-9]"));else e=null;null!==e?(n=Cn(),null!==n?e=[e,n]:(e=null,Gn=o)):(e=null,Gn=o),null!==e&&(e=function(e,t,n){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=$n([t,n]),r}(s,e[0],e[1])),null===e&&(Gn=s)}}return Xn--,0===Xn&&null===e&&r("[131] DOUBLE"),e}function mn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,43===t.charCodeAt(Gn)?(e="+",Gn++):(e=null,0===Xn&&r('"+"')),null!==e?(n=vn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="+"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[132] INTEGER_POSITIVE"),e}function bn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,43===t.charCodeAt(Gn)?(e="+",Gn++):(e=null,0===Xn&&r('"+"')),null!==e?(n=gn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="+"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[133] DECIMAL_POSITIVE"),e}function kn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,43===t.charCodeAt(Gn)?(e="+",Gn++):(e=null,0===Xn&&r('"+"')),null!==e?(n=yn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="+"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[134] DOUBLE_POSITIVE"),e}function xn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,45===t.charCodeAt(Gn)?(e="-",Gn++):(e=null,0===Xn&&r('"-"')),null!==e?(n=vn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="-"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[135] INTEGER_NEGATIVE"),e}function wn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,45===t.charCodeAt(Gn)?(e="-",Gn++):(e=null,0===Xn&&r('"-"')),null!==e?(n=gn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="-"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[136] DECIMAL_NEGATIVE"),e}function Sn(){var e,n,l,i;return Xn++,l=Gn,i=Gn,45===t.charCodeAt(Gn)?(e="-",Gn++):(e=null,0===Xn&&r('"-"')),null!==e?(n=yn(),null!==n?e=[e,n]:(e=null,Gn=i)):(e=null,Gn=i),null!==e&&(e=function(e,t){return t.value="-"+t.value,t}(l,e[1])),null===e&&(Gn=l),Xn--,0===Xn&&null===e&&r("[137] DOUBLE_NEGATIVE"),e}function Cn(){var e,n,l,i,s,o;if(Xn++,s=Gn,o=Gn,/^[eE]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[eE]")),null!==e)if(/^[+\-]/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[+\\-]")),n=null!==n?n:"",null!==n){if(/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]")),null!==i)for(l=[];null!==i;)l.push(i),/^[0-9]/.test(t.charAt(Gn))?(i=t.charAt(Gn),Gn++):(i=null,0===Xn&&r("[0-9]"));else l=null;null!==l?e=[e,n,l]:(e=null,Gn=o)}else e=null,Gn=o;else e=null,Gn=o;return null!==e&&(e=function(e,t,n,r){return $n([t,n,r])}(s,e[0],e[1],e[2])),null===e&&(Gn=s),Xn--,0===Xn&&null===e&&r("[138] EXPONENT"),e}function En(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,39===t.charCodeAt(Gn)?(e="'",Gn++):(e=null,0===Xn&&r('"\'"')),null!==e){for(n=[],/^[^'\\\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^'\\\\\\n\\r]")),null===l&&(l=_n());null!==l;)n.push(l),/^[^'\\\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^'\\\\\\n\\r]")),null===l&&(l=_n());null!==n?(39===t.charCodeAt(Gn)?(l="'",Gn++):(l=null,0===Xn&&r('"\'"')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return $n(t)}(i,e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[139] STRING_LITERAL1"),e}function Fn(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,34===t.charCodeAt(Gn)?(e='"',Gn++):(e=null,0===Xn&&r('"\\""')),null!==e){for(n=[],/^[^"\\\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^"\\\\\\n\\r]')),null===l&&(l=_n());null!==l;)n.push(l),/^[^"\\\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^"\\\\\\n\\r]')),null===l&&(l=_n());null!==n?(34===t.charCodeAt(Gn)?(l='"',Gn++):(l=null,0===Xn&&r('"\\""')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return $n(t)}(i,e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[140] STRING_LITERAL2"),e}function Tn(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,"'''"===t.substr(Gn,3)?(e="'''",Gn+=3):(e=null,0===Xn&&r("\"'''\"")),null!==e){for(n=[],/^[^'\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^'\\\\]")),null===l&&(l=_n());null!==l;)n.push(l),/^[^'\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^'\\\\]")),null===l&&(l=_n());null!==n?("'''"===t.substr(Gn,3)?(l="'''",Gn+=3):(l=null,0===Xn&&r("\"'''\"")),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return $n(t)}(i,e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[141] STRING_LITERAL_LONG1"),e}function An(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,'"""'===t.substr(Gn,3)?(e='"""',Gn+=3):(e=null,0===Xn&&r('"\\"\\"\\""')),null!==e){for(n=[],/^[^"\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^"\\\\]')),null===l&&(l=_n());null!==l;)n.push(l),/^[^"\\]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r('[^"\\\\]')),null===l&&(l=_n());null!==n?('"""'===t.substr(Gn,3)?(l='"""',Gn+=3):(l=null,0===Xn&&r('"\\"\\"\\""')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t){return $n(t)}(i,e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[142] STRING_LITERAL_LONG2"),e}function _n(){var e,n,l;return Xn++,l=Gn,92===t.charCodeAt(Gn)?(e="\\",Gn++):(e=null,0===Xn&&r('"\\\\"')),null!==e?(/^[tbnrf"']/.test(t.charAt(Gn))?(n=t.charAt(Gn),Gn++):(n=null,0===Xn&&r("[tbnrf\"']")),null!==n?e=[e,n]:(e=null,Gn=l)):(e=null,Gn=l),Xn--,0===Xn&&null===e&&r("[143] ECHAR"),e}function Nn(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,40===t.charCodeAt(Gn)?(e="(",Gn++):(e=null,0===Xn&&r('"("')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(41===t.charCodeAt(Gn)?(l=")",Gn++):(l=null,0===Xn&&r('")"')),null!==l?e=[e,n,l]:(e=null,Gn=s)):(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}}(i)),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[144] NIL"),e}function Dn(){var e;return Xn++,/^[ ]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[ ]")),null===e&&(/^[\t]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\t]")),null===e&&(/^[\r]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\r]")),null===e&&(/^[\n]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\n]")),null===e&&(e=In())))),Xn--,0===Xn&&null===e&&r("[145] WS"),e}function In(){var e,n,l,i;if(Xn++,i=Gn,35===t.charCodeAt(Gn)?(e="#",Gn++):(e=null,0===Xn&&r('"#"')),null!==e){for(n=[],/^[^\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^\\n\\r]"));null!==l;)n.push(l),/^[^\n\r]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[^\\n\\r]"));null!==n?e=[e,n]:(e=null,Gn=i)}else e=null,Gn=i;return Xn--,0===Xn&&null===e&&r(" COMMENT"),e}function Qn(){var e,n,l,i;if(Xn++,i=Gn,91===t.charCodeAt(Gn)?(e="[",Gn++):(e=null,0===Xn&&r('"["')),null!==e){for(n=[],l=Dn();null!==l;)n.push(l),l=Dn();null!==n?(93===t.charCodeAt(Gn)?(l="]",Gn++):(l=null,0===Xn&&r('"]"')),null!==l?e=[e,n,l]:(e=null,Gn=i)):(e=null,Gn=i)}else e=null,Gn=i;return Xn--,0===Xn&&null===e&&r("[146] ANON"),e}function Ln(){var e;return Xn++,/^[A-Z]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[A-Z]")),null===e&&(/^[a-z]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[a-z]")),null===e&&(/^[\xC0-\xD6]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\xC0-\\xD6]")),null===e&&(/^[\xD8-\xF6]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\xD8-\\xF6]")),null===e&&(/^[\xF8-\u02FF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\xF8-\\u02FF]")),null===e&&(/^[\u0370-\u037D]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u0370-\\u037D]")),null===e&&(/^[\u037F-\u1FFF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u037F-\\u1FFF]")),null===e&&(/^[\u200C-\u200D]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u200C-\\u200D]")),null===e&&(/^[\u2070-\u218F]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u2070-\\u218F]")),null===e&&(/^[\u2C00-\u2FEF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u2C00-\\u2FEF]")),null===e&&(/^[\u3001-\uD7FF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u3001-\\uD7FF]")),null===e&&(/^[\uF900-\uFDCF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\uF900-\\uFDCF]")),null===e&&(/^[\uFDF0-\uFFFD]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\uFDF0-\\uFFFD]")),null===e&&(/^[\u1000-\uEFFF]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u1000-\\uEFFF]"))))))))))))))),Xn--,0===Xn&&null===e&&r("[147] PN_CHARS_BASE"),e}function Rn(){var e;return Xn++,e=Ln(),null===e&&(95===t.charCodeAt(Gn)?(e="_",Gn++):(e=null,0===Xn&&r('"_"'))),Xn--,0===Xn&&null===e&&r("[148] PN_CHARS_U"),e}function On(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,e=Rn(),null===e&&(/^[0-9]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[0-9]"))),null!==e){for(n=[],l=Rn(),null===l&&(/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]")),null===l&&(/^[\xB7]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\xB7]")),null===l&&(/^[\u0300-\u036F]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\u0300-\\u036F]")),null===l&&(/^[\u203F-\u2040]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\u203F-\\u2040]"))))));null!==l;)n.push(l),l=Rn(),null===l&&(/^[0-9]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[0-9]")),null===l&&(/^[\xB7]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\xB7]")),null===l&&(/^[\u0300-\u036F]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\u0300-\\u036F]")),null===l&&(/^[\u203F-\u2040]/.test(t.charAt(Gn))?(l=t.charAt(Gn),Gn++):(l=null,0===Xn&&r("[\\u203F-\\u2040]"))))));null!==n?e=[e,n]:(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t,n){return t+n.join("")}(i,e[0],e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[149] VARNAME"),e}function Pn(){var e;return Xn++,e=Rn(),null===e&&(45===t.charCodeAt(Gn)?(e="-",Gn++):(e=null,0===Xn&&r('"-"')),null===e&&(/^[0-9]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[0-9]")),null===e&&(/^[\xB7]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\xB7]")),null===e&&(/^[\u0300-\u036F]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u0300-\\u036F]")),null===e&&(/^[\u203F-\u2040]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[\\u203F-\\u2040]"))))))),Xn--,0===Xn&&null===e&&r("[150] PN_CHARS"),e}function jn(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,e=Ln(),null!==e){for(n=[],l=Pn(),null===l&&(46===t.charCodeAt(Gn)?(l=".",Gn++):(l=null,0===Xn&&r('"."')));null!==l;)n.push(l),l=Pn(),null===l&&(46===t.charCodeAt(Gn)?(l=".",Gn++):(l=null,0===Xn&&r('"."')));null!==n?e=[e,n]:(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t,n){if("."==n[n.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");return t+n.join("")}(i,e[0],e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[151] PN_PREFIX"),e}function Mn(){var e,n,l,i,s;if(Xn++,i=Gn,s=Gn,e=Rn(),null===e&&(/^[0-9]/.test(t.charAt(Gn))?(e=t.charAt(Gn),Gn++):(e=null,0===Xn&&r("[0-9]"))),null!==e){for(n=[],l=Pn();null!==l;)n.push(l),l=Pn();null!==n?e=[e,n]:(e=null,Gn=s)}else e=null,Gn=s;return null!==e&&(e=function(e,t,n){return t+n.join("")}(i,e[0],e[1])),null===e&&(Gn=i),Xn--,0===Xn&&null===e&&r("[152] PN_LOCAL"),e}function Bn(e){e.sort();for(var t=null,n=[],r=0;e.length>r;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function Hn(){for(var e=1,n=1,r=!1,l=0;Math.max(Gn,zn)>l;l++){var i=t.charAt(l);"\n"===i?(r||e++,n=1,r=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(e++,n=1,r=!0):(n++,r=!1)}return{line:e,column:n}}var Un={SPARQL:l,Query:i,Prologue:s,BaseDecl:o,PrefixDecl:a,SelectQuery:u,SubSelect:c,SelectClause:p,ConstructQuery:h,DescribeQuery:f,AskQuery:d,DatasetClause:v,DefaultGraphClause:g,NamedGraphClause:y,WhereClause:m,SolutionModifier:b,GroupClause:k,GroupCondition:x,HavingClause:w,OrderClause:S,OrderCondition:C,LimitOffsetClauses:E,LimitClause:F,OffsetClause:T,BindingsClause:A,BindingValue:_,Update:N,Update1:D,Load:I,Clear:Q,Drop:L,Create:R,InsertData:O,DeleteData:P,DeleteWhere:j,Modify:M,DeleteClause:B,InsertClause:H,UsingClause:U,GraphRef:G,GraphRefAll:X,QuadPattern:z,QuadData:q,Quads:$,QuadsNotTriples:W,TriplesTemplate:J,GroupGraphPattern:V,GroupGraphPatternSub:Y,TriplesBlock:K,GraphPatternNotTriples:Z,OptionalGraphPattern:et,GraphGraphPattern:tt,ServiceGraphPattern:nt,MinusGraphPattern:rt,GroupOrUnionGraphPattern:lt,Filter:it,Constraint:st,FunctionCall:ot,ArgList:at,ExpressionList:ut,ConstructTemplate:ct,ConstructTriples:pt,TriplesSameSubject:ht,PropertyListNotEmpty:ft,PropertyList:dt,ObjectList:vt,Verb:gt,TriplesSameSubjectPath:yt,PropertyListNotEmptyPath:mt,PropertyListPath:bt,VerbPath:kt,PathAlternative:xt,PathSequence:wt,PathElt:St,PathEltOrInverse:Ct,PathMod:Et,PathPrimary:Ft,PathNegatedPropertySet:Tt,PathOneInPropertySet:At,TriplesNode:_t,BlankNodePropertyList:Nt,Collection:Dt,GraphNode:It,VarOrTerm:Qt,VarOrIRIref:Lt,Var:Rt,GraphTerm:Ot,ConditionalOrExpression:Pt,ConditionalAndExpression:jt,RelationalExpression:Mt,AdditiveExpression:Bt,MultiplicativeExpression:Ht,UnaryExpression:Ut,PrimaryExpression:Gt,BrackettedExpression:Xt,BuiltInCall:zt,RegexExpression:qt,ExistsFunc:$t,NotExistsFunc:Wt,Aggregate:Jt,IRIrefOrFunction:Vt,RDFLiteral:Yt,NumericLiteral:Kt,NumericLiteralUnsigned:Zt,NumericLiteralPositive:en,NumericLiteralNegative:tn,BooleanLiteral:nn,String:rn,IRIref:ln,PrefixedName:sn,BlankNode:on,IRI_REF:an,PNAME_NS:un,PNAME_LN:cn,BLANK_NODE_LABEL:pn,VAR1:hn,VAR2:fn,LANGTAG:dn,INTEGER:vn,DECIMAL:gn,DOUBLE:yn,INTEGER_POSITIVE:mn,DECIMAL_POSITIVE:bn,DOUBLE_POSITIVE:kn,INTEGER_NEGATIVE:xn,DECIMAL_NEGATIVE:wn,DOUBLE_NEGATIVE:Sn,EXPONENT:Cn,STRING_LITERAL1:En,STRING_LITERAL2:Fn,STRING_LITERAL_LONG1:Tn,STRING_LITERAL_LONG2:An,ECHAR:_n,NIL:Nn,WS:Dn,COMMENT:In,ANON:Qn,PN_CHARS_BASE:Ln,PN_CHARS_U:Rn,VARNAME:On,PN_CHARS:Pn,PN_PREFIX:jn,PN_LOCAL:Mn};if(void 0!==n){if(void 0===Un[n])throw Error("Invalid rule name: "+e(n)+".")}else n="SPARQL";var Gn=0,Xn=0,zn=0,qn=[],$n=function(e){for(var t="",n=0;e.length>n;n++)t+="string"==typeof e[n]?e[n]:e[n].join("");return t},Wn=0,Jn={},Vn=function(e,t){Jn[e]=t},Yn=function(e){Jn[null]=e},Kn=function(e){for(var t="",n=0;e.length>n;n++)t+=e[n];return t.toUpperCase()},Zn=Un[n]();if(null===Zn||Gn!==t.length){var er=Math.max(Gn,zn),tr=t.length>er?t.charAt(er):null,nr=Hn();throw new this.SyntaxError(Bn(qn),tr,er,nr.line,nr.column)}return Zn},toSource:function(){return this._source}};return t.SyntaxError=function(t,n,r,l,i){function s(t,n){var r,l;switch(t.length){case 0:r="end of input";break;case 1:r=t[0];break;default:r=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return l=n?e(n):"end of input","Expected "+r+" but "+l+" found."}this.name="SyntaxError",this.expected=t,this.found=n,this.message=s(t,n),this.offset=r,this.line=l,this.column=i},t.SyntaxError.prototype=Error.prototype,t}();var TabulatorN3Parser=function(){var e={};return e.RDFSink_uniqueURI=function(){return"https://github.com/antoniogarrote/rdfstore-js/vocabulary/unique#"
},e.graph=null,e.Util={ArrayIndexOf:function(e,t,n){n||(n=0);var r=e.length;for(0>n&&(n=r+n);r>n;n++)if(e[n]===t)return n;return-1}},e.Util.uri===void 0&&(e.Util.uri={}),e.Util.uri.join=function(e,t){e=e||"";var n=t.indexOf("#");if(n>0&&(t=t.slice(0,n)),0==e.length)return t;if(0==e.indexOf("#"))return t+e;var r=e.indexOf(":");if(r>=0)return e;var l=t.indexOf(":");if(""==t)return e;if(0>l)return alert("Invalid base: "+t+" in join with "+e),e;var i=t.slice(0,l+1);if(0==e.indexOf("//"))return i+e;if(t.indexOf("//",l)==l+1){var s=t.indexOf("/",l+3);if(0>s)return t.length-l-3>0?t+"/"+e:i+e}else{var s=t.indexOf("/",l+1);if(0>s)return t.length-l-1>0?t+"/"+e:i+e}if(0==e.indexOf("/"))return t.slice(0,s)+e;var o=t.slice(s),a=o.lastIndexOf("/");if(0>a)return i+e;for(a>=0&&o.length-1>a&&(o=o.slice(0,a+1)),o+=e;o.match(/[^\/]*\/\.\.\//);)o=o.replace(/[^\/]*\/\.\.\//,"");return o=o.replace(/\.\//g,""),o=o.replace(/\/\.$/,"/"),t.slice(0,s)+o},e.Empty=function(){return this},e.Empty.prototype.termType="empty",e.Empty.prototype.toString=function(){return"()"},e.Empty.prototype.toQuads=function(){return{uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}},e.Symbol=function(e){return this.uri=e,this.value=e,this},e.Symbol.prototype.termType="symbol",e.Symbol.prototype.toString=function(){return"<"+this.uri+">"},e.Symbol.prototype.toQuads=function(){return{token:"uri",prefix:null,suffix:null,value:this.uri}},e.Symbol.prototype.XSDboolean=new e.Symbol("http://www.w3.org/2001/XMLSchema#boolean"),e.Symbol.prototype.XSDdecimal=new e.Symbol("http://www.w3.org/2001/XMLSchema#decimal"),e.Symbol.prototype.XSDfloat=new e.Symbol("http://www.w3.org/2001/XMLSchema#float"),e.Symbol.prototype.XSDinteger=new e.Symbol("http://www.w3.org/2001/XMLSchema#integer"),e.Symbol.prototype.XSDdateTime=new e.Symbol("http://www.w3.org/2001/XMLSchema#dateTime"),e.Symbol.prototype.integer=new e.Symbol("http://www.w3.org/2001/XMLSchema#integer"),e.NextId!==void 0?e.log.error("Attempt to re-zero existing blank node id counter at "+e.NextId):e.NextId=0,e.NTAnonymousNodePrefix="_:",e.BlankNode=function(t){return this.id=e.NextId++,this.value=t?t:""+this.id,this},e.BlankNode.prototype.termType="bnode",e.BlankNode.prototype.toString=function(){return e.NTAnonymousNodePrefix+this.id},e.BlankNode.prototype.toString=e.BlankNode.prototype.toNT,e.BlankNode.prototype.toQuads=function(){return{blank:e.NTAnonymousNodePrefix+this.id}},e.Literal=function(e,t,n){return this.value=e,this.lang=""==t||null==t?void 0:t,this.datatype=null==n?void 0:n,this},e.Literal.prototype.termType="literal",e.Literal.prototype.toNT=function(){var e=this.value;if("string"!=typeof e){if("number"==typeof e)return""+e;throw Error("Value of RDF literal is not string: "+e)}return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\"/g,'\\"'),e=e.replace(/\n/g,"\\n"),e='"'+e+'"',this.datatype&&(e=e+"^^"+this.datatype.toNT()),this.lang&&(e=e+"@"+this.lang),e},e.Literal.prototype.toQuads=function(){var e=this.value;if("string"!=typeof e){if("number"==typeof e)return""+e;throw Error("Value of RDF literal is not string: "+e)}return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\"/g,'\\"'),e=e.replace(/\n/g,"\\n"),e='"'+e+'"',this.datatype&&(e=e+"^^<"+this.datatype.value+">"),this.lang&&(e=e+"@"+this.lang),{literal:e}},e.Collection=function(){this.id=e.NextId++,this.elements=[],this.closed=!1},e.Collection.idCounter=0,e.Collection.prototype.termType="collection",e.Collection.prototype.toNT=function(){return e.NTAnonymousNodePrefix+this.id},e.Collection.prototype.toQuads=function(){var t=[],n="_:list"+e.Collection.idCounter;e.Collection.idCounter++;for(var r,l={uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},i={uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},s={uri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"},o={blank:n+"p"+a},a=0;this.elements.length>a;a++)r=o,o=this.elements.length-1>a?{blank:n+"p"+(a+1)}:s,t.push({subject:r,predicate:l,object:this.elements[a].toQuads(),graph:e.graph}),t.push({subject:r,predicate:i,object:o,graph:e.graph});return t},e.Collection.prototype.append=function(e){this.elements.push(e)},e.Collection.prototype.unshift=function(e){this.elements.unshift(e)},e.Collection.prototype.shift=function(){return this.elements.shift()},e.Collection.prototype.close=function(){this.closed=!0},e.term=function(t){if("object"==typeof t){if(t instanceof Date){var n=function(e){return(""+(100+e)).slice(1,3)};return new e.Literal(""+t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"Z",void 0,e.Symbol.prototype.XSDdateTime)}if(t instanceof Array){for(var r=new e.Collection,l=0;t.length>l;l++)r.append(e.term(t[l]));return r}return t}if("string"==typeof t)return new e.Literal(t);if("number"==typeof t){var i;return i=(""+t).indexOf("e")>=0?e.Symbol.prototype.XSDfloat:(""+t).indexOf(".")>=0?e.Symbol.prototype.XSDdecimal:e.Symbol.prototype.XSDinteger,new e.Literal(t,void 0,i)}if("boolean"==typeof t)return new e.Literal(t?"1":"0",void 0,e.Symbol.prototype.XSDboolean);if(t===void 0)return void 0;throw"Can't make term from "+t+" of type "+typeof t},e.Statement=function(t,n,r,l){return this.subject=e.term(t),this.predicate=e.term(n),this.object=e.term(r),l!==void 0&&(this.why=l),this},e.st=function(t,n,r,l){return new e.Statement(t,n,r,l)},e.Statement.prototype.toNT=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" ."},e.Statement.prototype.toQuads=function(){var t=this.object.toQuads();if(t.constructor===Array){var n=t[0].subject;return t.push({subject:this.subject.toQuads(),predicate:this.predicate.toQuads(),object:n,graph:e.graph}),t}return{subject:this.subject.toQuads(),predicate:this.predicate.toQuads(),object:this.object.toQuads(),graph:e.graph}},e.Formula=function(){return this.statements=[],this},e.Formula.prototype.termType="formula",e.Formula.prototype.toNT=function(){return"{"+this.statements.join("\n")+"}"},e.Formula.prototype.toQuads=function(){for(var e=[],t=0;this.statements.length>t;t++){var n=this.statements[t].toQuads();n.constructor===Array?e=e.concat(n):e.push(n)}return e},e.Formula.prototype.add=function(t,n,r,l){this.statements.push(new e.Statement(t,n,r,l))},e.Formula.prototype.sym=function(t){return new e.Symbol(t)},e.sym=function(t){return new e.Symbol(t)},e.Formula.prototype.literal=function(t,n,r){if(null!=r&&null!=r.value&&-1===r.value.indexOf("http://"))for(var l in this.namespaces)if(0===r.value.indexOf(l)){r.value=this.namespaces[l]+r.value.split(l+":")[1];break}return new e.Literal(""+t,n,r)},e.lit=e.Formula.prototype.literal,e.Formula.prototype.bnode=function(t){return new e.BlankNode(t)},e.Formula.prototype.formula=function(){return new e.Formula},e.Formula.prototype.collection=function(){return new e.Collection},e.Formula.prototype.list=function(t){if(li=new e.Collection,t)for(var n=0;t.length>n;n++)li.append(t[n]);return li},e.Graph=function(){return new e.IndexedFormula},e.N3Parser=function(){function t(e){return encodeURI(e)}function n(e,t,n,l,i,s,o,a){return new r(e,t,n,l,i,s,o,a)}function r(t,n,r,l,i,s,o,a){n===void 0&&(n=null),r===void 0&&(r=""),l===void 0&&(l=null),i===void 0&&(i=""),s===void 0&&(s=null),o===void 0&&(o=""),a===void 0&&(a=null),this._bindings=new c([]),this._flags=o,r&&""!=r&&(g(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=t,i&&t.setGenPrefix(i),this._thisDoc=r,this.source=t.sym(r),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new u(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new c([]),this._variables=new c([]),this._parentVariables=new c([]),this._reason=a,this._reason2=null,k&&(this._reason2=why_BecauseOfData(t.sym(r),this._reason)),this._baseURI=l?l:r?r:null,g(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._genPrefix=this._thisDoc?this._thisDoc+"#_g":e.RDFSink_uniqueURI()),this._formula=null==n?this._thisDoc?t.formula(r+"#_formula"):t.formula():n,this._context=this._formula,this._parentContext=null}function l(e,t,n,r,l){this._str=n.encode("utf-8"),this._str=n,this._i=r,this._why=l,this.lines=t,this._uri=e}function i(e,t,n,r,l){return"Line "+(t+1)+" of <"+e+">: Bad syntax: "+l+'\nat: "'+h(n,r,r+30)+'"'}var s={encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;e.length>n;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(192|r>>6),t+=String.fromCharCode(128|63&r)):(t+=String.fromCharCode(224|r>>12),t+=String.fromCharCode(128|63&r>>6),t+=String.fromCharCode(128|63&r))}return t},decode:function(e){for(var t="",n=0;e.length>n;){var r=e.charCodeAt(n);128>r?(t+=String.fromCharCode(r),n++):r>191&&224>r?(t+=String.fromCharCode((31&r)<<6|63&e.charCodeAt(n+1)),n+=2):(t+=String.fromCharCode((15&r)<<12|(63&e.charCodeAt(n+1))<<6|63&e.charCodeAt(n+2)),n+=3)}return t}},o="http://www.w3.org/2000/10/swap/log#",a=function(e){return e},u=function(e){return e},c=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},p=function(e){return e.length},h=function(e,t,n){if(e.slice===void 0)throw"@@ mising.js: No .slice function for "+e+" of type "+typeof e;return n===void 0||null==n?e.slice(t):e.slice(t,n)},f=Error("dummy error stop iteration"),d=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw f;return this.li[this.last++]},this},v=function(e,t){return e.indexOf(t)},g=function(e,t){if(!e){if(t)throw"python Assertion failed: "+t;throw"(python) Assertion failed."}},y=function(e){return String.fromCharCode(e)};String.prototype.encode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8";return s.encode(this)},String.prototype.decode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8";return this};var m=function(t,n){return e.Util.uri.join(n,t)},b=null,k=0,x=0,w=function(){},S="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",C="http://www.w3.org/2002/07/owl#sameAs",E="#",F="http://www.w3.org/2001/XMLSchema#integer",T="http://www.w3.org/2001/XMLSchema#double",A="http://www.w3.org/2001/XMLSchema#decimal",_="	\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",N=_+":";RegExp("^[ \\t]*(#[^\\n]*)?\\r?\\n","g"),RegExp("^[ \\t]*(#[^\\n]*)?$","g"),RegExp("^[ \\t]*","g"),RegExp("^[-+]?[0-9]+","g");var D=RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g");RegExp("^[0-9]+","g");var I=RegExp('[\\\\\\r\\n\\"]',"g"),Q=RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)?","g");return r.prototype.here=function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)},r.prototype.formula=function(){return this._formula},r.prototype.loadStream=function(e){return this.loadBuf(e.read())},r.prototype.loadBuf=function(e){return this.startDoc(),this.feed(e),this.endDoc()},r.prototype.feed=function(e){var t=e.decode("utf-8"),n=[],r=t.length,l=0,i=524288;numChunks=r/i;for(var s=0;numChunks+1>s;s++)r>l+i?n.push(t.substring(l,l+i)):n.push(t.substring(l,r)),l+=i;for(var o=0,s=0;s>=0;){var a=this.skipSpace(n[o],s);if(0>a){if(o==n.length-1)return;o++,s=0}else{var s=a;try{s=this.directiveOrStatement(n[o],a)}catch(u){if(o==n.length-1)throw u;a=s,s=-1}if(0>s){var c=n[o].substring(a,n[o].length);o++,n[o]=c+n[o],s=0}}}},r.prototype.directiveOrStatement=function(e,t){var n=this.skipSpace(e,t);if(0>n)return n;var r=this.directive(e,n);if(r>=0)return this.checkDot(e,r);var r=this.statement(e,n);return r>=0?this.checkDot(e,r):r},r.prototype.tok=function(t,n,r){if("@"==h(n,r,r+1))var r=r+1;else if(0>e.Util.ArrayIndexOf(this.keywords,t))return-1;var l=r+p(t);return h(n,r,l)==t&&_.indexOf(n.charAt(l))>=0?l:-1},r.prototype.directive=function(n,r){var l=this.skipSpace(n,r);if(0>l)return l;var s=new u([]),l=this.tok("bind",n,r);if(l>0)throw i(this._thisDoc,this.lines,n,r,"keyword bind is obsolete: use @prefix");var l=this.tok("keywords",n,r);if(l>0){var r=this.commaSeparatedList(n,l,s,!1);if(0>r)throw i(this._thisDoc,this.lines,n,r,"'@keywords' needs comma separated list of words");return this.setKeywords(h(s,null,null)),x>80&&w("Keywords ",this.keywords),r}var l=this.tok("forAll",n,r);if(l>0){var r=this.commaSeparatedList(n,l,s,!0);if(0>r)throw i(this._thisDoc,this.lines,n,r,"Bad variable list after @forAll");var o=new d(s);try{for(;;){var a=o.next();(0>e.Util.ArrayIndexOf(this._variables,a)||e.Util.ArrayIndexOf(this._parentVariables,a)>=0)&&(this._variables[a]=this._context.newUniversal(a))}}catch(c){if(c!=f)throw c}return r}var l=this.tok("forSome",n,r);if(l>0){var r=this.commaSeparatedList(n,l,s,this.uri_ref2);if(0>r)throw i(this._thisDoc,this.lines,n,r,"Bad variable list after @forSome");var o=new d(s);try{for(;;){var a=o.next();this._context.declareExistential(a)}}catch(c){if(c!=f)throw c}return r}var l=this.tok("prefix",n,r);if(l>=0){var p=new u([]),r=this.qname(n,l,p);if(0>r)throw i(this._thisDoc,this.lines,n,l,"expected qname after @prefix");var l=this.uri_ref2(n,r,p);if(0>l)throw i(this._thisDoc,this.lines,n,r,"expected <uriref> after @prefix _qname_");var v=p[1].uri;if(this._baseURI)var v=m(this._baseURI,v);else g(v.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return g(v.indexOf(":")>=0),this._bindings[p[0][0]]=v,this.bind(p[0][0],t(v)),l}var l=this.tok("base",n,r);if(l>=0){var p=new u([]),r=this.uri_ref2(n,l,p);if(0>r)throw i(this._thisDoc,this.lines,n,l,"expected <uri> after @base ");var v=p[0].uri;if(!this._baseURI)throw i(this._thisDoc,this.lines,n,l,"With no previous base URI, cannot use relative URI in @base  <"+v+">");var v=m(this._baseURI,v);return g(v.indexOf(":")>=0),this._baseURI=v,r}return-1},r.prototype.bind=function(e,t){this._store.setPrefixForURI(e,t),""==e||this._store.setPrefixForURI(e,t)},r.prototype.setKeywords=function(e){null==e?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)},r.prototype.startDoc=function(){},r.prototype.endDoc=function(){return this._formula},r.prototype.makeStatement=function(e){e[0].add(e[2],e[1],e[3],this.source),this.statementCount+=1},r.prototype.statement=function(e,t){var n=new u([]),t=this.object(e,t,n);if(0>t)return t;var r=this.property_list(e,t,n[0]);if(0>r)throw i(this._thisDoc,this.lines,e,t,"expected propertylist");return r},r.prototype.subject=function(e,t,n){return this.item(e,t,n)},r.prototype.verb=function(e,t,n){var r=this.skipSpace(e,t);if(0>r)return r;var l=new u([]),r=this.tok("has",e,t);if(r>=0){var t=this.prop(e,r,l);if(0>t)throw i(this._thisDoc,this.lines,e,r,"expected property after 'has'");return n.push(new a(["->",l[0]])),t}var r=this.tok("is",e,t);if(r>=0){var t=this.prop(e,r,l);if(0>t)throw i(this._thisDoc,this.lines,e,r,"expected <property> after 'is'");var r=this.skipSpace(e,t);if(0>r)throw i(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=r,r=this.tok("of",e,t);if(0>r)throw i(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return n.push(new a(["<-",l[0]])),r}var r=this.tok("a",e,t);if(r>=0)return n.push(new a(["->",this._store.sym(S)])),r;if("<="==h(e,t,t+2))return n.push(new a(["<-",this._store.sym(o+"implies")])),t+2;if("="==h(e,t,t+1))return">"==h(e,t+1,t+2)?(n.push(new a(["->",this._store.sym(o+"implies")])),t+2):(n.push(new a(["->",this._store.sym(C)])),t+1);if(":="==h(e,t,t+2))return n.push(new a(["->",o+"becomes"])),t+2;var r=this.prop(e,t,l);if(r>=0)return n.push(new a(["->",l[0]])),r;if(">-"==h(e,t,t+2)||"<-"==h(e,t,t+2))throw i(this._thisDoc,this.lines,e,r,">- ... -> syntax is obsolete.");return-1},r.prototype.prop=function(e,t,n){return this.item(e,t,n)},r.prototype.item=function(e,t,n){return this.path(e,t,n)},r.prototype.blankNode=function(e){return this._context.bnode(e,this._reason2)},r.prototype.path=function(e,t,n){var r=this.nodeOrLiteral(e,t,n);if(0>r)return r;for(;"!^.".indexOf(h(e,r,r+1))>=0;){var l=h(e,r,r+1);if("."==l){var s=h(e,r+1,r+2);if(!s||N.indexOf(s)>=0&&0>":?<[{(".indexOf(s))break}var o=n.pop(),u=this.blankNode(this.here(r)),r=this.node(e,r+1,n);if(0>r)throw i(this._thisDoc,this.lines,e,r,"EOF found in middle of path syntax");var c=n.pop();"^"==l?this.makeStatement(new a([this._context,c,u,o])):this.makeStatement(new a([this._context,c,o,u])),n.push(u)}return r},r.prototype.anonymousNode=function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(this._context,this._reason2);return this._anonymousNodes[e]=t,t},r.prototype.node=function(e,t,n,r){r===void 0&&(r=null);var l=r,s=this.skipSpace(e,t);if(0>s)return s;var t=s,o=h(e,t,t+1);if("["==o){var v=this.here(t),s=this.skipSpace(e,t+1);if(0>s)throw i(this._thisDoc,this.lines,e,t,"EOF after '['");if("="==h(e,s,s+1)){var t=s+1,g=new u([]),s=this.objectList(e,t,g);if(!(s>=0))throw i(this._thisDoc,this.lines,e,t,"objectList expected after [= ");var l=g[0];if(p(g)>1){var y=new d(g);try{for(;;){var m=y.next();this.makeStatement(new a([this._context,this._store.sym(C),l,m]))}}catch(k){if(k!=f)throw k}}var s=this.skipSpace(e,s);if(0>s)throw i(this._thisDoc,this.lines,e,t,"EOF when objectList expected after [ = ");if(";"==h(e,s,s+1))var s=s+1}if(null==l)var l=this.blankNode(v);var t=this.property_list(e,s,l);if(0>t)throw i(this._thisDoc,this.lines,e,s,"property_list expected");var s=this.skipSpace(e,t);if(0>s)throw i(this._thisDoc,this.lines,e,t,"EOF when ']' expected after [ <propertyList>");if("]"!=h(e,s,s+1))throw i(this._thisDoc,this.lines,e,s,"']' expected");return n.push(l),s+1}if("{"==o){var x=h(e,t+1,t+2);if("$"==x){t+=1;for(var s=t+1,w=new u([]),S=!0;;){var t=this.skipSpace(e,s);if(0>t)throw i(this._thisDoc,this.lines,e,t,"needed '$}', found end.");if("$}"==h(e,t,t+2)){var s=t+2;break}if(S)var S=!1;else{if(","!=h(e,t,t+1))throw i(this._thisDoc,this.lines,e,t,"expected: ','");t+=1}var E=new u([]),s=this.item(e,t,E);if(0>s)throw i(this._thisDoc,this.lines,e,t,"expected item in set or '$}'");w.push(E[0])}return n.push(this._store.newSet(w,this._context)),s}var s=t+1,F=this._parentContext;this._parentContext=this._context;var T=this._anonymousNodes,A=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new c([]),this._variables=this._variables.slice();var _=this._reason2;if(this._reason2=b,null==l)var l=this._store.formula();for(this._context=l;;){var t=this.skipSpace(e,s);if(0>t)throw i(this._thisDoc,this.lines,e,t,"needed '}', found end.");if("}"==h(e,t,t+1)){var s=t+1;break}var s=this.directiveOrStatement(e,t);if(0>s)throw i(this._thisDoc,this.lines,e,t,"expected statement or '}'")}return this._anonymousNodes=T,this._variables=this._parentVariables,this._parentVariables=A,this._context=this._parentContext,this._reason2=_,this._parentContext=F,n.push(l.close()),s}if("("==o){var N=this._store.list,x=h(e,t+1,t+2);if("$"==x){var N=this._store.newSet;t+=1}for(var s=t+1,w=new u([]);;){var t=this.skipSpace(e,s);if(0>t)throw i(this._thisDoc,this.lines,e,t,"needed ')', found end.");if(")"==h(e,t,t+1)){var s=t+1;break}var E=new u([]),s=this.item(e,t,E);if(0>s)throw i(this._thisDoc,this.lines,e,t,"expected item in list or ')'");w.push(E[0])}return n.push(N(w,this._context)),s}var s=this.tok("this",e,t);if(s>=0)throw i(this._thisDoc,this.lines,e,t,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var s=this.tok("true",e,t);if(s>=0)return n.push(!0),s;var s=this.tok("false",e,t);if(s>=0)return n.push(!1),s;if(null==l){var s=this.uri_ref2(e,t,n);if(s>=0)return s}return-1},r.prototype.property_list=function(e,t,n){for(;;){var r=this.skipSpace(e,t);if(0>r)throw i(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(":-"!=h(e,r,r+2)){var t=r,l=new u([]),r=this.verb(e,t,l);if(0>=r)return t;var s=new u([]),t=this.objectList(e,r,s);if(0>t)throw i(this._thisDoc,this.lines,e,r,"objectList expected");var o=new d(s);try{for(;;){var c=o.next(),p=l[0],v=p[0],g=p[1];"->"==v?this.makeStatement(new a([this._context,g,n,c])):this.makeStatement(new a([this._context,g,c,n]))}}catch(y){if(y!=f)throw y}var r=this.skipSpace(e,t);if(0>r)throw i(this._thisDoc,this.lines,e,r,"EOF found in list of objects");if(";"!=h(e,t,t+1))return t;var t=t+1}else{var t=r+2,m=new u([]),r=this.node(e,t,m,n);if(0>r)throw i(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=r}}},r.prototype.commaSeparatedList=function(e,t,n,r){var l=this.skipSpace(e,t);if(0>l)throw i(this._thisDoc,this.lines,e,l,"EOF found expecting comma sep list");if("."==e.charAt(l))return t;if(r)var l=this.uri_ref2(e,l,n);else var l=this.bareWord(e,l,n);if(0>l)return-1;for(;;){var t=this.skipSpace(e,l);if(0>t)return t;var s=h(e,t,t+1);if(","!=s)return"."!=s?-1:t;if(r)var l=this.uri_ref2(e,t+1,n);else var l=this.bareWord(e,t+1,n);if(0>l)throw i(this._thisDoc,this.lines,e,l,"bad list content")}},r.prototype.objectList=function(e,t,n){var t=this.object(e,t,n);if(0>t)return-1;for(;;){var r=this.skipSpace(e,t);if(0>r)throw i(this._thisDoc,this.lines,e,r,"EOF found after object");if(","!=h(e,r,r+1))return r;var t=this.object(e,r+1,n);if(0>t)return t}},r.prototype.checkDot=function(e,t){var n=this.skipSpace(e,t);if(0>n)return n;if("."==h(e,n,n+1))return n+1;if("}"==h(e,n,n+1))return n;if("]"==h(e,n,n+1))return n;throw i(this._thisDoc,this.lines,e,n,"expected '.' or '}' or ']' at end of statement")},r.prototype.uri_ref2=function(t,n,r){var l=new u([]),s=this.qname(t,n,l);if(s>=0){var o=l[0],a=o[0],c=o[1];if(null==a){g(0,"not used?");var f=this._baseURI+E}else{var f=this._bindings[a];if(!f){if("_"==a)return r.push(this.anonymousNode(c)),s;throw i(this._thisDoc,this.lines,t,n,"Prefix "+a+" not bound.")}}var d=this._store.sym(f+c);return e.Util.ArrayIndexOf(this._variables,d)>=0?r.push(this._variables[d]):r.push(d),s}var n=this.skipSpace(t,n);if(0>n)return-1;if("?"==t.charAt(n)){var v=new u([]),s=this.variable(t,n,v);return s>0?(r.push(v[0]),s):-1}if("<"==t.charAt(n)){for(var n=n+1,y=n;p(t)>n;){if(">"==t.charAt(n)){var b=h(t,y,n);if(this._baseURI)var b=m(this._baseURI,b);else g(b.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if("#"==h(t,n-1,n)&&"#"!=h(b,-1,null))var b=b+"#";var d=this._store.sym(b);return e.Util.ArrayIndexOf(this._variables,d)>=0?r.push(this._variables[d]):r.push(d),n+1}var n=n+1}throw i(this._thisDoc,this.lines,t,s,"unterminated URI reference")}if(this.keywordsSet){var v=new u([]),s=this.bareWord(t,n,v);if(0>s)return-1;if(e.Util.ArrayIndexOf(this.keywords,v[0])>=0)throw i(this._thisDoc,this.lines,t,n,'Keyword "'+v[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+v[0])),s}return-1},r.prototype.skipSpace=function(e,t){for(var n=e,r=" \n\r	\f            ​\u2028\u2029　",l=t?t:0;e.length>l;l++)if(-1===r.indexOf(e.charAt(l))){if("#"!==e.charAt(l))break;e=e.slice(t).replace(/^[^\n]*\n/,""),t=0,l=-1}return val=n.length-e.length+l,val===n.length?-1:val},r.prototype.variable=function(e,t,n){var r=this.skipSpace(e,t);if(0>r)return-1;if("?"!=h(e,r,r+1))return-1;var r=r+1,t=r;if("0123456789-".indexOf(e.charAt(r))>=0)throw i(this._thisDoc,this.lines,e,r,"Varible name can't start with '"+e.charAt(r)+"s'");for(;p(e)>t&&0>N.indexOf(e.charAt(t));)var t=t+1;if(null==this._parentContext)throw i(this._thisDoc,this.lines,e,r,"Can't use ?xxx syntax for variable in outermost level: "+h(e,r-1,t));return n.push(this._store.variable(h(e,r,t))),t},r.prototype.bareWord=function(e,t,n){var r=this.skipSpace(e,t);if(0>r)return-1;var l=e.charAt(r);if("0123456789-".indexOf(l)>=0)return-1;if(N.indexOf(l)>=0)return-1;for(var t=r;p(e)>t&&0>N.indexOf(e.charAt(t));)var t=t+1;return n.push(h(e,r,t)),t},r.prototype.qname=function(t,n,r){var n=this.skipSpace(t,n);if(0>n)return-1;var l=t.charAt(n);if("0123456789-+".indexOf(l)>=0)return-1;if(0>N.indexOf(l))for(var i=l,n=n+1;p(t)>n;){var l=t.charAt(n);if(!(0>N.indexOf(l)))break;var i=i+l,n=n+1}else var i="";if(p(t)>n&&":"==t.charAt(n)){for(var s=i,n=n+1,i="";p(t)>n;){var l=t.charAt(n);if(!(0>N.indexOf(l)))break;var i=i+l,n=n+1}return r.push(new a([s,i])),n}return i&&this.keywordsSet&&0>e.Util.ArrayIndexOf(this.keywords,i)?(r.push(new a(["",i])),n):-1},r.prototype.object=function(e,t,n){var r=this.subject(e,t,n);if(r>=0)return r;var r=this.skipSpace(e,t);if(0>r)return-1;var t=r;if('"'==e.charAt(t)){if('"""'==h(e,t,t+3))var l='"""';else var l='"';var t=t+p(l),i=this.strconst(e,t,l),r=i[0],s=i[1];return n.push(this._store.literal(s)),w("New string const ",s,r),r}return-1},r.prototype.nodeOrLiteral=function(e,t,n){var r=this.node(e,t,n);if(r>=0)return r;var r=this.skipSpace(e,t);if(0>r)return-1;var t=r,l=e.charAt(t);if("-+0987654321".indexOf(l)>=0){D.lastIndex=0;var s=D.exec(e.slice(t));if(null==s)throw i(this._thisDoc,this.lines,e,t,"Bad number syntax");var r=t+D.lastIndex,o=h(e,t,r);return o.indexOf("e")>=0?n.push(this._store.literal(parseFloat(o),void 0,this._store.sym(T))):h(e,t,r).indexOf(".")>=0?n.push(this._store.literal(parseFloat(o),void 0,this._store.sym(A))):n.push(this._store.literal(parseInt(o),void 0,this._store.sym(F))),r}if('"'==e.charAt(t)){if('"""'==h(e,t,t+3))var a='"""';else var a='"';var t=t+p(a),c=null,f=this.strconst(e,t,a),r=f[0],d=f[1],v=null;if("@"==h(e,r,r+1)){Q.lastIndex=0;var s=Q.exec(e.slice(r+1));if(null==s)throw i(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Q.lastIndex+r+1,v=h(e,r+1,t),r=t}if("^^"==h(e,r,r+2))var g=new u([]),r=this.uri_ref2(e,r+2,g),c=g[0];return n.push(this._store.literal(d,v,c)),r}return-1},r.prototype.strconst=function(e,t,n){for(var r=t,l="",s=this.lines;p(e)>r;){var t=r+p(n);if(h(e,r,t)==n)return new a([t,l]);if('"'!=e.charAt(r)){I.lastIndex=0;var o=I.exec(e.slice(r));if(!o)throw i(this._thisDoc,s,e,r,"Closing quote missing in string at ^ in "+h(e,r-20,r)+"^"+h(e,r,r+20));var t=r+I.lastIndex-1,l=l+h(e,r,t),u=e.charAt(t);if('"'!=u)if("\r"!=u){if("\n"==u){if('"'==n)throw i(this._thisDoc,s,e,t,"newline found in string literal");this.lines=this.lines+1;var l=l+u,r=t+1;this.previousLine=this.startOfLine,this.startOfLine=r}else if("\\"==u){var r=t+1,u=h(e,r,r+1);if(!u)throw i(this._thisDoc,s,e,t,"unterminated string literal (2)");var c=v('abfrtvn\\"',u);if(c>=0)var f='a\b\f\r	\n\\"'.charAt(c),l=l+f,r=r+1;else if("u"==u)var d=this.uEscape(e,r+1,s),r=d[0],u=d[1],l=l+u;else{if("U"!=u)throw i(this._thisDoc,this.lines,e,t,"bad escape");var d=this.UEscape(e,r+1,s),r=d[0],u=d[1],l=l+u}}}else var r=t+1;else var r=t}else var l=l+'"',r=r+1}throw i(this._thisDoc,this.lines,e,t,"unterminated string literal")},r.prototype.uEscape=function(e,t,n){for(var r=t,l=0,s=0;4>l;){var o=h(e,r,r+1),u=o.toLowerCase(),r=r+1;if(""==u)throw i(this._thisDoc,n,e,t,"unterminated string literal(3)");var c=v("0123456789abcdef",u);if(0>c)throw i(this._thisDoc,n,e,t,"bad string literal hex escape");var s=16*s+c,l=l+1}var p=String.fromCharCode(s);return new a([r,p])},r.prototype.UEscape=function(e,t,n){for(var r=t,l=0,s="\\U";8>l;){var o=h(e,r,r+1),u=o.toLowerCase(),r=r+1;if(""==u)throw i(this._thisDoc,n,e,t,"unterminated string literal(3)");var c=v("0123456789abcdef",u);if(0>c)throw i(this._thisDoc,n,e,t,"bad string literal hex escape");var s=s+u,l=l+1}var p=y("0x"+h(s,2,10)-0);return new a([r,p])},l.prototype.toString=function(){var e=this._str,t=this._i,n=0;if(t>60)var r="...",n=t-60;else var r="";if(p(e)-t>60)var l="...";else var l="";return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new a([this.lines+1,this._uri,this._why,r,h(e,n,t),h(e,t,t+60),l])},n}(),e.IndexedFormula=function(){function t(t,n){if("object"!=typeof n){if("string"==typeof n)return new e.Literal(n);if("number"==typeof n)return new e.Literal(n);if("boolean"==typeof n)return new e.Literal(n?"1":"0",void 0,e.Symbol.prototype.XSDboolean);if("number"==typeof n)return new e.Literal(""+n);if(n===void 0)return void 0;throw"Can't make Term from "+n+" of type "+typeof n}return n}return e.IndexedFormula=function(e){this.statements=[],this.propertyActions=[],this.classActions=[],this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},void 0===e&&(e=["sameAs","InverseFunctionalProperty","FunctionalProperty"])},e.IndexedFormula.prototype=new e.Formula,e.IndexedFormula.prototype.constructor=e.IndexedFormula,e.IndexedFormula.SuperClass=e.Formula,e.IndexedFormula.prototype.setPrefixForURI=function(e,t){"tab"==e&&this.namespaces.tab||(this.namespaces[e]=t)},e.IndexedFormula.prototype.register=function(e,t){this.namespaces[e]=t},e.IndexedFormula.prototype.canon=function(e){return e},e.IndexedFormula.prototype.add=function(n,r,l,i){var s;void 0==i&&(i=this.fetcher?this.fetcher.appNode:this.sym("chrome:theSession")),n=t(this,n),r=t(this,r),l=t(this,l),i=t(this,i);var s=new e.Statement(n,r,l,i);return this.statements.push(s),s},e.IndexedFormula.prototype.formula=function(t){return new e.IndexedFormula(t)},e.IndexedFormula}(),e.parse=function(t,n,r,l){try{if("text/n3"==l||"text/turtle"==l){e.graph=r;var i=e.N3Parser(n,n,null,null,null,null,"",null);return i.loadBuf(t),void 0}}catch(s){throw"Error trying to parse N3 data:"+s}throw"Don't know how to parse "+l+" yet"},e}(),N3Parser={};N3Parser.parser={},N3Parser.parser.parse=function(e,t){var n=new TabulatorN3Parser.Graph;try{TabulatorN3Parser.parse(e,n,t,"text/n3")}catch(r){throw r}return n.toQuads()};var RDFJSInterface={};RDFJSInterface.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},RDFJSInterface.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFJSInterface.UrisMap.prototype.values=function(){var e={};for(var t in this)Utils.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFJSInterface.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},RDFJSInterface.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFJSInterface.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},RDFJSInterface.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFJSInterface.UrisMap.prototype.addAll=function(e,t){for(var n in e)Utils.include(this.interfaceProperties,n)||(null!=this[n]?t===!0&&(this[n]=e[n]):this[n]=e[n]);return this},RDFJSInterface.UrisMap.prototype.resolve=function(e){var t=e.split(":"),n=t[0],r=t[1];return""===n?null==this.defaultNs?null:this.defaultNs+r:null!=this[n]?this[n]+r:null},RDFJSInterface.UrisMap.prototype.shrink=function(e){for(var t in this){var n=this[t];if(0===e.indexOf(n)&&""!==n&&"defaultNs"!=t){var r=e.split(n)[1];return t+":"+r}}return e},RDFJSInterface.Profile=function(){this.prefixes=new RDFJSInterface.UrisMap,this.terms=new RDFJSInterface.UrisMap},RDFJSInterface.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFJSInterface.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFJSInterface.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFJSInterface.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFJSInterface.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)
},RDFJSInterface.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFJSInterface.RDFEnvironment=function(){this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)}},so:function(e,t){return function(n){return n.subject.equals(e)&&n.object.equals(t)}},po:function(e,t){return function(n){return n.predicate.equals(e)&&n.object.equals(t)}},spo:function(e,t,n){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)&&r.object.equals(n)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var n=e.resolve("rdf:type");return function(e){return e.predicate.equals(n)&&e.object.equals(t)}}};for(var t in RDFJSInterface.defaultContext)this.prefixes.set(t,RDFJSInterface.defaultContext[t])},Utils["extends"](RDFJSInterface.Profile,RDFJSInterface.RDFEnvironment),RDFJSInterface.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFJSInterface.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFJSInterface.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFJSInterface.NamedNode(t):new RDFJSInterface.NamedNode(e)},RDFJSInterface.RDFEnvironment.prototype.createLiteral=function(e,t,n){return null!=n?new RDFJSInterface.Literal(e,t,""+n):new RDFJSInterface.Literal(e,t,n)},RDFJSInterface.RDFEnvironment.prototype.createTriple=function(e,t,n){return new RDFJSInterface.Triple(e,t,n)},RDFJSInterface.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFJSInterface.Graph;if(null!=e)for(var n=0;e.length>n;n++)t.add(e[n]);return t},RDFJSInterface.RDFEnvironment.prototype.createAction=function(e,t){return function(n){return e(n)?t(n):n}},RDFJSInterface.RDFEnvironment.prototype.createProfile=function(e){if(e===!0)return new RDFJSInterface.RDFEnvironment.Profile;var t=new RDFJSInterface.RDFEnvironment.Profile;return t.importProfile(this),t},RDFJSInterface.RDFEnvironment.prototype.createTermMap=function(e){if(e===!0)return new RDFJSInterface.UrisMap;var t=this.terms.values(),n=new RDFJSInterface.UrisMap;for(var r in t)n[r]=t[r];return n},RDFJSInterface.RDFEnvironment.prototype.createPrefixMap=function(e){if(e===!0)return new RDFJSInterface.UrisMap;var t=this.prefixes.values(),n=new RDFJSInterface.UrisMap;for(var r in t)n[r]=t[r];return n},RDFJSInterface.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFJSInterface.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var n=this.attributes[t];if(this[n]!=e[n])return!1}return!0},RDFJSInterface.BlankNode=function(e){RDFJSInterface.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},Utils["extends"](RDFJSInterface.RDFNode,RDFJSInterface.BlankNode),RDFJSInterface.BlankNode.prototype.toString=function(){return this.nominalValue},RDFJSInterface.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFJSInterface.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFJSInterface.Literal=function(e,t,n){RDFJSInterface.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=n&&(this.datatype=n)},Utils["extends"](RDFJSInterface.RDFNode,RDFJSInterface.Literal),RDFJSInterface.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFJSInterface.Literal.prototype.toNT=function(){return""+this},RDFJSInterface.Literal.prototype.valueOf=function(){return QueryFilters.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFJSInterface.NamedNode=function(e){RDFJSInterface.RDFNode.call(this,"NamedNode"),this.nominalValue=null!=e.value?e.value:e},Utils["extends"](RDFJSInterface.RDFNode,RDFJSInterface.NamedNode),RDFJSInterface.NamedNode.prototype.toString=function(){return this.nominalValue},RDFJSInterface.NamedNode.prototype.toNT=function(){return"<"+(""+this)+">"},RDFJSInterface.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFJSInterface.Triple=function(e,t,n){this.subject=e,this.predicate=t,this.object=n},RDFJSInterface.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFJSInterface.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFJSInterface.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFJSInterface.Graph.prototype.add=function(e){for(var t=0;this.actions.length>t;t++)e=this.actions[t](e);var n=""+e.subject+(""+e.predicate)+(""+e.object);return this.duplicates[n]||(this.duplicates[n]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFJSInterface.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var n=0;this.triples.length>n;n++)this.triples[n]=e(this.triples[n]);return this},RDFJSInterface.Graph.prototype.addAll=function(e){for(var t=e.toArray(),n=0;t.length>n;n++)this.add(t[n]);return this.length=this.triples.length,this},RDFJSInterface.Graph.prototype.remove=function(e){for(var t=null,n=0;this.triples.length>n;n++)if(this.triples[n].equals(e)){var r=""+e.subject+(""+e.predicate)+(""+e.object);delete this.duplicates[r],t=n;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFJSInterface.Graph.prototype.toArray=function(){return this.triples},RDFJSInterface.Graph.prototype.some=function(e){for(var t=0;this.triples.length>t;t++)if(e(this.triples[t],this)===!0)return!0;return!1},RDFJSInterface.Graph.prototype.every=function(e){for(var t=0;this.triples.length>t;t++)if(e(this.triples[t],this)===!1)return!1;return!0},RDFJSInterface.Graph.prototype.filter=function(e){for(var t=new RDFJSInterface.Graph,n=0;this.triples.length>n;n++)e(this.triples[n],this)===!0&&t.add(this.triples[n]);return t},RDFJSInterface.Graph.prototype.forEach=function(e){for(var t=0;this.triples.length>t;t++)e(this.triples[t],this)},RDFJSInterface.Graph.prototype.merge=function(){for(var e=new RDFJSInterface.Graph,t=0;this.triples.length>t;t++)e.add(this.triples[t]);return e},RDFJSInterface.Graph.prototype.match=function(e,t,n,r){for(var l=new RDFJSInterface.Graph,i=0,s=0;this.triples.length>s;s++){var o=this.triples[s];if((null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==n||o.object.equals(n))){if(!(null==r||r>i))return l;i++,l.add(o)}}return l},RDFJSInterface.Graph.prototype.removeMatches=function(e,t,n){for(var r=[],l=0;this.triples.length>l;l++){var i=this.triples[l];(null==e||i.subject.equals(e))&&(null==t||i.predicate.equals(t))&&(null==n||i.object.equals(n))&&r.push(i)}for(var l=0;r.length>l;l++)this.remove(r[l]);return this},RDFJSInterface.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=""+t}),e},RDFJSInterface.buildRDFResource=function(e,t,n,r){if("blank"===e.token)return RDFJSInterface.buildBlankNode(e,t,n,r);if("literal"===e.token)return RDFJSInterface.buildLiteral(e,t,n,r);if("uri"===e.token)return RDFJSInterface.buildNamedNode(e,t,n,r);if("var"===e.token){var l=t[e.value];return null!=l?RDFJSInterface.buildRDFResource(l,t,n,r):null}return null},RDFJSInterface.buildBlankNode=function(e){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFJSInterface.BlankNode(e.value)},RDFJSInterface.buildLiteral=function(e){return new RDFJSInterface.Literal(e.value,e.lang,e.type)},RDFJSInterface.buildNamedNode=function(e,t,n,r){if(null!=e.value)return new RDFJSInterface.NamedNode(e);if(null!=e.prefix){var l=n.resolveNsInEnvironment(e.prefix,r);return e.value=l+e.suffix,new RDFJSInterface.NamedNode(e)}return new RDFJSInterface.NamedNode(e)},RDFJSInterface.rdf=new RDFJSInterface.RDFEnvironment;var QueryFilters={};QueryFilters.checkFilters=function(e,t,n,r,l,i){var s=e.filter,o=[];if(null==s||null!=e.length)return t;for(var a=0;s.length>a;a++){for(var u=s[a],c=QueryFilters.run(u.value,t,n,r,l,i),p=[],h=0;c.length>h;h++)null!=c[h].__nullify__?o.push(c[h]):p.push(c[h]);t=p}return t.concat(o)},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw console.log("ERROR"),console.log(e),"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var n=e.op1,r=e.op2;return QueryFilters.boundVars(n)+QueryFilters.boundVars(r)}if("conditionalor"==t||"conditionaland"==t){for(var l=[],i=0;e.operands>i;i++)l=l.concat(QueryFilters.boundVars(e.operands[i]));return l}if("builtincall"==t){if(null==e.args)return[];for(var s=[],i=0;e.args.length>i;i++)s=s.concat(QueryFilters.boundVars(e.args[i]));return s}if("multiplicativeexpression"==t){for(var s=QueryFilters.boundVars(e.factor),i=0;e.factors.length>i;i++)s=s.concat(QueryFilters.boundVars(e.factors[i].expression));return s}if("additiveexpression"==t){for(var s=QueryFilters.boundVars(e.summand),i=0;e.summands.length>i;i++)s=s.concat(QueryFilters.boundVars(e.summands[i].expression));return s}if("regex"==t){var s=QueryFilters.boundVars(e.expression1);return s.concat(QueryFilters.boundVars(e.expression2))}return"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,n,r,l,i){for(var s=i.copyDenormalizedBindings(t,l.outCache),o=[],a=0;t.length>a;a++){var u=s[a],c=QueryFilters.runFilter(e,u,i,r,l),c=QueryFilters.ebv(c);if(QueryFilters.isEbvError(c)){if(n){var p={__nullify__:!0,bindings:t[a]};o.push(p)}}else if(c===!0)o.push(t[a]);else if(n){var p={__nullify__:!0,bindings:t[a]};o.push(p)}}return o},QueryFilters.collect=function(e,t,n,r,l){for(var i=l.copyDenormalizedBindings(t,r.outCache),s=[],o=0;i.length>o;o++){var a=i[o],u=QueryFilters.runFilter(e,a,l,n,r);s.push({binding:t[o],value:u})}return s},QueryFilters.runDistinct=function(){},QueryFilters.runAggregator=function(e,t,n,r,l){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var i=null,s=0;t.length>s;s++){var o=t[s],a=QueryFilters.runFilter(e.expression.expression,o,n,r,l);QueryFilters.isEbvError(a)||(null===i?i=a:QueryFilters.runLtFunction(i,a).value===!0&&(i=a))}return null===i?QueryFilters.ebvError():i}if("min"===e.expression.aggregateType){for(var u=null,s=0;t.length>s;s++){var o=t[s],a=QueryFilters.runFilter(e.expression.expression,o,n,r,l);QueryFilters.isEbvError(a)||(null===u?u=a:QueryFilters.runGtFunction(u,a).value===!0&&(u=a))}return null===u?QueryFilters.ebvError():u}if("count"===e.expression.aggregateType){var c={},p=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var s=0;t.length>s;s++){var o=t[s],h=Utils.hashTerm(o);null==c[h]&&(c[h]=!0,p++)}else p=t.length;else for(var s=0;t.length>s;s++){var o=t[s],a=QueryFilters.runFilter(e.expression.expression,o,n,r,l);if(!QueryFilters.isEbvError(a))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=Utils.hashTerm(a);null==c[h]&&(c[h]=!0,p++)}else p++}return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+p}}if("avg"===e.expression.aggregateType){for(var c={},f={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},p=0,s=0;t.length>s;s++){var o=t[s],a=QueryFilters.runFilter(e.expression.expression,o,n,r,l);if(!QueryFilters.isEbvError(a))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=Utils.hashTerm(a);null==c[h]&&(c[h]=!0,QueryFilters.isNumeric(a)&&(f=QueryFilters.runSumFunction(f,a),p++))}else QueryFilters.isNumeric(a)&&(f=QueryFilters.runSumFunction(f,a),p++)}var d=QueryFilters.runDivFunction(f,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+p});return d.value=""+d.value,d}if("sum"===e.expression.aggregateType){for(var c={},f={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"},s=0;t.length>s;s++){var o=t[s],a=QueryFilters.runFilter(e.expression.expression,o,n,r,l);if(!QueryFilters.isEbvError(a))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=Utils.hashTerm(a);null==c[h]&&(c[h]=!0,QueryFilters.isNumeric(a)&&(f=QueryFilters.runSumFunction(f,a)))}else QueryFilters.isNumeric(a)&&(f=QueryFilters.runSumFunction(f,a))}return f.value=""+f.value,f}var a=QueryFilters.runFilter(aggregate.expression,t[0],r,{blanks:{},outCache:{}});return a}}},QueryFilters.runFilter=function(e,t,n,r,l){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i){var s=QueryFilters.runFilter(e.op1,t,n,r,l),o=QueryFilters.runFilter(e.op2,t,n,r,l);return QueryFilters.runRelationalFilter(e,s,o,t,n,r,l)}if("conditionalor"==i)return QueryFilters.runOrFunction(e,t,n,r,l);if("conditionaland"==i)return QueryFilters.runAndFunction(e,t,n,r,l);if("additiveexpression"==i)return QueryFilters.runAddition(e.summand,e.summands,t,n,r,l);if("builtincall"==i)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,n,r,l);if("multiplicativeexpression"==i)return QueryFilters.runMultiplication(e.factor,e.factors,t,n,r,l);if("unaryexpression"==i)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,n,r,l);if("irireforfunction"==i)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,n,r,l);if("regex"==i)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,n,r,l);if("custom"==i)return QueryFilters.runBuiltInCall(e.name,e.args,t,n,r,l);if("atomic"==i){if("var"==e.primaryexpression){var a=t[e.value.value];return a}return"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=Utils.lexicalFormBaseUri(e.value.type,l),e.value)}throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null==e?!1:e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token?!0:!1},QueryFilters.RDFTermEquality=function(e,t,n,r){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value?!0:null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(t)&&null!=e.type?QueryFilters.ebvError():!1:"uri"===e.token&&"uri"===t.token?Utils.lexicalFormBaseUri(e,r)==Utils.lexicalFormBaseUri(t,r):"blank"===e.token&&"blank"===t.token?e.value==t.value:!1},QueryFilters.isInteger=function(e){return null==e?!1:"literal"===e.token?"http://www.w3.org/2001/XMLSchema#integer"==e.type||"http://www.w3.org/2001/XMLSchema#decimal"==e.type||"http://www.w3.org/2001/XMLSchema#double"==e.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==e.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#long"==e.type||"http://www.w3.org/2001/XMLSchema#int"==e.type||"http://www.w3.org/2001/XMLSchema#short"==e.type||"http://www.w3.org/2001/XMLSchema#byte"==e.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==e.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==e.type?!0:!1:!1},QueryFilters.isFloat=function(e){return null==e?!1:"literal"===e.token?"http://www.w3.org/2001/XMLSchema#float"==e.type?!0:!1:!1},QueryFilters.isDecimal=function(e){return null==e?!1:"literal"===e.token?"http://www.w3.org/2001/XMLSchema#decimal"==e.type?!0:!1:!1},QueryFilters.isDouble=function(e){return null==e?!1:"literal"===e.token?"http://www.w3.org/2001/XMLSchema#double"==e.type?!0:!1:!1},QueryFilters.isNumeric=function(e){return null==e?!1:"literal"===e.token?"http://www.w3.org/2001/XMLSchema#integer"==e.type||"http://www.w3.org/2001/XMLSchema#decimal"==e.type||"http://www.w3.org/2001/XMLSchema#float"==e.type||"http://www.w3.org/2001/XMLSchema#double"==e.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==e.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#long"==e.type||"http://www.w3.org/2001/XMLSchema#int"==e.type||"http://www.w3.org/2001/XMLSchema#short"==e.type||"http://www.w3.org/2001/XMLSchema#byte"==e.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==e.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==e.type?!0:!1:!1},QueryFilters.isSimpleLiteral=function(e){return e&&"literal"==e.token?null==e.type&&null==e.lang?!0:!1:!1},QueryFilters.isXsdType=function(e,t){return t&&"literal"==t.token?t.type=="http://www.w3.org/2001/XMLSchema#"+e:!1},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if("http://www.w3.org/2001/XMLSchema#integer"==e.type||"http://www.w3.org/2001/XMLSchema#decimal"==e.type||"http://www.w3.org/2001/XMLSchema#double"==e.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==e.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#long"==e.type||"http://www.w3.org/2001/XMLSchema#int"==e.type||"http://www.w3.org/2001/XMLSchema#short"==e.type||"http://www.w3.org/2001/XMLSchema#byte"==e.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==e.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==e.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==e.type){var t=parseFloat(e.value);return isNaN(t)?!1:0!=parseFloat(e.value)}return"http://www.w3.org/2001/XMLSchema#boolean"===e.type?"true"===e.value||e.value===!0||"True"===e.value:"http://www.w3.org/2001/XMLSchema#string"===e.type?""!=e.value:"http://www.w3.org/2001/XMLSchema#dateTime"===e.type?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value?!0:!1:QueryFilters.ebvError()}return e.value===!0},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){var e={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0};return e},QueryFilters.ebvFalse=function(){var e={token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1};return e},QueryFilters.ebvError=function(){var e={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null};return e},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e?"https://github.com/antoniogarrote/js-tools/types#error"===e.type:!1},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:e===!0?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,n,r,l,i,s){var o=e.operator;if("="===o)return QueryFilters.runEqualityFunction(t,n,r,l,i,s);if("!="===o){var a=QueryFilters.runEqualityFunction(t,n,r,l,i,s);return QueryFilters.isEbvError(a)?a:(a.value=!a.value,a)}if("<"===o)return QueryFilters.runLtFunction(t,n,r);if(">"===o)return QueryFilters.runGtFunction(t,n,r);if("<="===o)return QueryFilters.runLtEqFunction(t,n,r);if(">="===o)return QueryFilters.runGtEqFunction(t,n,r);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),"value not supported in operations yet";if("http://www.w3.org/2001/XMLSchema#integer"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#decimal"==e.type){var t=parseFloat(e.value);return t}if("http://www.w3.org/2001/XMLSchema#float"==e.type){var t=parseFloat(e.value);return t}if("http://www.w3.org/2001/XMLSchema#double"==e.type){var t=parseFloat(e.value);return t}if("http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==e.type){var t=parseFloat(e.value);return t}if("http://www.w3.org/2001/XMLSchema#negativeInteger"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#long"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#int"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#short"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#byte"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#unsignedLong"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#unsignedInt"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#unsignedShort"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#unsignedByte"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#positiveInteger"==e.type){var t=parseInt(e.value);return t}if("http://www.w3.org/2001/XMLSchema#date"!=e.type&&"http://www.w3.org/2001/XMLSchema#dateTime"!=e.type)return"http://www.w3.org/2001/XMLSchema#boolean"==e.type?e.value===!0||"true"===e.value||"1"===e.value||1===e.value||e.value===!0?!0:e.value===!1||"false"===e.value||"0"===e.value||0===e.value||e.value===!1?!1:void 0:"http://www.w3.org/2001/XMLSchema#string"==e.type?null===e.value||void 0===e.value?void 0:""+e.value:null==e.type?e.value:e.value;try{var n=Utils.parseISO8601(e.value);return n}catch(r){return null}},QueryFilters.runOrFunction=function(e,t,n,r,l){for(var i=null,s=0;e.operands.length>s;s++){var o=QueryFilters.runFilter(e.operands[s],t,n,r,l);0==QueryFilters.isEbvError(o)&&(o=QueryFilters.ebv(o)),null==i?i=o:QueryFilters.isEbvError(o)?i=QueryFilters.isEbvError(i)?QueryFilters.ebvError():i===!0?!0:QueryFilters.ebvError():o===!0?i=!0:QueryFilters.isEbvError(i)&&(i=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(i)},QueryFilters.runAndFunction=function(e,t,n,r,l){for(var i=null,s=0;e.operands.length>s;s++){var o=QueryFilters.runFilter(e.operands[s],t,n,r,l);0==QueryFilters.isEbvError(o)&&(o=QueryFilters.ebv(o)),null==i?i=o:QueryFilters.isEbvError(o)?i=QueryFilters.isEbvError(i)?QueryFilters.ebvError():i===!0?QueryFilters.ebvError():!1:o===!0?QueryFilters.isEbvError(i)&&(i=QueryFilters.ebvError()):i=!1}return QueryFilters.ebvBoolean(i)},QueryFilters.runEqualityFunction=function(e,t,n,r,l,i){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var s=QueryFilters.effectiveTypeValue(e),o=QueryFilters.effectiveTypeValue(t);return isNaN(s)||isNaN(o)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,r,i)):QueryFilters.ebvBoolean(s==o)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var a=Utils.compareDateComponents(e.value,t.value);return null!=a?0==a?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,r,i)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var n=Utils.compareDateComponents(e.value,t.value);return null!=n?1==n?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var n=Utils.compareDateComponents(e.value,t.value);return null!=n?-1==n?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var n=Utils.compareDateComponents(e.value,t.value);return null!=n?-1!=n?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var n=Utils.compareDateComponents(e.value,t.value);return null!=n?1!=n?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,n,r,l,i){var s=QueryFilters.runFilter(e,n,r,l,i);if(QueryFilters.isEbvError(s))return QueryFilters.ebvError();var o=s;if(QueryFilters.isNumeric(s)){for(var a=0;t.length>a;a++){var u=QueryFilters.runFilter(t[a].expression,n,r,l,i);if(!QueryFilters.isNumeric(u))return QueryFilters.ebvFalse();"+"===t[a].operator?o=QueryFilters.runSumFunction(o,u):"-"===t[a].operator&&(o=QueryFilters.runSubFunction(o,u))}return o}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:n}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:n}
},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:n}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:n}},QueryFilters.runMultiplication=function(e,t,n,r,l,i){var s=QueryFilters.runFilter(e,n,r,l,i);if(QueryFilters.isEbvError(s))return s;var o=s;if(QueryFilters.isNumeric(s)){for(var a=0;t.length>a;a++){var u=QueryFilters.runFilter(t[a].expression,n,r,l,i);if(QueryFilters.isEbvError(u))return s;if(!QueryFilters.isNumeric(u))return QueryFilters.ebvFalse();"*"===t[a].operator?o=QueryFilters.runMulFunction(o,u):"/"===t[a].operator&&(o=QueryFilters.runDivFunction(o,u))}return o}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:n}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:n}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var n=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:n}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:n}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:n}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:n}},QueryFilters.runBuiltInCall=function(e,t,n,r,l,i){if("notexists"===e||"exists"===e){var s=JSON.parse(JSON.stringify(t[0])),o=r.abstractQueryTree.parseSelect({pattern:s},n);o=r.abstractQueryTree.bind(o.pattern,n);var a=r.executeSelectUnit([{kind:"*"}],l,o,i);return"exists"===e?QueryFilters.ebvBoolean(0!==a.length):QueryFilters.ebvBoolean(0===a.length)}for(var u=[],c=0;t.length>c;c++)if("var"===t[c].token)u.push(t[c]);else{var p=QueryFilters.runFilter(t[c],n,r,l,i);if(QueryFilters.isEbvError(p))return p;u.push(p)}if("str"===e)return"literal"===u[0].token?{token:"literal",type:null,value:""+u[0].value}:"uri"===u[0].token?{token:"literal",type:null,value:u[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===u[0].token?null!=u[0].lang?{token:"literal",value:""+u[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===u[0].token){var h=u[0];return null!=h.type?"string"==typeof h.type?{token:"uri",value:h.type,prefix:null,suffix:null}:h.type:null==h.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var f=u[0],d=u[1],v=QueryFilters.RDFTermEquality(f,d,r,i);return QueryFilters.isEbvError(v)&&(v=!1),QueryFilters.ebvBoolean(v)}if("langmatches"===e){var g=u[0],y=u[1];return"literal"===g.token&&"literal"===y.token?"*"===y.value&&""!=g.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===g.value.toLowerCase().indexOf(y.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var m=u[0].value;return null==m?QueryFilters.ebvError():null!=n[m]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=r.customFns[e])return r.customFns[e](QueryFilters,u);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,n,r,l,i){var s=QueryFilters.runFilter(t,n,r,l,i);if(QueryFilters.isEbvError(s))return s;if("!"===e){var o=QueryFilters.ebv(s);return QueryFilters.isEbvError(o)?QueryFilters.ebvFalse():(o=!o,QueryFilters.ebvBoolean(o))}if("+"===e)return QueryFilters.isNumeric(s)?s:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(s)){var a={};for(var u in s)a[u]=s[u];return a.value=-a.value,a}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,n,r,l,i,s){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,r,l,i,s),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,r,l,i,s),null!=n&&(n=QueryFilters.runFilter(n,r,l,i,s)),null==t||"literal"!==t.token||null!=n&&"literal"!==n.token)return QueryFilters.ebvError();if(t=t.value,n=null==n?null:n.value,null!=e&&"var"==e.token){if(null==r[e.value])return QueryFilters.ebvError();e=r[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}var o;return o=null==n?RegExp(t):RegExp(t,n.toLowerCase()),o.exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,n){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=Utils.lexicalFormBaseUri(e.value.type,n),e)},QueryFilters.runIriRefOrFunction=function(e,t,n,r,l,i){if(null==t)return e;for(var s=[],o=0;t.length>o;o++)s.push(QueryFilters.runFilter(t[o],n,r,l,i));var a=Utils.lexicalFormBaseUri(e,i);if("http://www.w3.org/2001/XMLSchema#integer"==a||"http://www.w3.org/2001/XMLSchema#decimal"==a||"http://www.w3.org/2001/XMLSchema#double"==a||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==a||"http://www.w3.org/2001/XMLSchema#negativeInteger"==a||"http://www.w3.org/2001/XMLSchema#long"==a||"http://www.w3.org/2001/XMLSchema#int"==a||"http://www.w3.org/2001/XMLSchema#short"==a||"http://www.w3.org/2001/XMLSchema#byte"==a||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==a||"http://www.w3.org/2001/XMLSchema#unsignedLong"==a||"http://www.w3.org/2001/XMLSchema#unsignedInt"==a||"http://www.w3.org/2001/XMLSchema#unsignedShort"==a||"http://www.w3.org/2001/XMLSchema#unsignedByte"==a||"http://www.w3.org/2001/XMLSchema#positiveInteger"==a){var u=s[0];if("literal"!==u.token)return QueryFilters.ebvError();if(u=QueryFilters.normalizeLiteralDatatype(u,r,i),"http://www.w3.org/2001/XMLSchema#integer"==u.type||"http://www.w3.org/2001/XMLSchema#decimal"==u.type||"http://www.w3.org/2001/XMLSchema#double"==u.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==u.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==u.type||"http://www.w3.org/2001/XMLSchema#long"==u.type||"http://www.w3.org/2001/XMLSchema#int"==u.type||"http://www.w3.org/2001/XMLSchema#short"==u.type||"http://www.w3.org/2001/XMLSchema#byte"==u.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==u.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==u.type)return u.type=a,u;if("http://www.w3.org/2001/XMLSchema#boolean"==u.type)return 1==QueryFilters.ebv(u)?(u.type=a,u.value=1):(u.type=a,u.value=0),u;if("http://www.w3.org/2001/XMLSchema#float"==u.type||"http://www.w3.org/2001/XMLSchema#double"==u.type)return u.type=a,u.value=parseInt(u.value),u;if("http://www.w3.org/2001/XMLSchema#string"!=u.type&&null!=u.type)return QueryFilters.ebvError();if(u.value.split(".").length>2)return QueryFilters.ebvError();if(u.value.split("-").length>2)return QueryFilters.ebvError();if(u.value.split("/").length>2)return QueryFilters.ebvError();if(u.value.split("+").length>2)return QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#decimal"==a&&(-1!=u.value.indexOf("e")||-1!=u.value.indexOf("E")))return QueryFilters.ebvError();if(!("http://www.w3.org/2001/XMLSchema#int"!=a&&"http://www.w3.org/2001/XMLSchema#integer"!=a||-1==u.value.indexOf("e")&&-1==u.value.indexOf("E")&&-1==u.value.indexOf(".")))return QueryFilters.ebvError();try{return u.value=parseInt(parseFloat(u.value)),isNaN(u.value)?QueryFilters.ebvError():(u.type=a,u)}catch(c){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#boolean"==a){var u=s[0];return"literal"===u.token&&null==u.type?"true"===u.value||"1"===u.value?QueryFilters.ebvTrue():"false"===u.value||"0"===u.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===u.token?QueryFilters.isEbvError(u)?u:QueryFilters.ebvBoolean(u):QueryFilters.ebvError()}if("http://www.w3.org/2001/XMLSchema#string"==a){var u=s[0];return"literal"===u.token?(u=QueryFilters.normalizeLiteralDatatype(u,r,i),"http://www.w3.org/2001/XMLSchema#integer"==u.type||"http://www.w3.org/2001/XMLSchema#decimal"==u.type||"http://www.w3.org/2001/XMLSchema#double"==u.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==u.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==u.type||"http://www.w3.org/2001/XMLSchema#long"==u.type||"http://www.w3.org/2001/XMLSchema#int"==u.type||"http://www.w3.org/2001/XMLSchema#short"==u.type||"http://www.w3.org/2001/XMLSchema#byte"==u.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==u.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==u.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==u.type||"http://www.w3.org/2001/XMLSchema#float"==u.type?(u.type=a,u.value=""+u.value,u):"http://www.w3.org/2001/XMLSchema#string"==u.type?u:"http://www.w3.org/2001/XMLSchema#boolean"==u.type?(QueryFilters.ebv(u)?(u.type=a,u.value="true"):(u.type=a,u.value="false"),u):"http://www.w3.org/2001/XMLSchema#dateTime"==u.type||"http://www.w3.org/2001/XMLSchema#date"==u.type?(u.type=a,"string"!=typeof u.value&&(u.value=Utils.iso8601(u.value)),u):null==u.type?(u.value=""+u.value,u.type=a,u):QueryFilters.ebvError()):"uri"===u.token?{token:"literal",value:Utils.lexicalFormBaseUri(u,i),type:a,lang:null}:QueryFilters.ebvError()}if("http://www.w3.org/2001/XMLSchema#dateTime"==a||"http://www.w3.org/2001/XMLSchema#date"==a){if(u=s[0],"http://www.w3.org/2001/XMLSchema#dateTime"==u.type||"http://www.w3.org/2001/XMLSchema#date"==u.type)return u;if("http://www.w3.org/2001/XMLSchema#string"!=u.type&&null!=u.type)return QueryFilters.ebvError();try{return u.value=Utils.iso8601(Utils.parseStrictISO8601(u.value)),u.type=a,u}catch(c){return QueryFilters.ebvError()}}else{if("http://www.w3.org/2001/XMLSchema#float"!=a)return QueryFilters.ebvError();var u=s[0];if("literal"!==u.token)return QueryFilters.ebvError();if(u=QueryFilters.normalizeLiteralDatatype(u,r,i),"http://www.w3.org/2001/XMLSchema#decimal"==u.type||"http://www.w3.org/2001/XMLSchema#int"==u.type)return u.type=a,u.value=parseFloat(u.value),u;if("http://www.w3.org/2001/XMLSchema#boolean"==u.type)return 1==QueryFilters.ebv(u)?(u.type=a,u.value=1):(u.type=a,u.value=0),u;if("http://www.w3.org/2001/XMLSchema#float"==u.type||"http://www.w3.org/2001/XMLSchema#double"==u.type)return u.type=a,u.value=parseFloat(u.value),u;if("http://www.w3.org/2001/XMLSchema#string"==u.type)try{return u.value=parseFloat(u.value),isNaN(u.value)?QueryFilters.ebvError():(u.type=a,u)}catch(c){return QueryFilters.ebvError()}else{if(null!=u.type)return QueryFilters.ebvError();if(u.value.split(".").length>2)return QueryFilters.ebvError();if(u.value.split("-").length>2)return QueryFilters.ebvError();if(u.value.split("/").length>2)return QueryFilters.ebvError();if(u.value.split("+").length>2)return QueryFilters.ebvError();try{return u.value=parseFloat(u.value),isNaN(u.value)?QueryFilters.ebvError():(u.type=a,u)}catch(c){return QueryFilters.ebvError()}}}}};var QueryPlanDPSize={};QueryPlanDPSize.variablesInBGP=function(e){var t=e.variables;if(t)return t;var n=e.value||e;t=[];for(var r in n)n[r]&&"var"===n[r].token?t.push(n[r].value):n[r]&&"blank"===n[r].token&&t.push("blank:"+n[r].value);return e.variables=t,t},QueryPlanDPSize.connected=function(e,t){for(var n="/"+e.vars.join("/")+"/",r=0;t.vars.length>r;r++)if(-1!=n.indexOf("/"+t.vars[r]+"/"))return!0;return!1},QueryPlanDPSize.variablesIntersectionBGP=function(e,t){for(var n=QueryPlanDPSize.variablesInBGP(e).sort(),r=QueryPlanDPSize.variablesInBGP(t).sort(),l=0,i=0,s=[];n.length>l&&r.length>i;)n[l]===r[i]?(s.push(n[l]),l++,i++):n[l]<r[i]?l++:i++;return s},QueryPlanDPSize.executeAndBGPsGroups=function(e){for(var t={},n={},r=0,l=0;e.length>l;l++){var i=e[l],s={},o={},a=[];for(var u in i)"_cost"!=u&&("var"===i[u].token?a.push(i[u].value):"blank"===i[u].token&&a.push(i[u].value));var c=!1,p={};for(var h in n){var f=n[h];c=!1;for(var d=0;a.length>d;d++){var v="/"+a[d]+"/";if(-1!=f.indexOf(v)){c=!0;break}}c?p[h]=!0:(s[h]=t[h],o[h]=n[h])}if(c){var g=[],y="",m="";for(var b in p)y+=b,g=g.concat(t[b]),m=n[b];m=m+a.join("/")+"/",g.push(i),s[y]=g,o[y]=m}else s[r]=[i],o[r]="/"+a.join("/")+"/",r++;t=s,n=o}var k=[];for(var r in t)k.push(t[r]);return k},QueryPlanDPSize.intersectionSize=function(e,t){for(var n=t.i.split("_"),r=0;n.length>r;r++)if(""!=n[r]&&-1!=e.i.indexOf("_"+n[r]+"_"))return 1;return 0},QueryPlanDPSize.createJoinTree=function(e,t){for(var n="/"+e.vars.join("/")+"/",r=e.vars.concat([]),l=[],i=0;t.vars.length>i;i++)-1!=n.indexOf("/"+t.vars[i]+"/")?0==t.vars[i].indexOf("_:")?l.push("blank:"+t.vars[i]):l.push(t.vars[i]):r.push(t.vars[i]);for(var s=t.i.split("_"),o=e.i.split("_"),a={},i=0;s.length>i;i++)""!=s[i]&&(a[s[i]]=!0);for(var i=0;o.length>i;i++)""!=o[i]&&(a[o[i]]=!0);var u=[];for(var c in a)u.push(c);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+u.sort().join("_")+"_",vars:r,join:l}},QueryPlanDPSize.executeBushyTree=function(e,t,n,r){if(null==e.left)return QueryPlanDPSize.executeEmptyJoinBGP(e.right,t,n,r);if(null==e.right)return QueryPlanDPSize.executeEmptyJoinBGP(e.left,t,n,r);var l=QueryPlanDPSize.executeBushyTree(e.left,t,n,r);if(null!=l){var i=QueryPlanDPSize.executeBushyTree(e.right,t,n,r);return null!=i?QueryPlanDPSize.joinBindings2(e.join,l,i):null}},QueryPlanDPSize.executeAndBGPsDPSize=function(e,t,n,r){for(var l=QueryPlanDPSize.executeAndBGPsGroups(e),i=[],s=0;l.length>s;s++){var o=l[s];n.computeCosts(o,r);var a={},u={},c={},p=1,h=null,f={};c["1"]=[];for(var d=0;o.length>d;d++){var v=[];for(var g in o[d])"_cost"!=g&&("var"===o[d][g].token?v.push(o[d][g].value):"blank"===o[d][g].token&&v.push(o[d][g].value));u["_"+d+"_"]={left:o[d],right:null,cost:o[d]._cost,i:"_"+d+"_",vars:v};var y={left:o[d],right:null,cost:o[d]._cost,i:"_"+d+"_",vars:v};a["_"+d+"_"]=y,delete o[d]._cost,f["_"+d+"_"]=!0,c["1"].push("_"+d+"_"),(null==h||h.cost>y.cost)&&(h=y)}for(var m=2;o.length>=m;m++)for(var b=1;m>b;b++)for(var k=m-b,x=c[""+b]||[],w=c[""+k]||[],d=0;x.length>d;d++)for(var S=0;w.length>S;S++)if(x[d]!==w[S]){var C=u[x[d]],E=u[w[S]];if(0==QueryPlanDPSize.intersectionSize(C,E)&&QueryPlanDPSize.connected(C,E)){p=m;var F=a[C.i],T=a[E.i],A=QueryPlanDPSize.createJoinTree(F,T);if(!f[A.i]){f[A.i]=!0;var _=A.cost+1;null!=a[A.i]&&(_=a[A.i].cost);var N=c[m]||[];N.push(A.i),u[A.i]=A,c[m]=N,_>A.cost&&(p===m&&(h=A),a[A.i]=A)}}}i.push(h)}for(var N=null,s=0;i.length>s;s++){var D=i[s],I=QueryPlanDPSize.executeBushyTree(D,t,n,r);N=null==N?I:QueryPlanDPSize.crossProductBindings(N,I)}return N},QueryPlanDPSize.executeEmptyJoinBGP=function(e,t,n,r){return QueryPlanDPSize.executeBGPDatasets(e,t,n,r)},QueryPlanDPSize.executeBGPDatasets=function(e,t,n,r){var l={};if(null==e.graph){for(var i=[],s=0;t.implicit.length>s;s++)if(null==l[t.implicit[s].oid]){l[t.implicit[s].oid]=!0,e.graph=t.implicit[s];var o=n.rangeQuery(e,r);o=QueryPlanDPSize.buildBindingsFromRange(o,e),i.push(o)}var a=QueryPlanDPSize.unionManyBindings(i);return a}if("var"===e.graph.token){for(var u=e.graph.value,i=[],s=0;t.named.length>s;s++)if(null==l[t.named[s].oid]){l[t.named[s].oid]=!0,e.graph=t.named[s];var o=n.rangeQuery(e,r);if(null==o)return null;o=QueryPlanDPSize.buildBindingsFromRange(o,e);for(var c=0;o.length>c;c++)o[c][u]=t.named[s].oid;i.push(o)}var a=QueryPlanDPSize.unionManyBindings(i||[]);return a}var o=n.rangeQuery(e,r);return null!=o?o=QueryPlanDPSize.buildBindingsFromRange(o,e):null},QueryPlanDPSize.buildBindingsFromRange=function(e,t){QueryPlanDPSize.variablesInBGP(t);var n={},r=t.value||t,n={};for(u in r)r[u]&&"var"===r[u].token?n[u]=r[u].value:r[u]&&"blank"===r[u].token&&(n[u]="blank:"+r[u].value);var l=[];if(null!=e)for(var i=0;e.length>i;i++){var s={},o=e[i],a=!1;for(var u in n){var c=o[u];if(null!=s[n[u]]&&s[n[u]]!==c){a=!0;break}s[n[u]]=c}a||l.push(s)}return l},QueryPlanDPSize.areCompatibleBindings=function(e,t){for(var n in e)if(null!=t[n]&&t[n]!=e[n])return!1;return!0},QueryPlanDPSize.mergeBindings=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},QueryPlanDPSize.joinBindings2=function(e,t,n){for(var r,l,i,s,o,a={},u=[],c=0;t.length>c;c++){r=t[c],o=a;for(var p=0;e.length>p;p++)l=e[p],i=r[l],p==e.length-1?(s=o[i]||[],s.push(r),o[i]=s):(s=o[i]||{},o[i]=s,o=s)}for(var c=0;n.length>c;c++){r=n[c],o=a;for(var p=0;e.length>p;p++)if(l=e[p],i=r[l],null!=o[i])if(p==e.length-1)for(var h=0;o[i].length>h;h++)u.push(QueryPlanDPSize.mergeBindings(o[i][h],r));else o=o[i]}return u},QueryPlanDPSize.joinBindings=function(e,t){for(var n=[],r=0;e.length>r;r++)for(var l=e[r],i=0;t.length>i;i++){var s=t[i];QueryPlanDPSize.areCompatibleBindings(l,s)&&n.push(QueryPlanDPSize.mergeBindings(l,s))}return n},QueryPlanDPSize.augmentMissingBindings=function(e,t){for(var n in t)null==e[n]&&(e[n]=null);return e},QueryPlanDPSize.leftOuterJoinBindings=function(e,t){for(var n=[],r=0;e.length>r;r++){for(var l=e[r],i=!1,s=0;t.length>s;s++){var o=t[s];QueryPlanDPSize.areCompatibleBindings(l,o)&&(i=!0,n.push(QueryPlanDPSize.mergeBindings(l,o)))}i===!1&&(QueryPlanDPSize.augmentMissingBindings(l,o),n.push(l))}return n},QueryPlanDPSize.crossProductBindings=function(e,t){for(var n=[],r=0;e.length>r;r++)for(var l=e[r],i=0;t.length>i;i++){var s=t[i];n.push(QueryPlanDPSize.mergeBindings(l,s))}return n},QueryPlanDPSize.unionBindings=function(e,t){return e.concat(t)},QueryPlanDPSize.unionManyBindings=function(e){for(var t=[],n=0;e.length>n;n++){var r=e[n];t=QueryPlanDPSize.unionBindings(t,r)}return t};var QueryEngine={},QueryPlan=QueryPlanDPSize;QueryEngine.QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new AbstractQueryTree.AbstractQueryTree,this.rdfLoader=new RDFLoader.RDFLoader(e.communication),this.callbacksBackend=new Callbacks.CallbacksBackend(this),this.customFns=e.customFns||{})},QueryEngine.QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.QueryEngine.prototype.registerNsInEnvironment=function(e,t){var n=[];null!=e&&null!=e.prefixes&&(n=e.prefixes);var r={};for(var l in this.defaultPrefixes)r[l]=this.defaultPrefixes[l];for(var i=0;n.length>i;i++){var s=n[i];"prefix"===s.token&&(r[s.prefix]=s.local)}t.namespaces=r,t.base=null!=e&&e.base&&"object"==typeof e.base?e.base.value:null},QueryEngine.QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var n={},r=[],l=0;t.length>l;l++){var i=t[l],s="";for(var o in i){var a=i[o];null==a?s=s+o+"null":"literal"==a.token?(null!=a.value&&(s+=a.value),null!=a.lang&&(s+=a.lang),null!=a.type&&(s+=a.type)):s=a.value?s+o+a.value:s+o+a}null==n[s]&&(r.push(i),n[s]=!0)}return r}return t},QueryEngine.QueryEngine.prototype.applyLimitOffset=function(e,t,n){return null==t&&null==e?n:(null==e&&(e=0),t=null==t?n.length:e+t,n.slice(e,t))},QueryEngine.QueryEngine.prototype.applySingleOrderBy=function(e,t,n,r){for(var l=[],i=0;e.length>i;i++){var s=e[i],o=QueryFilters.collect(s.expression,[t],n,r,this);l.push(o[0].value)}return{binding:t,value:l}},QueryEngine.QueryEngine.prototype.applyOrderBy=function(e,t,n,r){var l=this,i=[];if(null!=e&&e.length>0){for(var s=0;t.length>s;s++){var o=t[s],a=l.applySingleOrderBy(e,o,n,r);i.push(a)}i.sort(function(t,n){return l.compareFilteredBindings(t,n,e,r)});for(var u=[],s=0;i.length>s;s++)u.push(i[s].binding);return u}return t},QueryEngine.QueryEngine.prototype.compareFilteredBindings=function(e,t,n,r){for(var l=!1,i=0;!l;){if(i==e.value.length)return 0;var s,o=n[i].direction;if(null!=e.value[i]||null!=t.value[i]){if(null==e.value[i])s={value:!1};else if(null==t.value[i])s={value:!0};else{if("blank"===e.value[i].token&&"blank"===t.value[i].token){i++;continue}if("blank"===e.value[i].token)s={value:!1};else if("blank"===t.value[i].token)s={value:!0};else if("uri"===e.value[i].token&&"uri"===t.value[i].token){if(1==QueryFilters.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}s=QueryFilters.runTotalGtFunction(e.value[i],t.value[i],[])}else if("uri"===e.value[i].token)s={value:!1};else if("uri"===t.value[i].token)s={value:!0};else if("literal"===e.value[i].token&&"literal"===t.value[i].token&&null==e.value[i].type&&null==t.value[i].type){if(1==QueryFilters.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}s=QueryFilters.runTotalGtFunction(e.value[i],t.value[i],[])}else if("literal"===e.value[i].token&&null==e.value[i].type)s={value:!1};else if("literal"===t.value[i].token&&null==t.value[i].type)s={value:!0};else{if(1==QueryFilters.runEqualityFunction(e.value[i],t.value[i],[],this,r).value){i++;continue}s=QueryFilters.runTotalGtFunction(e.value[i],t.value[i],[])}}return 1==s.value?"ASC"===o?1:-1:"ASC"===o?-1:1}i++}},QueryEngine.QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var n=[],r={},l=0;t.named.length>l;l++)r[t.named[l].oid]=!0;for(l=0;t.implicit.length>l;l++)null==r[t.implicit[l].oid]&&n.push(t.implicit[l].oid);var i=[];for(l=0;e.length>l;l++){var s=e[l],o=!1;for(var a in s){for(var u=0;r.length>u;u++)if(s[a]===r[u]){o=!0;break}if(o)break}o||i.push(s)}return i},QueryEngine.QueryEngine.prototype.aggregateBindings=function(e,t,n,r){for(var l=this.copyDenormalizedBindings(t,r.outCache),i={},s=0;e.length>s;s++){var o=QueryFilters.runAggregator(e[s],l,this,n,r);e[s].alias?i[e[s].alias.value]=o:i[e[s].value.value]=o}return i},QueryEngine.QueryEngine.prototype.projectBindings=function(e,t,n){if("*"===e[0].kind)return t;for(var r=[],l=0;t.length>l;l++){for(var i=t[l],s={},o=!0,a=0;e.length>a;a++)if("variable"==e[a].token&&"aliased"!=e[a].kind)s[e[a].value.value]=i[e[a].value.value];else if("variable"==e[a].token&&"aliased"==e[a].kind){var u=QueryFilters.runFilter(e[a].expression,i,this,n,{blanks:{},outCache:{}});if(QueryFilters.isEbvError(u)){o=!1;break}s[e[a].alias.value]=u}o===!0&&r.push(s)}return r},QueryEngine.QueryEngine.prototype.resolveNsInEnvironment=function(e,t){var n=t.namespaces;return n[e]},QueryEngine.QueryEngine.prototype.termCost=function(e,t){if("uri"===e.token){var n=Utils.lexicalFormBaseUri(e,t);return null==n?0:this.lexicon.resolveUriCost(n)}if("literal"===e.token){var r=Utils.lexicalFormLiteral(e,t);return this.lexicon.resolveLiteralCost(r)}if("blank"===e.token){var l=e.value;return this.lexicon.resolveBlankCost(l)}return"var"===e.token?this.lexicon.oidCounter/3:null},QueryEngine.QueryEngine.prototype.normalizeTerm=function(e,t,n){if("uri"===e.token){var r=Utils.lexicalFormBaseUri(e,t);return null==r?null:n?this.lexicon.registerUri(r):this.lexicon.resolveUri(r)}if("literal"===e.token){var l=Utils.lexicalFormLiteral(e,t);if(n){var i=this.lexicon.registerLiteral(l);return i}var i=this.lexicon.resolveLiteral(l);return i}if("blank"===e.token){var s=e.value,i=t.blanks[s];if(null!=i)return i;if(n){var i=this.lexicon.registerBlank(s);return t.blanks[s]=i,i}var i=this.lexicon.resolveBlank(s);return t.blanks[s]=i,i}return"var"===e.token?e.value:null},QueryEngine.QueryEngine.prototype.normalizeDatasets=function(e,t){for(var n=this,r=0;e.length>r;r++){var l=e[r];if(l.value===n.lexicon.defaultGraphUri)l.oid=n.lexicon.defaultGraphOid;else{var i=n.normalizeTerm(l,t,!1);if(null==i)return null;l.oid=i}}return!0},QueryEngine.QueryEngine.prototype.normalizeQuad=function(e,t,n){var r,l=null,i=null,s=null,o=null;if(null==e.graph)o=0;else{if(r=this.normalizeTerm(e.graph,t,n),null==r)return null;o=r,n===!0&&"var"!=e.graph.token&&this.lexicon.registerGraph(r)}return r=this.normalizeTerm(e.subject,t,n),null==r?null:(l=r,r=this.normalizeTerm(e.predicate,t,n),null==r?null:(i=r,r=this.normalizeTerm(e.object,t,n),null==r?null:(s=r,{subject:l,predicate:i,object:s,graph:o})))},QueryEngine.QueryEngine.prototype.quadCost=function(e,t){var n=null,r=null,l=null,i=null;return i=null==e.graph?this.lexicon.oidCounter/4:this.termCost(e.graph,t),n=this.termCost(e.subject,t),r=this.termCost(e.predicate,t),l=this.termCost(e.object,t),i+n+r+l},QueryEngine.QueryEngine.prototype.denormalizeBindingsList=function(e,t){for(var n=[],r=0;e.length>r;r++){var l=this.denormalizeBindings(e[r],t);n.push(l)}return n},QueryEngine.QueryEngine.prototype.copyDenormalizedBindings=function(e,t){for(var n=[],r=0;e.length>r;r++){for(var l={},i=e[r],s=Utils.keys(i),o=0;s.length>o;o++){var a=i[s[o]];if(null==a)l[s[o]]=null;else if("object"==typeof a)l[s[o]]=a;else{var u=t[a];if(null!=u)l[s[o]]=u;else{var c=this.lexicon.retrieve(a);t[a]=c,l[s[o]]=c}}}n.push(l)}return n},QueryEngine.QueryEngine.prototype.denormalizeBindings=function(e,t){for(var n=Utils.keys(e),r=t.outCache,l=0;n.length>l;l++){var i=e[n[l]];if(null==i)e[n[l]]=null;else if(null!=r[i])e[n[l]]=r[i];else{var s=this.lexicon.retrieve(i);e[n[l]]=s,"blank"===s.token&&(t.blanks[s.value]=i)}}return e},QueryEngine.QueryEngine.prototype.execute=function(e,t,n,r){e=Utils.normalizeUnicodeLiterals(e);var l=this.abstractQueryTree.parseQueryString(e);if(null==l)t(!1,"Error parsing query string");else if("query"===l.token&&"update"==l.kind){this.callbacksBackend.startGraphModification();var i=this;this.executeUpdate(l,function(e,n){i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite(),e?i.callbacksBackend.endGraphModification(function(){t(e,n)}):(i.callbacksBackend.cancelGraphModification(),t(e,n))})}else"query"===l.token&&"query"==l.kind&&this.executeQuery(l,t,n,r)},QueryEngine.QueryEngine.prototype.executeQuery=function(e,t,n,r){var l=e.prologue,i=e.units,s=this,o={blanks:{},outCache:{}};this.registerNsInEnvironment(l,o);var a=s.abstractQueryTree.parseExecutableUnit(i[0]);"select"===a.kind?this.executeSelect(a,o,n,r,function(e,n){if(e)if("object"==typeof n&&n.denorm===!0)t(!0,n.bindings);else{var n=s.denormalizeBindingsList(n,o);null!=n?t(!0,n):t(!1,n)}else t(!1,n)}):"ask"===a.kind?(a.projection=[{token:"variable",kind:"*"}],this.executeSelect(a,o,n,r,function(e,n){e?e?n.length>0?t(!0,!0):t(!0,!1):t(!1,n):t(!1,n)})):"construct"===a.kind&&(a.projection=[{token:"variable",kind:"*"}],s=this,this.executeSelect(a,o,n,r,function(e,n){if(e)if(e){var n=s.denormalizeBindingsList(n,o);if(null!=n){var r=new RDFJSInterface.Graph;null==a.template&&(a.template={triplesContext:a.pattern});for(var l=1,i=[],u=0;n.length>u;u++){for(var c=n[u],p=0;i.length>p;p++)delete i[p].valuetmp;for(var p=0;a.template.triplesContext.length>p;p++){for(var h=["subject","predicate","object"],f=a.template.triplesContext[p],d=0;h.length>d;d++){var v=h[d];if("blank"===f[v].token)if(f[v].valuetmp&&null!=f[v].valuetmp);else{var g="_:b"+l;l++,f[v].valuetmp=g,i.push(f[v])}}var y=RDFJSInterface.buildRDFResource(f.subject,c,s,o),d=RDFJSInterface.buildRDFResource(f.predicate,c,s,o),m=RDFJSInterface.buildRDFResource(f.object,c,s,o);if(null!=y&&null!=d&&null!=m){var b=new RDFJSInterface.Triple(y,d,m);r.add(b)}}}t(!0,r)}else t(!1,n)}else t(!1,n);else t(!1,n)}))},QueryEngine.QueryEngine.prototype.executeSelect=function(e,t,n,r,l){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var i=e.projection,s=e.dataset,o=e.modifier,a=e.limit,u=e.offset,c=e.order,p=this;if((null!=n||null!=r)&&(s.implicit=n||[],s.named=r||[]),null!=s.implicit&&0===s.implicit.length&&null!=s.named&&0===s.named.length&&s.implicit.push(this.lexicon.defaultGraphUriTerm),null!=p.normalizeDatasets(s.implicit.concat(s.named),t)){var h=p.executeSelectUnit(i,s,e.pattern,t);if(null!=h){if(null!=e.group&&""===e.group){for(var f=!1,d=0;e.projection.length>d;d++)if(null!=e.projection[d].expression&&"aggregate"===e.projection[d].expression.expressionType){f=!0;break}f===!0&&(e.group="singleGroup")}if(e.group&&""!=e.group)if(p.checkGroupSemantics(e.group,i)){for(var v=p.groupSolution(h,e.group,s,t),g=[],d=0;v.length>d;d++){var y=p.aggregateBindings(i,v[d],s,t);g.push(y)}l(!0,{bindings:g,denorm:!0})}else l(!1,"Incompatible Group and Projection variables");else{var m=p.applyOrderBy(c,h,s,t),b=p.projectBindings(i,m,s),k=p.applyModifier(o,b),x=p.applyLimitOffset(u,a,k),w=p.removeDefaultGraphBindings(x,s);l(!0,w)}}else l(!1,h)}else l(!1,"Error normalizing datasets")}else l(!1,"Cannot execute "+e.kind+" query as a select query")},QueryEngine.QueryEngine.prototype.groupSolution=function(e,t,n,r){var l=[],i=[],s=!1,o=this;if("singleGroup"===t)return[e];for(var a=0;e.length>a;a++){arguments.callee;for(var u=e[a],c=!0,p=0;t.length>p;p++){arguments.callee;var h=t[p],f=null;if("var"===h.token)f=h.value,0==s&&l.push(f);else if("aliased_expression"===h.token)if(f=h.alias.value,0==s&&l.push(f),"var"===h.expression.primaryexpression)u[h.alias.value]=u[h.expression.value.value];else{var d=this.copyDenormalizedBindings([u],r.outCache),v=QueryFilters.runFilter(h.expression,d[0],o,n,r);QueryFilters.isEbvError(v)?c=!1:(null!=v.value&&(v.value=""+v.value),u[h.alias.value]=v)}else{var d=o.copyDenormalizedBindings([u],r.outCache),v=QueryFilters.runFilter(h,d[0],o,r);QueryFilters.isEbvError(v)?c=!1:(u["groupCondition"+env._i]=v,f="groupCondition"+env._i,0==s&&l.push(f))}}0==s&&(s=!0),c===!0&&i.push(u)}for(var g={},y={},m=0,a=0;i.length>a;a++){for(var b=i[a],k="",p=0;l.length>p;p++){var x=b[l[p]];k+="object"==typeof x?x.value:x}null==g[k]?(y[k]=m,g[k]=[b]):g[k].push(b)}var w=[];for(var S in g)w.push(g[S]);return w},QueryEngine.QueryEngine.prototype.executeSelectUnit=function(e,t,n,r){if("BGP"===n.kind)return this.executeAndBGP(e,t,n,r);if("UNION"===n.kind)return this.executeUNION(e,t,n.value,r);if("JOIN"===n.kind)return this.executeJOIN(e,t,n,r);if("LEFT_JOIN"===n.kind)return this.executeLEFT_JOIN(e,t,n,r);if("FILTER"===n.kind){var l=this.executeSelectUnit(e,t,n.value,r);return null!=l?l=QueryFilters.checkFilters(n,l,!1,t,r,this):[]}return"EMPTY_PATTERN"===n.kind?[]:"ZERO_OR_MORE_PATH"===n.kind||"ONE_OR_MORE_PATH"===n.kind?this.executeZeroOrMorePath(n,t,r):(console.log("Cannot execute query pattern "+n.kind+". Not implemented yet."),null)},QueryEngine.QueryEngine.prototype.executeZeroOrMorePath=function(e,t,n){var r=[],l=!1;if("var"===e.x.token&&r.push({token:"variable",kind:"var",value:e.x.value}),"var"===e.y.token&&r.push({token:"variable",kind:"var",value:e.y.value}),0===r.length&&(r.push({token:"variable",kind:"*"}),l=!0),"var"===e.x.token&&"var"===e.y.token){for(var i,s,o,a,u=this.executeAndBGP(r,t,e.path,n),c={},p=[],h=e.x.value,f=e.x,d=e.path,v=0;u.length>v;v++)if(i=u[v][h],null==c[i]){a=this.lexicon.retrieve(i),e.x=a,e.path=this.abstractQueryTree.replace(d,f,a,n),d=Utils.clone(e.path),s=this.executeZeroOrMorePath(e,t,n);for(var g=0;s.length>g;g++)o=s[g],o[h]=i,p.push(o);f=a}return p}if("var"!==e.x.token&&"var"===e.y.token){var u,o,c={},y=!0,m=[],b=[];
e.x;for(var f;1==y||0!==m.length;){if(y===!0)u=this.executeAndBGP(r,t,e.path,n),f=e.x,y=!1;else{var k=m.pop(),x=this.lexicon.retrieve(k),w=e.path;w=this.abstractQueryTree.replace(w,f,x,n),u=this.executeAndBGP(r,t,w,n),f=x}for(var v=0;u.length>v;v++){var x=u[v][e.y.value];c[x]!==!0&&(o={},o[e.y.value]=x,b.push(o),c[x]=!0,m.push(x))}}return b}throw"Kind of path not supported!"},QueryEngine.QueryEngine.prototype.executeUNION=function(e,t,n,r){var l=n[0],i=n[1],s=null,o=null;if(2!=n.length)throw"SPARQL algebra UNION with more than two components";var a=this;if(s=a.executeSelectUnit(e,t,l,r),null==s)return null;if(o=a.executeSelectUnit(e,t,i,r),null==o)return null;var u=QueryPlan.unionBindings(s,o);return u=QueryFilters.checkFilters(n,u,!1,t,r,a)},QueryEngine.QueryEngine.prototype.executeAndBGP=function(e,t,n,r){var l=this,i=QueryPlan.executeAndBGPsDPSize(n.value,t,this,r);return null!=i?QueryFilters.checkFilters(n,i,!1,t,r,l):null},QueryEngine.QueryEngine.prototype.executeLEFT_JOIN=function(e,t,n,r){var l,i,s=n.lvalue,o=n.rvalue,a=null,u=null,c=this;if(a=c.executeSelectUnit(e,t,s,r),null==a)return null;if(u=c.executeSelectUnit(e,t,o,r),null==u)return null;var p=QueryPlan.leftOuterJoinBindings(a,u),h=QueryFilters.checkFilters(n,p,!0,t,r,c);if(a.length>1&&u.length>1){var f=[],d={};for(var v in a[0])d[v]=!0;for(v in u[0])1!=d[v]&&f.push(v);l=[],i={};for(var g=0;h.length>g;g++)if(h[g].__nullify__===!0){for(var y=0;f.length>y;y++)h[g].bindings[f[y]]=null;var m=[],b=[];for(var v in h[g].bindings)null!=h[g].bindings[v]&&(m.push(v+h[g].bindings[v]),m.sort(),b.push(m.join("")));if(null==i[m.join("")]){for(y=0;b.length>y;y++)i[b[y]]=!0;l.push(h[g].bindings)}}else{l.push(h[g]);var m=[],b=[];for(var v in h[g])m.push(v+h[g][v]),m.sort(),i[m.join("")]=!0}return l}return h},QueryEngine.QueryEngine.prototype.executeJOIN=function(e,t,n,r){var l=n.lvalue,i=n.rvalue,s=null,o=null,a=this;if(s=a.executeSelectUnit(e,t,l,r),null==s)return null;if(o=a.executeSelectUnit(e,t,i,r),null==o)return null;var u=null;if(0===s.length||0===o.length)u=[];else{var c={},p=[];for(var h in s[0])c[h]=!1;for(var h in o[0])c[h]===!1&&p.push(h);u=0==p.length?QueryPlan.joinBindings(s,o):this.abstractQueryTree.treeWithUnion(l)||this.abstractQueryTree.treeWithUnion(i)?QueryPlan.joinBindings(s,o):QueryPlan.joinBindings2(p,s,o)}return u=QueryFilters.checkFilters(n,u,!1,t,r,a)},QueryEngine.QueryEngine.prototype.rangeQuery=function(e,t){var n=this,r=n.normalizeQuad(e,t,!1);if(null!=r){var l=n.backend.range(new QuadIndexCommon.Pattern(r));return null==l||0==l.length?[]:l}return console.log("ERROR normalizing quad"),null},QueryEngine.QueryEngine.prototype.executeUpdate=function(e,t){var n=e.prologue,r=e.units,l=this,i={blanks:{},outCache:{}};this.registerNsInEnvironment(n,i);for(var s=0;r.length>s;s++){var o=l.abstractQueryTree.parseExecutableUnit(r[s]);if("insertdata"===o.kind){for(var a=0;o.quads.length>a;a++){var u=o.quads[a],c=l._executeQuadInsert(u,i);if(c!==!0)return t(!1,error)}t(!0)}else if("deletedata"===o.kind){for(var a=0;o.quads.length>a;a++){var u=o.quads[a];this._executeQuadDelete(u,i)}t(!0)}else if("modify"===o.kind)this._executeModifyQuery(o,i,t);else if("create"===o.kind)t(!0);else if("load"===o.kind){var p={uri:Utils.lexicalFormBaseUri(o.sourceGraph,i)};null!=o.destinyGraph&&(p={uri:Utils.lexicalFormBaseUri(o.destinyGraph,i)});var l=this;this.rdfLoader.load(o.sourceGraph.value,p,function(e,n){if(0==e)console.log("Error loading graph"),console.log(n),t(!1,"error batch loading quads");else{var n=l.batchLoad(n);t(null!=n,n||"error batch loading quads")}})}else if("drop"===o.kind)this._executeClearGraph(o.destinyGraph,i,t);else{if("clear"!==o.kind)throw Error("not supported execution unit");this._executeClearGraph(o.destinyGraph,i,t)}}},QueryEngine.QueryEngine.prototype.batchLoad=function(e,t){var n=null,r=null,l=null,i=null;Utils.stackCounterLimit;var s,o,a,u,c,p=0,h=!0,f={};this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();for(var d=0;e.length>d;d++){a=e[d],a.subject.uri||"uri"===a.subject.token?(o=this.lexicon.registerUri(a.subject.uri||a.subject.value),null!=a.subject.uri&&(a.subject={token:"uri",value:a.subject.uri},delete a.subject.uri),n=o):a.subject.literal||"literal"===a.subject.token?(o=this.lexicon.registerLiteral(a.subject.literal||a.subject.value),null!=a.subject.literal&&(a.subject=this.lexicon.parseLiteral(a.subject.literal),delete a.subject.literal),n=o):(s=f[a.subject.blank||a.subject.value],null==s&&(s=this.lexicon.registerBlank(a.subject.blank||a.subject.value),f[a.subject.blank||a.subject.value]=s),null==a.subject.token&&(a.subject.token="blank",a.subject.value=a.subject.blank,delete a.subject.blank),n=s),a.predicate.uri||"uri"===a.predicate.token?(o=this.lexicon.registerUri(a.predicate.uri||a.predicate.value),null!=a.predicate.uri&&(a.predicate={token:"uri",value:a.predicate.uri},delete a.subject.uri),r=o):a.predicate.literal||"literal"===a.predicate.token?(o=this.lexicon.registerLiteral(a.predicate.literal||a.predicate.value),null!=a.predicate.literal&&(a.predicate=this.lexicon.parseLiteral(a.predicate.literal),delete a.predicate.literal),r=o):(s=f[a.predicate.blank||a.predicate.value],null==s&&(s=this.lexicon.registerBlank(a.predicate.blank||a.predicate.value),f[a.predicate.blank||a.predicate.value]=s),null==a.predicate.token&&(a.predicate.token="blank",a.predicate.value=a.predicate.blank,delete a.predicate.blank),r=s),a.object.uri||"uri"===a.object.token?(o=this.lexicon.registerUri(a.object.uri||a.object.value),null!=a.object.uri&&(a.object={token:"uri",value:a.object.uri},delete a.subject.uri),l=o):a.object.literal||"literal"===a.object.token?("literal"===a.object.token&&(a.object.value=null!=a.object.type?'"'+a.object.value+'"^^<'+a.object.type+">":null!=a.object.lang?'"'+a.object.value+'"@'+a.object.lang:'"'+a.object.value+'"'),o=this.lexicon.registerLiteral(a.object.literal||a.object.value),null!=a.object.literal&&(a.object=this.lexicon.parseLiteral(a.object.literal),delete a.object.literal),l=o):(s=f[a.object.blank||a.object.value],null==s&&(s=this.lexicon.registerBlank(a.object.blank||a.object.value),f[a.object.blank||a.object.value]=s),null==a.object.token&&(a.object.token="blank",a.object.value=a.object.blank,delete a.object.blank),l=s),a.graph.uri||"uri"===a.graph.token?(o=this.lexicon.registerUri(a.graph.uri||a.graph.value),null!=a.graph.uri&&(a.graph={token:"uri",value:a.graph.uri},delete a.subject.uri),this.lexicon.registerGraph(o),i=o):a.graph.literal||"literal"===a.graph.token?(o=this.lexicon.registerLiteral(a.graph.literal||a.graph.value),null!=a.predicate.literal&&(a.predicate=this.lexicon.parseLiteral(a.predicate.literal),delete a.predicate.literal),i=o):(s=f[a.graph.blank||a.graph.value],null==s&&(s=this.lexicon.registerBlank(a.graph.blank||a.graph.value),f[a.graph.blank||a.graph.value]=s),null==a.graph.token&&(a.graph.token="blank",a.graph.value=a.graph.blank,delete a.graph.blank),i=s),c=a,a={subject:n,predicate:r,object:l,graph:i},u=new QuadIndexCommon.NodeKey(a);var v=this.backend.search(u);if(!v){if(v=this.backend.index(u),1!=v){h=!1;break}this.eventsOnBatchLoad&&this.callbacksBackend.nextGraphModification(Callbacks.added,[c,a]),p+=1}}null!=this.lexicon.updateAfterWrite&&this.lexicon.updateAfterWrite();var g=function(){h?t&&t(!0,p):t&&t(!1,null)};return this.eventsOnBatchLoad?this.callbacksBackend.endGraphModification(function(){g()}):g(),h?p:null},QueryEngine.QueryEngine.prototype.computeCosts=function(e,t){for(var n=0;e.length>n;n++)e[n]._cost=this.quadCost(e[n],t);return e},QueryEngine.QueryEngine.prototype._executeModifyQuery=function(e,t,n){var r=this,l=!0,i=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e["delete"]=null==e["delete"]?[]:e["delete"],Utils.seq(function(n){var s=[],o=[];if(null!=e["with"]&&s.push(e["with"]),null!=e.using){o=[];for(var a=0;e.using.length>a;a++){var u=e.using[a];"named"===u.kind?o.push(u.uri):s.push(u.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],r.executeSelect(e,t,s,o,function(e,s){if(e){var s=r.denormalizeBindingsList(s,t);return null!=s?i=s:l=!1,n()}return l=!1,n()})},function(n){var o=e["with"];if(l){for(var a=[],u=0;e["delete"].length>u;u++)for(var c=e["delete"][u],p=0;i.length>p;p++){for(var h={},f=i[p],d=0;s.length>d;d++){var v=s[d];"graph"==v&&null==c[v]?h.graph=o:h[v]="var"===c[v].token?f[c[v].value]:c[v]}a.push(h)}for(var h,p=0;a.length>p;p++)h=a[p],r._executeQuadDelete(h,t);n()}else n()},function(n){var o=e["with"];if(l){for(var a=[],u=0;e.insert.length>u;u++)for(var c=e.insert[u],p=0;i.length>p;p++){for(var h={},f=i[p],d=0;s.length>d;d++){var v=s[d];"graph"==v&&null==c[v]?h.graph=o:h[v]="var"===c[v].token?f[c[v].value]:c[v]}a.push(h)}for(var u=0;a.length>u;u++){var h=a[u];r._executeQuadInsert(h,t)}n()}else n()})(function(){n(l)})},QueryEngine.QueryEngine.prototype._executeQuadInsert=function(e,t){var n=this,r=this.normalizeQuad(e,t,!0);if(null!=r){var l=new QuadIndexCommon.NodeKey(r),i=n.backend.search(l);if(i)return i;var i=n.backend.index(l);return 1==i?(n.callbacksBackend.nextGraphModification(Callbacks.added,[e,r]),!0):(console.log("ERROR inserting quad"),!1)}return console.log("ERROR normalizing quad"),!1},QueryEngine.QueryEngine.prototype._executeQuadDelete=function(e,t){var n=this,r=this.normalizeQuad(e,t,!1);if(null!=r){var l=new QuadIndexCommon.NodeKey(r);n.backend["delete"](l);var i=n.lexicon.unregister(e,l);return 1==i?(n.callbacksBackend.nextGraphModification(Callbacks.deleted,[e,r]),!0):(console.log("ERROR unregistering quad"),!1)}return console.log("ERROR normalizing quad"),!1},QueryEngine.QueryEngine.prototype._executeClearGraph=function(e,t,n){if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",n);else if("named"===e){var r=this,l=this.lexicon.registeredGraphs(!0);if(null!=l){var i=!1;Utils.repeat(0,l.length,function(e,t){var n=l[t._i],s=arguments.callee;i?e(s,t):r.execute("DELETE { GRAPH <"+n+"> { ?s ?p ?o } } WHERE { GRAPH <"+n+"> { ?s ?p ?o } }",function(n){i=!n,e(s,t)})},function(){n(!i)})}else n(!1,"Error deleting named graphs")}else if("all"===e){var r=this;this.execute("CLEAR DEFAULT",function(e,t){e?r.execute("CLEAR NAMED",n):n(!1,t)})}else if("uri"==e.token){var s=Utils.lexicalFormBaseUri(e,t);null!=s?this.execute("DELETE { GRAPH <"+s+"> { ?s ?p ?o } } WHERE { GRAPH <"+s+"> { ?s ?p ?o } }",n):n(!1,"wrong graph URI")}else n(!1,"wrong graph URI")},QueryEngine.QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var n={},r=0;e.length>r;r++){var l=e[r];"var"===l.token?n[l.value]=!0:"aliased_expression"===l.token&&(n[l.alias.value]=!0)}for(r=0;t.length>r;r++){var i=t[r];if("var"===i.kind){if(null==n[i.value.value])return!1}else if("aliased"===i.kind&&i.expression&&"var"===i.expression.primaryexpression&&null==n[i.expression.value.value])return!1}return!0},QueryEngine.QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t};var Callbacks={};Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new AbstractQueryTree.AbstractQueryTree,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;this.indices.length>e;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],Callbacks.added,Callbacks.deleted,null==this.updateInProgress&&(this.updateInProgress={added:[],deleted:[]})},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){var t=this;if(null!=this.updateInProgress){var n=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,n[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,n[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){this.updateInProgress=null},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,n){for(var r={},l=0;t.length>l;l++){var i=t[l];for(var s in this.indexMap){var o=this.indexMap[s],a=this.componentOrders[s];this._searchCallbacksInIndex(o,a,e,i,r),0!=this.pendingQueries.length&&(o=this.queriesIndexMap[s],this._searchQueriesInIndex(o,a,i))}}this.dispatchNotifications(r),null!=n&&n(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,n){for(var r=this.emptyNotificationsMap[e]||[],l=0;r.length>l;l++)r[l](e,t);n()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var n=this.callbacksMap[t],r=e[t][Callbacks.deleted];if(null!=r)try{n(Callbacks.deleted,r)}catch(l){}for(var i in e[t])if(i!=Callbacks.deleted)try{n(i,e[t][i])}catch(l){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,n,r,l){for(var i=r[1],r=r[0],s=0;t.length+1>s;s++){for(var o=e._||[],a=[],u=0;o.length>u;u++){var c=o[u];null!=this.callbacksMap[c]&&(l[c]=l[c]||{},l[c][n]=l[c][n]||[],l[c][n].push(r),a.push(c))}e._=a;var p=t[s];if(null==e[""+i[p]])break;e=e[""+i[p]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var n=this.emptyNotificationsMap[e]||[];n.push(t),this.emptyNotificationsMap[e]=n},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var n=this.emptyNotificationsMap[e];null!=n&&(n=Utils.remove(n,t)),this.emptyNotificationsMap[e]=n},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,n,r,l,i){var s=this._tokenizeComponents(e,t,n,r),o={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,o);for(var a=this,u=this.engine.normalizeQuad(s,o,!0),c=new QuadIndexCommon.Pattern(u),p=a._indexForPattern(c),h=a.componentOrders[p],f=a.indexMap[p],d=0;h.length>d;d++){var v=h[d],g=u[v];if("_"===g){null==f._&&(f._=[]),a.callbackCounter++,f._.push(a.callbackCounter),a.callbacksMap[a.callbackCounter]=l,a.callbacksInverseMap[l]=a.callbackCounter;break}d===h.length-1?(f[g]=f[g]||{_:[]},a.callbackCounter++,f[g]._.push(a.callbackCounter),a.callbacksMap[a.callbackCounter]=l,a.callbacksInverseMap[l]=a.callbackCounter):(f[g]=f[g]||{},f=f[g])}null!=i&&i(!0)},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,n,r){var l={};return l.subject=null==e?Callbacks.ANYTHING:0==e.indexOf("_:")?{token:"blank",value:e}:{token:"uri",value:e},l.predicate=null==t?Callbacks.ANYTHING:{token:"uri",value:t},l.object=null==n?Callbacks.ANYTHING:{token:"uri",value:n},l.graph=null==r?Callbacks.ANYTHING:{token:"uri",value:r},l},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,n=this.indices,r=0;n.length>r;r++)for(var l=n[r],i=this.componentOrders[l],s=0;i.length>s&&Utils.include(t,i[s])!==!1;s++)if(s==t.length-1)return l;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,n,r;4===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,n=arguments[1],r=arguments[2]);var l="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",i=this,s={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,s);var o=[];this.engine.execute(l,function(t,l){if(t){var a=l,u=!1,c=function(e,t){if("eventsFlushed"===e&&u){u=!1;try{n(a)}catch(r){}}else if("eventsFlushed"!==e){u=!0;for(var l=0;t.length>l;l++){var c=t[l],p=RDFJSInterface.buildRDFResource(c.subject,o,i.engine,s),h=RDFJSInterface.buildRDFResource(c.predicate,o,i.engine,s),f=RDFJSInterface.buildRDFResource(c.object,o,i.engine,s);null!=p&&null!=h&&null!=f&&(c=new RDFJSInterface.Triple(p,h,f),e===Callbacks.added?a.add(c):e===Callbacks.deleted&&a.remove(c))}}};i.observersMap[n]=c,i.subscribeEmpty(Callbacks.eventsFlushed,c),i.subscribe(e,null,null,null,c,function(){try{n(a)}catch(e){}r&&r(!0)})}else r&&r(!1)})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return t?(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0):!1},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,n){var r=this.aqt.parseQueryString(e),l=this.aqt.parseSelect(r.units[0]),i=this.aqt.collectBasicTriples(l),s=this,o={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,o);var a,u,c,p,h,f=this.queryCounter;this.queryCounter++,this.queriesMap[f]=e,this.queriesInverseMap[e]=f,this.queriesList.push(f),this.queriesCallbacksMap[f]=t;for(var d=0;i.length>d;d++){u=i[d],null==u.graph&&(u.graph=s.engine.lexicon.defaultGraphUriTerm);var v=s.engine.normalizeQuad(u,o,!0);a=new QuadIndexCommon.Pattern(v),c=s._indexForPattern(a),p=s.componentOrders[c],h=s.queriesIndexMap[c];for(var g=0;p.length>g;g++){var y=p[g],m=v[y];if("string"==typeof m){null==h._&&(h._=[]),h._.push(f);break}g===p.length-1?(h[m]=h[m]||{_:[]},h[m]._.push(f)):(h[m]=h[m]||{},h=h[m])}}this.engine.execute(e,function(e,n){e?t(n):console.log("ERROR in query callback "+n)}),null!=n&&n()},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=Utils.remove(this.queriesList,t))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,n){for(var r=n[1],n=n[0],l=0;t.length+1>l;l++){for(var i=e._||[],s=[],o=0;i.length>o;o++){var a=i[o];Utils.include(this.pendingQueries,a)&&(Utils.remove(this.pendingQueries,a),this.matchedQueries.push(a)),null!=this.queriesMap[a]&&s.push(a)}e._=s;var u=t[l];if(null==e[""+r[u]])break;e=e[""+r[u]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,n,r,l,i=this,s={};Utils.repeat(0,this.matchedQueries.length,function(e,o){t=arguments.callee,r=i.matchedQueries[o._i],null==s[r]?(s[r]=!0,n=i.queriesMap[r],l=i.queriesCallbacksMap[r],Utils.recur(function(){i.engine.execute(n,function(n,r){if(n)try{l(r)}catch(i){}e(t,o)})})):e(t,o)},function(){e()})};var RDFStoreClient={};try{"undefined"==typeof Worker&&(Worker=null)}catch(e){Worker=null}Worker&&(RDFStoreClient.RDFStoreClient=function(e,t,n){console.log("trying to load "+e),this.connection=Worker.Worker?new Worker.Worker(e):new Worker(e),this.callbacksCounter=1;var r=this,l=function(e,t){e===!0?n(!0,r):n(!1,t)};this.rdf=RDFJSInterface.rdf,console.log("The worker"),console.log(this.connection);var r=this;this.connection.onmessage=function(e){r.receive(e)},this.observingCallbacks={},this.callbacks={0:{cb:l,fn:"create"}},this.connection.postMessage({fn:"create",args:t,callback:"0"})},RDFStoreClient.RDFStoreClient.prototype.receive=function(e){var t=e.data||e;if("workerRequest:NetworkTransport:load"===t.fn){var n=this,r=t.callback,l=t.arguments.concat(function(e,t){n.connection.postMessage({fn:"workerRequestResponse",results:[e,t],callback:r})});NetworkTransport.load.apply(NetworkTransport,l)}else{var i=this.callbacks[t.callback];i&&("create"===i.fn||"execute"===i.fn||"insert"===i.fn||"graph"==i.fn||"node"===i.fn||"insert"===i.fn||"delete"===i.fn||"clear"===i.fn||"load"===i.fn||"startObservingQueryEndCb"===i.fn||"registeredGraphs"===i.fn?(delete this.callbacks[t.callback],i.cb(t.success,t.result)):"startObservingQuery"===i.fn?i.cb(t.result):"startObservingNode"===i.fn?i.cb(t.result):"subscribe"===i.fn&&i.cb(t.event,t.result))}},RDFStoreClient.RDFStoreClient.prototype.registerCallback=function(e,t){var n=""+this.callbacksCounter;return this.callbacks[n]={fn:e,cb:t},this.callbacksCounter++,n},RDFStoreClient.RDFStoreClient.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;1===arguments.length?(e=arguments[0],t=function(){}):2===arguments.length&&(e=arguments[0],t=arguments[1]);var n=this.registerCallback("execute",t);this.connection.postMessage({fn:"execute",args:[e],callback:n})}},RDFStoreClient.RDFStoreClient.prototype.insert=function(){var e,t,n;if(1===arguments.length)t=arguments[0],this.connection.postMessage({fn:"insert",args:[t]});else if(2===arguments.length){t=arguments[0],n=arguments[1]||function(){};var r=this.registerCallback("insert",n);this.connection.postMessage({fn:"insert",args:[t],callback:r})}else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=arguments[1],n=arguments[2]||function(){};var r=this.registerCallback("insert",n);this.connection.postMessage({fn:"insert",args:[t,e],callback:r})}},RDFStoreClient.RDFStoreClient.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){};else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}var n=this,r=function(e,r){if(e){for(var l,i=0;r.triples.length>i;i++)l=r.triples[i],r.triples[i]=new RDFJSInterface.Triple(n.adaptJSInterface(l.subject),n.adaptJSInterface(l.predicate),n.adaptJSInterface(l.object));t(e,n.rdf.createGraph(r.triples))}else t(e,r)},l=this.registerCallback("insert",r);null==e?this.connection.postMessage({fn:"graph",args:[],callback:l}):this.connection.postMessage({fn:"graph",args:[e],callback:l})},RDFStoreClient.RDFStoreClient.prototype.node=function(){var e=null,t=null,n=null;if(2===arguments.length)n=arguments[0],t=arguments[1]||function(){};else{if(3!==arguments.length)throw"An optional graph URI and a callback function must be provided";n=arguments[0],e=arguments[1],t=arguments[2]||function(){}}var r=this,l=function(e,n){if(e){for(var l,i=0;n.triples.length>i;i++)l=n.triples[i],n.triples[i]=new RDFJSInterface.Triple(r.adaptJSInterface(l.subject),r.adaptJSInterface(l.predicate),r.adaptJSInterface(l.object));t(e,r.rdf.createGraph(n.triples))}else t(e,n)},i=this.registerCallback("insert",l);null==e?this.connection.postMessage({fn:"node",args:[n],callback:i}):this.connection.postMessage({fn:"node",args:[n,e],callback:i})},RDFStoreClient.RDFStoreClient.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t),this.connection.postMessage({fn:"rdf/setPrefix",args:[e,t],callback:null})},RDFStoreClient.RDFStoreClient.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e),this.connection.postMessage({fn:"rdf/setDefaultPrefix",args:[e],callback:null})},RDFStoreClient.RDFStoreClient.prototype["delete"]=function(){var e,t,n;if(1===arguments.length)t=arguments[0],this.connection.postMessage({fn:"delete",args:[t]});else if(2===arguments.length){t=arguments[0],n=arguments[1]||function(){};var r=this.registerCallback("delete",n);this.connection.postMessage({fn:"delete",args:[t],callback:r})}else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=arguments[1],n=arguments[2]||function(){};var r=this.registerCallback("delete",n);this.connection.postMessage({fn:"delete",args:[t,e],callback:r})}},RDFStoreClient.RDFStoreClient.prototype.clear=function(){var e,t;if(1===arguments.length){t=arguments[0]||function(){};var n=this.registerCallback("clear",t);this.connection.postMessage({fn:"clear",args:[],callback:n})}else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=arguments[0],t=arguments[1]||function(){};var n=this.registerCallback("clear",t);this.connection.postMessage({fn:"clear",args:[e],callback:n})}},RDFStoreClient.RDFStoreClient.prototype.setBatchLoadEvents=function(e){this.connection.postMessage({fn:"setBatchLoadEvents",args:[e]})},RDFStoreClient.RDFStoreClient.prototype.registerDefaultNamespace=function(e,t){this.connection.postMessage({fn:"registerDefaultNamespace",args:[e,t]})},RDFStoreClient.RDFStoreClient.prototype.registerDefaultProfileNamespaces=function(){this.connection.postMessage({fn:"registerDefaultProfileNamespaces",args:[]})},RDFStoreClient.RDFStoreClient.prototype.load=function(){var e,t,n,r;if(3===arguments.length){e=arguments[0],t=arguments[1],r=arguments[2]||function(){};var l=this.registerCallback("load",r);this.connection.postMessage({fn:"load",args:[e,t],callback:l})}else if(4===arguments.length){e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3]||function(){};var l=this.registerCallback("load",r);this.connection.postMessage({fn:"load",args:[e,t,n],callback:l})}else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided"},RDFStoreClient.RDFStoreClient.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],n=arguments[2];if(null!=n){var r=this.registerCallback("startObservingQuery",t);this.observingCallbacks[e]=r;var l=this.registerCallback("startObservingQueryEndCb",n);this.connection.postMessage({fn:"startObservingQuery",args:[e],callback:[r,l]})}else{var r=this.registerCallback("startObservingQuery",t);this.observingCallbacks[e]=r,this.connection.postMessage({fn:"startObservingQuery",args:[e],callback:[r]})}},RDFStoreClient.RDFStoreClient.prototype.stopObservingQuery=function(e){var t=this.observingCallbacks[e];delete this.observingCallbacks[e],delete this.callbacks[t],this.connection.postMessage({fn:"stopObservingQuery",args:[e],callback:[]})},RDFStoreClient.RDFStoreClient.prototype.startObservingNode=function(){var e,t,n;if(2===arguments.length){e=arguments[0],n=arguments[1];var r=this,l=function(e){for(var t,l=0;e.triples.length>l;l++)t=e.triples[l],e.triples[l]=new RDFJSInterface.Triple(r.adaptJSInterface(t.subject),r.adaptJSInterface(t.predicate),r.adaptJSInterface(t.object));n(r.rdf.createGraph(e.triples))},i=this.registerCallback("startObservingNode",l);this.observingCallbacks[n]=i,this.connection.postMessage({fn:"startObservingNode",args:[e],callback:i})}else if(3===arguments.length){e=arguments[0],t=arguments[1],n=arguments[2];var r=this,l=function(e){for(var t,l=0;e.triples.length>l;l++)t=e.triples[l],e.triples[l]=new RDFJSInterface.Triple(r.adaptJSInterface(t.subject),r.adaptJSInterface(t.predicate),r.adaptJSInterface(t.object));n(r.rdf.createGraph(e.triples))},i=this.registerCallback("startObservingNode",l);this.observingCallbacks[n]=i,this.connection.postMessage({fn:"startObservingNode",args:[e,t],callback:i})}},RDFStoreClient.RDFStoreClient.prototype.stopObservingNode=function(e){var t=this.observingCallbacks[e];delete this.observingCallbacks[e],delete this.callbacks[t],this.connection.postMessage({fn:"stopObservingNode",args:[t],callback:[]})},RDFStoreClient.RDFStoreClient.prototype.subscribe=function(e,t,n,r,l){var i=this,s=function(e,t){for(var n,r=0;t.length>r;r++)n=t[r],t[r]=new RDFJSInterface.Triple(i.adaptJSInterface(n.subject),i.adaptJSInterface(n.predicate),i.adaptJSInterface(n.object));l(e,t)},o=this.registerCallback("subscribe",s);this.observingCallbacks[l]=o,this.connection.postMessage({fn:"subscribe",args:[e,t,n,r],callback:o})},RDFStoreClient.RDFStoreClient.prototype.unsubscribe=function(e){var t=this.observingCallbacks[e];delete this.observingCallbacks[e],delete this.callbacks[t],this.connection.postMessage({fn:"unsubscribe",args:[t],callback:[]})},RDFStoreClient.RDFStoreClient.prototype.registeredGraphs=function(e){var t=this,n=function(n,r){if(n){for(var l=0;r.length>l;l++){var i=r[l];r[l]=t.adaptJSInterface(i)}e(n,r)}else e(n,r)},r=this.registerCallback("registeredGraphs",n);this.connection.postMessage({fn:"registeredGraphs",args:[],callback:r})},RDFStoreClient.RDFStoreClient.prototype.adaptJSInterface=function(e){return"BlankNode"===e.interfaceName?new RDFJSInterface.BlankNode(e.bnodeId):"Literal"===e.interfaceName?new RDFJSInterface.Literal(e.nominalValue,e.language,e.datatype):"NamedNode"===e.interfaceName?new RDFJSInterface.NamedNode(e.nominalValue):void 0},RDFStoreClient.RDFStoreClient.prototype.isWebWorkerConnection=!0);var Store={},MongodbQueryEngine={MongodbQueryEngine:function(){throw"MongoDB backend not supported in the browser version"}};Store.VERSION="0.7.0",Store.connect=function(){var e,t,n;1==arguments.length&&(e=__dirname,t={},n=arguments[0]),2==arguments.length?("string"==typeof arguments[0]?(e=arguments[0],t={}):(e=__dirname+"/index.js",t=arguments[0]),n=arguments[1]):(e=arguments[0],t=arguments[1],n=arguments[2]);try{Worker?new RDFStoreClient.RDFStoreClient(e,t,function(e,t){n(e,t)}):Store.create(t,function(e){n(!1,e)})}catch(r){Store.create(t,function(e){n(!1,e)})}},Store.create=function(){return 1==arguments.length?new Store.Store(arguments[0]):2==arguments.length?new Store.Store(arguments[0],arguments[1]):new Store.Store},Store.Store=function(e,t){var n=null,r=null;if(0==arguments.length)r={};else if(1==arguments.length)r={},n=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";r=e,n=t}null==r.treeOrder&&(r.treeOrder=15),this.functionMap={};var l=this;this.customFns={},"mongodb"===r.engine?(this.isMongodb=!0,this.engine=new MongodbQueryEngine.MongodbQueryEngine(r),this.engine.readConfiguration(function(){r.overwrite===!0?l.engine.clean(function(){n(l)}):n(l)})):new Lexicon.Lexicon(function(e){r.overwrite===!0&&e.clear(),new QuadBackend.QuadBackend(r,function(t){r.overwrite===!0&&t.clear(),r.backend=t,r.lexicon=e,l.engine=new QueryEngine.QueryEngine(r),n&&n(l)})},r.name)},Store.Store.prototype.rdf=RDFJSInterface.rdf,Store.Store.prototype.rdf.api=RDFJSInterface,Store.Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.Store.prototype.executeWithEnvironment=function(){var e,t,n;if(3===arguments.length){e=arguments[0];var r=function(){};t=arguments[1],n=arguments[2]}else if(4===arguments.length){e=arguments[0];var r=arguments[3];t=arguments[1],n=arguments[2]}for(var l=[],i=[],s=0;t.length>s;s++)l.push({token:"uri",value:t[s]});for(var s=0;n.length>s;s++)i.push({token:"uri",value:n[s]});this.engine.execute(e,r,l,i)},Store.Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.Store.prototype.node=function(){var e=null,t=null,n=null;if(2===arguments.length)n=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";n=arguments[0],e=arguments[1],t=arguments[2]||function(){}
}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(n)&&(n=this.rdf.resolve(n)),this.engine.execute("CONSTRUCT { <"+n+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+n+"> ?p ?o } }",t)},Store.Store.prototype.startObservingNode=function(){var e,t,n;2===arguments.length?(e=arguments[0],n=arguments[1],this.engine.callbacksBackend.observeNode(e,n,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],n=arguments[2],this.engine.callbacksBackend.observeNode(e,t,n,function(){}))},Store.Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.Store.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],n=arguments[2];null!=n?this.engine.callbacksBackend.observeQuery(e,t,n):this.engine.callbacksBackend.observeQuery(e,t,function(){})},Store.Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.Store.prototype.subscribe=function(e,t,n,r,l){var i=this,s=function(e,t){for(var n=[],r={blanks:{},outCache:{}},s=[],o=0;t.length>o;o++){var a=t[o],u=RDFJSInterface.buildRDFResource(a.subject,s,i.engine,r),c=RDFJSInterface.buildRDFResource(a.predicate,s,i.engine,r),p=RDFJSInterface.buildRDFResource(a.object,s,i.engine,r);null!=u&&null!=c&&null!=p&&(a=new RDFJSInterface.Triple(u,c,p),n.push(a))}l(e,n)};this.functionMap[l]=s,this.engine.callbacksBackend.subscribe(e,t,n,r,s,function(){})},Store.Store.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},Store.Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.Store.prototype.insert=function(){var e,t,n;if(1===arguments.length)t=arguments[0];else if(2===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0],n=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),n=arguments[2]||function(){}}var r="",l=this;t.forEach(function(e){r=r+l._nodeToQuery(e.subject)+l._nodeToQuery(e.predicate)+l._nodeToQuery(e.object)+"."}),r=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+r+" } }":"INSERT DATA { "+this._nodeToQuery(e)+" { "+r+" }",this.engine.execute(r,n)},Store.Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return""===e.interfaceName?""+e:null!=e.lang?'"'+e.valueOf()+'"@'+e.lang:null!=e.datatype?'"'+e.valueOf()+'"^^<'+e.datatype+">":""+e},Store.Store.prototype["delete"]=function(){var e,t,n;if(1===arguments.length)t=arguments[0];else if(2===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0],n=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),n=arguments[2]||function(){}}var r="",l=this;t.forEach(function(e){r=r+l._nodeToQuery(e.subject)+l._nodeToQuery(e.predicate)+l._nodeToQuery(e.object)+"."}),r=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+r+" } }":"DELETE DATA { "+this._nodeToQuery(e)+" { "+r+" }",this.engine.execute(r,n)},Store.Store.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var n="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(n,t)},Store.Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.Store.prototype.load=function(){var e,t,n,r;if(3===arguments.length)n=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],r=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],n=this.rdf.createNamedNode(arguments[2]),r=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var l="LOAD <"+t.valueOf()+"> INTO GRAPH <"+n.valueOf()+">";this.engine.execute(l,r)}else if(t&&"string"==typeof t&&0===t.indexOf("file://")){var i=this.engine.rdfLoader.parsers[e],s=this;this.engine.rdfLoader.loadFromFile(i,{token:"uri",value:n.valueOf()},t,function(e,t){e?s.engine.batchLoad(t,r):r(e,t)})}else{var i=this.engine.rdfLoader.parsers[e],s=this;this.engine.rdfLoader.tryToParse(i,{token:"uri",value:n.valueOf()},t,function(e,t){e?s.engine.batchLoad(t,r):r(e,t)})}},Store.Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.Store.prototype.registeredGraphs=function(e){if(!this.isMongodb){for(var t=this.engine.lexicon.registeredGraphs(!0),n=[],r=0;t.length>r;r++){var l=t[r],i=new RDFJSInterface.NamedNode(l);n.push(i)}return e(!0,n)}this.engine.registeredGraphs(!0,function(t){for(var n=[],r=0;t.length>r;r++){var l=t[r],i=new RDFJSInterface.NamedNode(l);n.push(i)}return e(!0,n)})},Store.Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return""===e.interfaceName?""+e:""+e},Store.Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},RDFStoreWorker={},RDFStoreWorker.observingCallbacks={},RDFStoreWorker.workerCallbacksCounter=0,RDFStoreWorker.workerCallbacks={},RDFStoreWorker.registerCallback=function(e){var t=""+RDFStoreWorker.workerCallbacksCounter;return RDFStoreWorker.workerCallbacksCounter++,RDFStoreWorker.workerCallbacks[t]=e,t},RDFStoreWorker.handleCreate=function(e,t){NetworkTransport!==void 0&&null!=NetworkTransport&&(NetworkTransport={load:function(e,t,n){var r=RDFStoreWorker.registerCallback(function(e){n.apply(n,e)});postMessage({fn:"workerRequest:NetworkTransport:load",callback:r,arguments:[e,t]})},loadFromFile:function(){}});var n=[e];n.push(function(e){RDFStoreWorker.store=e,postMessage({callback:t,result:"created",success:!0})}),Store.create.apply(Store,n)},RDFStoreWorker.receive=function(e){var t=e.data||e;if("workerRequestResponse"===t.fn){var n=t.callback,r=RDFStoreWorker.workerCallbacks[n];null!=r&&(delete RDFStoreWorker.workerCallbacks[n],r(t.results))}else if("create"===t.fn&&null!=t.args)RDFStoreWorker.handleCreate(t.args,t.callback);else if("setBatchLoadEvents"===t.fn)RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args);else if("registerDefaultNamespace"===t.fn)RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args);else if("registerDefaultProfileNamespaces"===t.fn)RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args);else if("execute"!==t.fn&&"executeWithEnvironment"!==t.fn&&"graph"!==t.fn&&"node"!==t.fn&&"clear"!==t.fn&&"load"!==t.fn||null==t.args)if("insert"!==t.fn&&"delete"!==t.fn||null==t.args){if("rdf/setPrefix"===t.fn&&null!=t.args)RDFStoreWorker.store.rdf.setPrefix(t.args[0],t.args[1]);else if("rdf/setDefaultPrefix"===t.fn&&null!=t.args)RDFStoreWorker.store.rdf.setDefaultPrefix(t.args[0]);else if("startObservingQuery"===t.fn&&null!=t.args){var l=function(e,n){postMessage({callback:t.callback[0],result:n,success:e})};RDFStoreWorker.observingCallbacks[t.args[0]]=l,t.args.push(l),t.args.push(function(e,n){t.callback&&null!=t.callback[1]&&postMessage({callback:t.callback[1],result:n,success:e})}),RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args)}else if("stopObservingQuery"===t.fn){var l=RDFStoreWorker.observingCallbacks[t.args[0]];l&&RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,[l]),delete RDFStoreWorker.observingCallbacks[t.args[0]]}else if("startObservingNode"===t.fn&&null!=t.args){var l=function(e){postMessage({callback:t.callback,result:e})};RDFStoreWorker.observingCallbacks[t.callback]=l,t.args.push(l),RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args)}else if("stopObservingNode"===t.fn&&null!=t.args){var l=RDFStoreWorker.observingCallbacks[t.args[0]];l&&RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,[l]),delete RDFStoreWorker.observingCallbacks[t.args[0]]}else if("subscribe"===t.fn&&null!=t.args){var l=function(e,n){postMessage({callback:t.callback,event:e,result:n})};RDFStoreWorker.observingCallbacks[t.callback]=l,t.args.push(l),RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args)}else if("stopObservingNode"===t.fn&&null!=t.args){var l=RDFStoreWorker.observingCallbacks[t.args[0]];l&&RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,[l]),delete RDFStoreWorker.observingCallbacks[t.args[0]]}else if("registeredGraphs"===t.fn&&null!=t.args){var l=function(e,n){null!=t.callback&&postMessage({callback:t.callback,result:n,success:e})};RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,[l])}}else try{t.args.push(function(e,n){null!=t.callback&&postMessage({callback:t.callback,result:n,success:e})});for(var i,s=t.args[0],o=0;s.triples.length>o;o++)i=s.triples[o],s.triples[o]=new RDFJSInterface.Triple(RDFStoreWorker.adaptJSInterface(i.subject),RDFStoreWorker.adaptJSInterface(i.predicate),RDFStoreWorker.adaptJSInterface(i.object));null!=t.args[1].interfaceName&&(t.args[1]=RDFStoreWorker.adaptJSInterface(t.args[1])),t.args[0]=RDFStoreWorker.store.rdf.createGraph(s.triples),RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args)}catch(a){console.log("Error executing method through connection"),console.log(a)}else{t.args.push(function(e,n){null!=t.callback&&postMessage({callback:t.callback,result:n,success:e})});try{RDFStoreWorker.store[t.fn].apply(RDFStoreWorker.store,t.args)}catch(a){console.log("Error executing method through connection"),console.log(a)}}},RDFStoreWorker.adaptJSInterface=function(e){return"BlankNode"===e.interfaceName?new RDFJSInterface.BlankNode(e.bnodeId):"Literal"===e.interfaceName?new RDFJSInterface.Literal(e.nominalValue,e.language,e.datatype):"NamedNode"===e.interfaceName?new RDFJSInterface.NamedNode(e.nominalValue):void 0},onmessage=RDFStoreWorker.receive;try{window.rdfstore=Store}catch(e){}}(),this.visaRDF=this.visaRDF||{},Handlebars.registerPartial("isotopeElement",Handlebars.template(function(e,t,n,r,l){function i(e){var t;return p((t=e.type,t=null==t||t===!1?t:t.value,typeof t===c?t.apply(e):t))}function s(e){var t,n="";return n+='\r\n			<h2 class="showUri" style="display:none">'+p((t=e.subject,t=null==t||t===!1?t:t.value,typeof t===c?t.apply(e):t))+"</h2>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,l=l||{};var o,a,u="",c="function",p=this.escapeExpression,h=this;return u+='	<div class="element '+p((o=t.subject,o=null==o||o===!1?o:o.token,typeof o===c?o.apply(t):o))+" ",a=n["if"].call(t,t.type,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(a||0===a)&&(u+=a),u+=" "+p((o=l.index,typeof o===c?o.apply(t):o))+'">\r\n		',a=n["if"].call(t,t.subject,{hash:{},inverse:h.noop,fn:h.program(3,s,l),data:l}),(a||0===a)&&(u+=a),u+='\r\n		<p class="number">'+p((o=l.index,typeof o===c?o.apply(t):o))+"</p>\r\n		",a=h.invokePartial(r.isotopeElementContent,"isotopeElementContent",t,n,r,l),(a||0===a)&&(u+=a),u+="\r\n	</div>"})),Handlebars.registerPartial("isotopeElementContent",Handlebars.template(function(e,t,n,r,l){function i(e){var t,n="";return n+='\r\n			<h3 class="itemContent labelEn ellipsis">'+f((t=e.label,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</h3>\r\n		"}function s(e){var t,n="";return n+='\r\n			<div class="itemContent descriptionEn ellipsis">'+f((t=e.description,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</div>\r\n		"}function o(e){var t,n="";return n+='\r\n			<div class="itemContent predicate">'+f((t=e.predicate,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</div>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var a,u,c,p="",h="function",f=this.escapeExpression,d=this,v=n.helperMissing;return p+="		",a=n["if"].call(t,t.label,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(a||0===a)&&(p+=a),p+="\r\n		",c={hash:{},inverse:d.noop,fn:d.program(3,s,l),data:l},a=n.ifLang,u=a?a.call(t,t.description,c):v.call(t,"ifLang",t.description,c),(u||0===u)&&(p+=u),p+="\r\n		",u=n["if"].call(t,t.predicate,{hash:{},inverse:d.noop,fn:d.program(5,o,l),data:l}),(u||0===u)&&(p+=u),p})),this.visaRDF.filterOptions=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+='\r\n				<li><a data-filter-value="',(r=n.value)?r=r.call(e,{hash:{},data:t}):(r=e.value,r=typeof r===a?r.apply(e):r),l+=u(r)+'" class="',(r=n.value)?r=r.call(e,{hash:{},data:t}):(r=e.value,r=typeof r===a?r.apply(e):r),l+=u(r)+'">',(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+"</a></li>\r\n			"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+='	<div class="option-combo filter">\r\n		<h2>Filter:</h2>\r\n		<ul class="option-set clearfix" data-option-key="filter">\r\n			',s=n.each.call(t,t,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o+="\r\n		</ul>\r\n	</div>"}),this.visaRDF.groupDropDown=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+="\r\n      		<option value=",(r=n.val)?r=r.call(e,{hash:{},data:t}):(r=e.val,r=typeof r===a?r.apply(e):r),l+=u(r)+">",(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+"</option>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+='	<select id="GroupDropDown">\r\n		',s=n.each.call(t,t,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o+="\r\n    </select>"}),this.visaRDF.isotopeElements=Handlebars.template(function(e,t,n,r,l){function i(e,t){var l,i="";return i+="\r\n		",l=c.invokePartial(r.isotopeElement,"isotopeElement",e,n,r,t),(l||0===l)&&(i+=l),i+="\r\n	"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,l=l||{};var s,o,a,u="",c=this,p=n.helperMissing;return u+="	",a={hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l},s=n.historyAwareEach,o=s?s.call(t,t,a):p.call(t,"historyAwareEach",t,a),(o||0===o)&&(u+=o),u}),this.visaRDF.overlayContent=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+="\r\n		<h1>",(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+'</h1>\r\n		<div class="innerScroll">\r\n			<div></div>\r\n		</div>\r\n	'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+="	",s=n["if"].call(t,t.label,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o}),this.visaRDF.overlayElement=Handlebars.template(function(e,t,n,r,l){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var i,s,o="",a="function",u=this.escapeExpression;return o+='		<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.overlay,typeof i===a?i.apply(t):i))+" "+u((i=t.cssClass,i=null==i||i===!1?i:i.overlay,typeof i===a?i.apply(t):i))+"_",(s=n.index)?s=s.call(t,{hash:{},data:l}):(s=t.index,s=typeof s===a?s.apply(t):s),o+=u(s)+'">\r\n			<span class="close">close</span>\r\n			<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.overlayContent,typeof i===a?i.apply(t):i))+'">\r\n			</div>\r\n		</div>'}),this.visaRDF.previewElement=Handlebars.template(function(e,t,n,r,l){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var i,s,o="",a="function",u=this.escapeExpression;return o+='		<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.preview,typeof i===a?i.apply(t):i))+" "+u((i=t.cssClass,i=null==i||i===!1?i:i.preview,typeof i===a?i.apply(t):i))+"_",(s=n.index)?s=s.call(t,{hash:{},data:l}):(s=t.index,s=typeof s===a?s.apply(t):s),o+=u(s)+'">\r\n			<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.previewContent,typeof i===a?i.apply(t):i))+'">\r\n			</div>\r\n		</div>'}),this.visaRDF.sortOptions=Handlebars.template(function(e,t,n,r,l){function i(e){var t="";return t+='\r\n				<li><a data-sort-value="'+p(typeof e===c?e.apply(e):e)+'" class="'+p(typeof e===c?e.apply(e):e)+'">'+p(typeof e===c?e.apply(e):e)+"</a></li>\r\n			"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o,a,u="",c="function",p=this.escapeExpression,h=this,f=n.helperMissing;return u+='	<div class="option-combo sorter">\r\n		<h2>Sort:</h2>\r\n		<ul class="option-set clearfix" data-option-key="sortBy">\r\n			',a={hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l},s=n.keysEach,o=s?s.call(t,t,a):f.call(t,"keysEach",t,a),(o||0===o)&&(u+=o),u+="\r\n		</ul>\r\n	</div>"}),function(e,t,n,r){function l(e){return e===r||null===e}function i(e,t){return e.replace(RegExp(DUMMY,"g"),t)}function s(t){var n=null,r=null;return t?e("BODY").hasClass("noscroll")?(n=f.width(),r=f.height()):(e("BODY").addClass("noscroll"),n=f.width(),r=f.height(),e("BODY").removeClass("noscroll")):(n=f.width(),r=f.height()),{width:n,height:r}}function o(e){switch(e){case CSS_CLASSES.overlay:var t=s(!0);return"rect(0px "+t.width+"px "+t.height+"px 0px)";case CSS_CLASSES.preview:var t=s(!1);return"rect("+.25*t.height+"px "+.75*t.width+"px "+.75*t.height+"px "+.25*t.width+"px)";default:return console.log("No clip data found."),""}}function a(e){var t=f.scrollTop(),n=f.scrollLeft(),r=e.offset();return{left:r.left-n,top:r.top-t,width:e.outerWidth(),height:e.outerHeight()}}function u(){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return{transEndEventName:e[Modernizr.prefixed("transition")],transSupport:Modernizr.csstransitions}}function c(n,s){this._selfProxy=function(t){return e.proxy(t,this)},this.cssClasses=e.extend({},CSS_CLASSES,{patternClasses:{uri:CSS_CLASSES.toToken("patternClasses.uri"),literal:CSS_CLASSES.toToken("patternClasses.literal"),blanknode:CSS_CLASSES.toToken("patternClasses.blanknode")},typeClasses:{incoming:CSS_CLASSES.toType("typeClasses.incoming"),outgoing:CSS_CLASSES.toType("typeClasses.outgoing")}}),this._$body=e("BODY"),this._$element=e(n),this._$outerContainer=e('<div class="'+this.cssClasses.outerContainer+'"></div>'),this._$isotopeContainer=e('<div class="'+this.cssClasses.isotopeContainer+'"></div>'),this._$element.append(this._$outerContainer),this._$outerContainer.append(this._$isotopeContainer),pluginInstanceCount++,this._$element.addClass(h+"_"+pluginInstanceCount),this._instanceNumber=pluginInstanceCount,this._instanceLevel=currentLevel,this.options=e.extend({},d,s),this._defaults=d,this._name=h,this._expandedOverlaysCount=0,this._itemHistory={length:0},this._literalHistory={},this._queryPrefixes="",this._queries={},this._initTemplating=this._selfProxy(function(){var n=this,l=e.Deferred();return Handlebars.registerHelper("keysEach",function(e,t){var n="";for(var r in e)n+=t.fn(r);return n}),Handlebars.registerHelper("historyAwareEach",function(t,l){var s,o=l.fn,a=0,u="";if(l.data&&(s=Handlebars.createFrame(l.data)),t&&"object"==typeof t&&t instanceof Array)for(var c=t.length;c>a;a++)switch(t[a].subject.token){case t.plugin.cssClasses.patternClasses.uri:var p=t[a].subject.value;if(p in t.plugin._itemHistory){var h=!1;if(e.each(t[a],function(e,n){null!==n&&(null===t.plugin._itemHistory[p][e]?(t.plugin._itemHistory[p][e]=n,h=!0):"type"===e&&-1===t.plugin._itemHistory[p][e].value.indexOf(t.plugin._itemHistory[p][e].value)&&(t.plugin._itemHistory[p][e].value+=" "+n.value,h=!0))}),h){s.index=t.plugin._itemHistory[p].index,$tempDiv=e("<div/>").append(u),$tempDiv.remove("."+t.plugin._itemHistory[p].index);var f=$tempDiv.children();e.each(f,function(t,n){u+=e(n).html()}),e(t.plugin._$isotopeContainer).isotope("remove",e(t.plugin._$isotopeContainer).find("."+t.plugin._itemHistory[p].index)),u+=o(t.plugin._itemHistory[p],{data:s})}}else t[a].label&&(t[a].label.lang===r||"en"===t[a].label.lang)&&(s&&(t[a].index=s.index=t.plugin._itemHistory.length++,s.uri=p),u+=o(t[a],{data:s}),t.plugin._itemHistory[p]=t[a]);break;case t.plugin.cssClasses.patternClasses.literal:t[a].predicate.value in t.plugin._literalHistory?-1===e.inArray(t[a].subject.value,t.plugin._literalHistory[t[a].predicate.value])&&(t.plugin._literalHistory[t[a].predicate.value].push(t[a].subject.value),s&&(t[a].index=s.index=t.plugin._itemHistory.length++),u+=o(t[a],{data:s})):(t.plugin._literalHistory[t[a].predicate.value]=[],t.plugin._literalHistory[t[a].predicate.value].push(t[a].subject.value),s&&(t[a].index=s.index=t.plugin._itemHistory.length++),u+=o(t[a],{data:s}));break;case t.plugin.cssClasses.patternClasses.blanknode:console.log(t[a]);var d=i(n._queries.blankNodeQuery,t[a].subject.value);n._rdfStoreExecuteQuery(d,function(e){console.log(e)}),console.log("TODO blanknode")}return u}),Handlebars.registerHelper("ifLang",function(e,t){return!e||e.lang!==r&&"en"!==e.lang?r:t.fn(this)}),n.options.templatesPrecompiled?(v.isoEles=t.visaRDF.isotopeElements,v.isoEleContent=t.visaRDF.isotopeElementContent,v.overlayEle=t.visaRDF.overlayElement,v.overlayCon=t.visaRDF.overlayContent,v.sortOptions=t.visaRDF.sortOptions,v.filterOptions=t.visaRDF.filterOptions,v.previewEle=t.visaRDF.previewElement,v.groupSortDropdown=t.visaRDF.groupDropDown,l.resolve()):e.get(n.options.templatesPath,function(t){var n=e("<div>");n.append(t),v.isoEles=Handlebars.compile(n.find("#visaRDF-isotope-elements").html()),v.isoEleContent=Handlebars.compile(n.find("#visaRDF-isotope-element-content").html()),v.overlayEle=Handlebars.compile(n.find("#visaRDF-overlay-element").html()),v.overlayCon=Handlebars.compile(n.find("#visaRDF-overlay-content").html()),v.sortOptions=Handlebars.compile(n.find("#visaRDF-sort-options").html()),v.filterOptions=Handlebars.compile(n.find("#visaRDF-filter-options").html()),v.previewEle=Handlebars.compile(n.find("#visaRDF-preview-element").html()),v.groupSortDropdown=Handlebars.compile(n.find("#visaRDF-groupSort-dropdown").html()),l.resolve()},"html"),l.promise()}),this._evHandlerHistory={},this._addEventHandler=this._selfProxy(function(e,t,n,l){var i=this;n===r&&(n=i._$element.children(i.cssClasses.toSelector("outerContainer"))),i._evHandlerHistory[e]===r&&(i._evHandlerHistory[e]=[]),i._evHandlerHistory[e].push({id:l,object:n,handler:t}),n.on(e,t)}),this._removeEventHandler=this._selfProxy(function(t,n,l){var i=this;e.each(i._evHandlerHistory[t],function(i,s){if(n===s.id)if(l!==r){if(e.data(s.object)===e.data(l))return s.object.off(t,s.handler),!1}else s.object.off(t,s.handler)})}),this._initBrowsability=this._selfProxy(function(t){var n=this,r=u(),l=r.transEndEventName,i=r.transSupport;t.each(function(){var t=e(this);t.index=parseInt(t.find(".number").html()),n.options.usePreviews?n.options.previewAsOverlay===!0?n._addDivPreviewItemClickEvent(t,i,l):n._addItemClickEvent(t,i,l):n._addPreviewClickEvent(t,i,l)})}),this._addDivPreviewItemClickEvent=this._selfProxy(function(e,t,n){var r=this;r._addEventHandler("click",function(l){l.stopPropagation(),r._addDivPreview(e,t,n,function(l){var i=a(e),s="rect("+i.top+"px "+(i.left+i.width)+"px "+(i.top+i.height)+"px "+i.left+"px)",u=o(r.cssClasses.preview);l.css({clip:t?s:u,opacity:1,zIndex:9998,pointerEvents:"auto"}),t&&l.on(n,function(){l.off(n),setTimeout(function(){l.css("clip",u).on(n,function(){l.off(n)})},25)})})},e)}),this._addDivPreview=this._selfProxy(function(t,n,r,l){var i=this,s=e(i.cssClasses.toSelector("preview")),o=s.filter(i.cssClasses.toSelector("preview")+"_"+t.index);s.not(o).css({opacity:0,pointerEvents:"none",zIndex:-1,clip:"auto"}),1>o.length?(preview=v.previewEle({index:t.index,cssClass:{preview:i.cssClasses.preview,previewContent:i.cssClasses.previewContent}}),i._$element.append(preview),o=i._$element.find("> "+i.cssClasses.toSelector("preview")+"_"+t.index),o.css("background-color",t.css("background-color")),$previewContent=o.children(i.cssClasses.toSelector("previewContent")),$previewContent.text(""+t.find(".labelEn > div").html()),i._addDivPreviewCloseEvent(t,o,n,r),i._addDivPreviewClickEvent(t,o,n,r),l(o)):l(o)}),this._addDivPreviewCloseEvent=this._selfProxy(function(e,t,n,r){var l=this;l._addEventHandler("click",function(l){if(l._instanceLevel===currentLevel){var i=a(e),s="rect("+i.top+"px "+(i.left+i.width)+"px "+(i.top+i.height)+"px "+i.left+"px)";t.css({opacity:1,pointerEvents:"none",clip:s}),n?t.on(r,function(){t.off(r),setTimeout(function(){t.css("opacity",0).on(r,function(){t.off(r).css({clip:"auto",zIndex:-1}),e.data("isExpanded",!1)})},25)}):t.css({opacity:0,zIndex:-1})}},f)}),this._addDivPreviewClickEvent=this._selfProxy(function(e,t,n,r){var l=this;l._addEventHandler("click",function(){e.data("isExpanded")||(e.data("isExpanded",!0),l._instanceLevel===currentLevel&&currentLevel++,l._expandedOverlaysCount++,l._addOverlay(e,n,r,function(t){l._initOverlayContent(e,t,function(){var e=o(l.cssClasses.preview),i=o(l.cssClasses.overlay);t.css({clip:n?e:i,opacity:1,zIndex:9999,pointerEvents:"auto"}),n?t.on(r,function(){t.off(r),setTimeout(function(){t.css("clip",i).on(r,function(){t.off(r),l._$body.addClass("noscroll")})},25)}):l._$body.addClass("noscroll")})})),t.css({opacity:0,pointerEvents:"none",zIndex:-1,clip:"auto"})},t)}),this._addItemClickEvent=this._selfProxy(function(e,t,n){var r=this;r._addEventHandler("click",function(l){var s=r._$isotopeContainer.children("div");s.css({width:r.options.elementStyle.dimension.width,height:r.options.elementStyle.dimension.height}),s.removeClass(r.cssClasses.previewItem),r._$isotopeContainer.isotope("reLayout"),r._removeEventHandler("click","previewClick"),l.stopPropagation();var o,a;o=r._$isotopeContainer.width()-100,a=f.height()-100,e.addClass(r.cssClasses.previewItem),e.css({width:o,height:a});var u=i(r._queries.previewQuery,e.data("uri"));r._rdfStoreExecuteQuery(u,function(t){var n=v.isoEleContent(t[0]);e.find(".itemContent").remove(),e.append(n)}),r._$isotopeContainer.isotope("reLayout"),r._addPreviewClickEvent(e,t,n),r._addPreviewCloseEvent(e,t,n),e.off("click",this)},e)}),this._addPreviewClickEvent=this._selfProxy(function(e,t,n){var r=this;r._addEventHandler("click",function(){var l=r._$isotopeContainer.children("div");l.css({width:r.options.elementStyle.dimension.width,height:r.options.elementStyle.dimension.height}),r._$isotopeContainer.isotope("reLayout"),e.data("isExpanded")||(e.data("isExpanded",!0),r._instanceLevel===currentLevel&&currentLevel++,r._expandedOverlaysCount++,r._addOverlay(e,t,n,function(l){r._initOverlayContent(e,l,function(){var i=a(e),s="rect("+i.top+"px "+(i.left+i.width)+"px "+(i.top+i.height)+"px "+i.left+"px)",u=o(r.cssClasses.overlay);l.css({clip:t?s:u,opacity:1,zIndex:9999,pointerEvents:"auto"}),t?l.on(n,function(){l.off(n),setTimeout(function(){l.css("clip",u).on(n,function(){l.off(n),r._$body.addClass("noscroll")})},25)}):r._$body.addClass("noscroll")})})),r.options.usePreviews&&e.off("click",this)},e,"previewClick")}),this._addPreviewCloseEvent=this._selfProxy(function(e,t,n){var r=this;r._addEventHandler("click",function(){e.css({width:r.options.elementStyle.dimension.width,height:r.options.elementStyle.dimension.height}),r._$isotopeContainer.isotope("reLayout"),e.off("click"),r._addItemClickEvent(e,t,n)},f)}),this._addOverlay=this._selfProxy(function(e,t,n,r){var l=this,i=l._$element.find("> "+l.cssClasses.toSelector("overlay")+"_"+e.index);if(1>i.length){var s=v.overlayEle({index:e.index,cssClass:{overlay:l.cssClasses.overlay,overlayContent:l.cssClasses.overlayContent}});l._$element.append(s),i=l._$element.find("> "+l.cssClasses.toSelector("overlay")+"_"+e.index),l._addOverlayCloseEvent(e,i,t,n),r(i)}else r(i)}),this._addOverlayCloseEvent=this._selfProxy(function(e,t,n,r){var l=this,i=t.find("> "+l.cssClasses.toSelector("overlayContent")),s=t.find("> span.close");l._addEventHandler("click",function(){l._expandedOverlaysCount--,0===l._expandedOverlaysCount&&0===--currentLevel&&l._$body.removeClass("noscroll");var s=a(e),o="rect("+s.top+"px "+(s.left+s.width)+"px "+(s.top+s.height)+"px "+s.left+"px)";t.css({clip:o,opacity:1,pointerEvents:"none"}),i.find("div:class-prefix(visaRDF)").data("plugin_visaRDF").destroy(),i.children().remove(""),n?t.on(r,function(){t.off(r),setTimeout(function(){t.css("opacity",0).on(r,function(){t.off(r).css({clip:"auto",zIndex:-1}),e.data("isExpanded",!1)})},25)}):t.css({opacity:0,zIndex:-1})},s)}),this._initOverlayContent=this._selfProxy(function(t,n,r){var l=this,s=n.find("> "+l.cssClasses.toSelector("overlayContent")),o=t.find(".showUri").html(),a=i(l._queries.selectSubjectOf,o),u=i(l._queries.selectObjectOf,o),c=i(l._queries.remoteSubjectOf,o),p=i(l._queries.remoteObjectOf,o);l._rdfStoreExecuteQuery(a,function(n){l._rdfStoreExecuteQuery(u,function(r){var i={};i.label=t.find(".labelEn").text();for(var o=0;n.length>o;o++)n[o].type={value:l.cssClasses.typeClasses.outgoing};for(var o=0;r.length>o;o++)r[o].type={value:l.cssClasses.typeClasses.incoming};s.append(e(v.overlayCon(i)));var c=e.merge(e.merge([],n),r);s.find("> .innerScroll > div").visaRDF(e.extend(!0,{},l.options,{dataLoc:null,dataFormat:null,sparqlData:c,generateSortOptions:!0,generateFilterOptions:!0,isotopeOptions:{itemSelector:".element",layoutMode:"masonry",groupRows:{gutter:20},getSortData:{type:function(e){var t=e.attr("class");return t},group:function(e){for(var t=e.attr("class"),n=RegExp("(s)*[a-zA-Z0-9]*"+TOKEN_TAG+"[a-zA-Z0-9]*(s)*","g"),r=t.match(n),l="",i=0;r.length>i;i++)l+=r[i]+" ";return l}}},initQueries:[{query:a,type:l.cssClasses.typeClasses.outgoing},{query:u,type:l.cssClasses.typeClasses.incoming}],filterBy:[{value:"*",label:"showAll"},{value:CSS_CLASSES.typeClasses.incoming,label:"in"},{value:CSS_CLASSES.typeClasses.outgoing,label:"out"}]}))})}),l.options.remoteDynamicly&&l._addEventHandler(EVENT_TYPES.loading.loadingDone,function(e,t){var n=s.find("div:class-prefix(visaRDF)").data("plugin_visaRDF");t===n&&(l._removeEventHandler(EVENT_TYPES.loading.loadingDone,"remoteSubjectOf",s),n.insertRemoteDataQuery(l.options.remoteBackend,c+" LIMIT "+l.options.remoteLimit),l._addEventHandler(EVENT_TYPES.loading.loadingDone,function(e,t){t===n&&(l._removeEventHandler(EVENT_TYPES.loading.loadingDone,"remoteObjectOf",s),n.insertRemoteDataQuery(l.options.remoteBackend,p+" LIMIT "+l.options.remoteLimit))},s,"remoteObjectOf"))},s,"remoteSubjectOf");var h=new RGBColor(t.css("background-color"));n.css("background-color",h.toRGB()),e.each(s.children("div"),function(t,n){h.r-=10,h.b-=10,h.g-=10,e(n).css("background",h.toRGB())}),s.find("> .overlayColumn").css("width","100%"),s.find(".innerScroll").css("width",f.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right"))+"px"),s.find(".innerScroll").css("height",.95*f.height()+"px"),r()}),this._initRdfStore=this._selfProxy(function(){var t=this,n=e.Deferred();return l(p)&&new rdfstore.Store(t.options.rdfstoreOptions,t._selfProxy(function(e){p=e,n.resolve()})),n.promise()}),this._generateQueryPrefixes=this._selfProxy(function(){var t=this;t._queryPrefixes="",e.each(this.options.ns,this._selfProxy(function(e,n){t._generateQueryPrefix(e,n)}))}),this._generateQueryPrefix=this._selfProxy(function(e,t){var n=this;n._queryPrefixes+="PREFIX "+e+": <"+t+"> "}),this._generateQueries=this._selfProxy(function(){var e=this;e._queries={initQueries:this.options.initQueries,remoteQuery:this.options.remoteQuery,remoteSubjectOf:" SELECT ?subject ?predicate ?object ?labelObj WHERE { BIND (<"+DUMMY+"> as ?subject) ?subject ?predicate ?object. OPTIONAL { ?object rdfs:label ?labelObj }}",remoteObjectOf:" SELECT ?subject ?predicate ?object ?labelSub WHERE {BIND (<"+DUMMY+"> as ?object) ?subject ?predicate ?object. OPTIONAL { ?subject rdfs:label ?labelSub }}",selectSubjectOf:" SELECT ?subject ?predicate ?label ?description WHERE {<"+DUMMY+"> ?predicate ?subject. OPTIONAL { ?subject rdfs:label ?label}. OPTIONAL { ?subject rdfs:description ?description } . OPTIONAL { ?subject rdfs:comment ?description }}",selectObjectOf:" SELECT ?subject ?predicate ?type ?label ?description WHERE {?subject ?predicate <"+DUMMY+">. OPTIONAL { ?subject rdfs:label ?label}. OPTIONAL { ?subject rdfs:description ?description } . OPTIONAL { ?subject rdfs:comment ?description }}",previewQuery:" SELECT ?label ?description ?type WHERE { <"+DUMMY+"> rdfs:label ?label . OPTIONAL { <"+DUMMY+"> rdfs:description ?description } . OPTIONAL { <"+DUMMY+"> rdfs:comment ?description } . OPTIONAL { <"+DUMMY+"> rdfs:type ?type}}",blankNodeQuery:"SELECT ?object WHERE {<"+DUMMY+"> ?predicate ?object}"}
}),this._isotopeAddBatches=this._selfProxy(function(t){var n=t.length,r=this,i=r.options.batchSize>n?n:r.options.batchSize;this._$outerContainer.find("> .loading").text(parseInt(100*(i/n))+"% -");var s=t.slice(0,i);s.plugin=r,e.each(s,function(e,t){"literal"===t.subject.token&&(t.label=t.subject),t.label&&(t.label.value=unescape(t.label.value),t.subject.token=TOKEN_TAG+t.subject.token)});var o=e(v.isoEles(s));e.each(o,function(t,n){e(n).css("background-color","rgba(125, 125, 125 ,0.2)")}),l(o.html())?r._isotopeAddBatchesHelp(t,i):(o.css({width:this.options.elementStyle.dimension.width,height:this.options.elementStyle.dimension.height}),r._$isotopeContainer.isotope("insert",o,function(){o.find(".ellipsis").ellipsis(),$nodes=o.filter(r.cssClasses.toSelector("patternClasses.uri")),$literals=o.filter(r.cssClasses.toSelector("patternClasses.literal")),e.each($nodes,function(t,n){e(n).data("uri",e(n).find(".showUri").html())}),r._initBrowsability($nodes),e.each($nodes,function(t,n){var l=new RGBColor(r.options.elementStyle.colors[t%r.options.elementStyle.colors.length]);e(n).css("background-color","rgba("+l.r+", "+l.g+", "+l.b+" ,1)")}),e.each($literals,function(t,n){e(n).css("background-color","rgba(125, 125, 125 ,1)")}),r._isotopeAddBatchesHelp(t,i)}))}),this._isotopeAddBatchesHelp=this._selfProxy(function(t,n){var r=this,l=t.slice(n);l.length>0?r._isotopeAddBatches(l):e(r._$outerContainer).trigger(EVENT_TYPES.loading.loadingDone,r)}),this._checkInsertion=this._selfProxy(function(){var t=this,n=!1;return l(t.options.dataFormat)||(l(t.options.dataLoc)?l(t.options.data)||(n=!0,t._rdfStoreInsertData(t.options.data,t.options.dataFormat,function(){e(t._$outerContainer).trigger(EVENT_TYPES.storeModified.insert,t)})):(n=!0,t._ajaxLoadData(t.options.dataLoc,t.options.dataFormat,function(n,r){t._rdfStoreInsertData(n,r,function(){e(t._$outerContainer).trigger(EVENT_TYPES.storeModified.insert,t)})}))),n}),this._checkSortGeneration=this._selfProxy(function(){if(this.options.generateSortOptions){var t=this._$element,n=this._$isotopeContainer,r=e.extend({},this.options.isotopeOptions.getSortData);delete r.group;var l=v.sortOptions(r),i=t.find(".options");i.prepend(l),$sorter=i.find(" > .sorter"),$sorter.find("."+this.options.isotopeOptions.sortBy).addClass("selected"),$sortLinks=i.find("a"),$sorter.append(v.groupSortDropdown({type:{label:"type",val:TYPE_TAG},token:{label:"node-type",val:TOKEN_TAG}})),$sorterGroup=$sorter.find("#GroupDropDown"),$sorterGroup.change(function(){var r=e(this).val();return t.find(".sorter > > > .selected").removeClass("selected"),n.isotope({getSortData:{group:function(e){var t=e.attr("class"),n=RegExp("(s)*[a-zA-Z0-9]*"+r+"[a-zA-Z0-9]*(s)*","g"),l=t.match(n),i="";if(null!==l)for(var s=0;l.length>s;s++)i+=l[s]+" ";return i}}}),n.isotope("updateSortData",n.find(".element")),n.find("> > .groupLabel").remove(),n.isotope({layoutMode:"groupRows",sortBy:"group"}),!1}),$sortLinks.click(function(){var r=e(this).attr("data-sort-value");return $sorterGroup.val("Group by..."),t.find(".sorter > > > .selected").removeClass("selected"),n.find("> > .groupLabel").remove(),e(this).addClass("selected"),n.isotope({layoutMode:"masonry",sortBy:r}),!1})}}),this._checkFilterGeneration=this._selfProxy(function(){var t=this;if(t.options.generateFilterOptions){var n=t._$element,r=v.filterOptions(t.options.filterBy),l=n.find(".options");l.append(r),$filter=l.find(" > .filter"),$filterLinks=$filter.find("a"),$filterLinks.click(function(){var r=e(this).attr("data-filter-value");return"*"!==r&&(r="."+TYPE_TAG+r),n.find(".filter > > > .selected").removeClass("selected"),e(this).addClass("selected"),n.find(t.cssClasses.toSelector("isotopeContainer")).isotope({filter:r}),!1}),$filter.append('<input id="filterField" type="text" size="25" value="Enter search here.">'),$filterBox=$filter.find("#filterField"),$filterBox.keyup(function(){var r=e(this).val();if(""!==r){if("*"!==r)if(t.options.supportRegExpFilter)try{r="div:regex(class, "+r+"), div > div:contains("+r+")"}catch(l){r="div > div:contains("+r+")"}else r="div > div:contains("+r+")"}else r="*";return n.find(".filter > > > .selected").removeClass("selected"),n.find(t.cssClasses.toSelector("isotopeContainer")).isotope({filter:r}),!1})}}),this._rdfStoreExecuteQuery=this._selfProxy(function(t,n){var r=this;p.execute(r._queryPrefixes+t,function(l,i){l?n(i):(e(r._$outerContainer).trigger(EVENT_TYPES.loading.loadingDone,r),console.log("Error on executing: "+t))})}),this._rdfStoreInsertData=this._selfProxy(function(t,n,r){var i=this;if(e(i._$outerContainer).trigger(EVENT_TYPES.loading.loadingStart,i),"text/turtle"===n||"text/plain"===n||"text/n3"===n){var s=t.match(/.*@prefix.*>(\s)*./g);e.each(s,function(e,t){var n=t.split(/>(\s)*./)[0].split(/:(\s)*</),r=n[0].replace(/@prefix(\s)*/,""),s=n[2];l(i.options.ns[r])&&(i.options.ns[r]=s,i._generateQueryPrefix(r,s))})}else if("application/ld+json"===n||"application/json"===n){var o=t["@context"];e.each(o,function(e,t){l(i.options.ns[prefix])&&(i.options.ns[e]=t,i._generateQueryPrefix(e,t))})}p.load(n,t,function(){r()})}),this._ajaxLoadData=this._selfProxy(function(t,n,r){var l=this;e(l._$outerContainer).trigger(EVENT_TYPES.loading.loadingStart,l),e.ajax({url:t,dataType:"text",success:function(e){r(e,n)}}).fail(function(){e(l._$outerContainer).trigger(EVENT_TYPES.loading.loadingDone,l),alert(MESSAGES.error.ajax)})}),this._updateView=this._selfProxy(function(t){var n=this,r=!0;e(n._$outerContainer).trigger(EVENT_TYPES.loading.loadingStart,n);for(var l=0;t.length>l;l++)n._rdfStoreExecuteQuery(t[l].query,function(i){if(i&&0!==i.length){if(r=!1,t[l].type)for(var s=0;i.length>s;s++)i[s].type={value:t[l].type};n._isotopeAddBatches(i)}else l===t.length-1&&r&&e(n._$outerContainer).trigger(EVENT_TYPES.loading.loadingDone,n)})}),this._requestCrossDomain=function(n,r,l){var i=this,s=!1;if(e(i._$outerContainer).trigger(EVENT_TYPES.loading.loadingStart,this),!n)return alert("No site was passed."),!1;if(!r)return alert("No query was passed."),!1;var o="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('use "http://triplr.org/sparyql/sparql.xml" as sparql; select * from sparql where query="'+r+'" and service="'+n)+'"&format=json&callback=cbFunc';e.ajax({dataType:"jsonp",url:o,success:t.cbFunc,error:function(e,t,n){console.log("Error on yql query."),console.log(n),s||i._$outerContainer.trigger(EVENT_TYPES.loading.loadingDone,i)}}),t.cbFunc=function(e){s=!0,e&&e.query.results?l(e.query.results.sparql.result):console.log("Nothing returned from getJSON."),i._$outerContainer.trigger(EVENT_TYPES.loading.loadingDone,i)}},this.init()}e(n).ready(function(){e("head").append('<link rel="stylesheet" href="css/visaRdf.css" type="text/css" />')});var p,h="visaRDF",f=e(t),d={data:r,dataLoc:r,dataFormat:r,templatesPrecompiled:!0,templatesPath:"templates/templates.html",batchSize:25,generateSortOptions:!0,usePreviews:!1,previewAsOverlay:!1,generateFilterOptions:!0,supportRegExpFilter:!0,filterBy:[{value:"*",label:"showAll"}],sparqlData:r,elementStyle:{dimension:{width:200,height:200},colors:["#e2674a","#99CC99","#3399CC","#33CCCC","#996699","#C24747","#FFCC66","#669999","#CC6699","#339966","#666699"]},ns:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",rif:"http://www.w3.org/2007/rif#",foaf:"http://xmlns.com/foaf/0.1/",dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dc:"http://purl.org/dc/terms/"},initQueries:[{query:"SELECT ?subject ?label ?description ?type WHERE { ?subject rdfs:label ?label . OPTIONAL { ?subject rdfs:description ?description } . OPTIONAL { ?subject rdfs:comment ?description }. OPTIONAL {?subject rdfs:type ?type}}"}],remoteQuery:"SELECT ?subject ?predicate ?object { BIND( rdfs:label as ?predicate) ?subject ?predicate ?object. ?subject a <http://dbpedia.org/ontology/Place> . ?subject <http://dbpedia.org/property/rulingParty> ?x } LIMIT 500",remoteBackend:"http://zaire.dimis.fim.uni-passau.de:8080/bigdata/sparql",remoteLimit:100,remoteDynamicly:!0,rdfstoreOptions:{persistence:!0,name:"",overwrite:!0,engine:"",engineData:{mongoDomain:"",mongoPort:"",mongoOptions:{}}},isotopeOptions:{sortBy:"number",getSortData:{number:function(e){var t=e.hasClass("element")?e.find(".number").text():e.attr("data-number");return parseInt(t,10)},alphabetical:function(e){var t=e.find(".labelEn"),n=t.length?t:e;return n.text()}}}},v={},g=e.Deferred();pluginInstanceCount=0,currentLevel=0,CSS_CLASSES={outerContainer:"outerContainer",isotopeContainer:"container",options:"options",clearfix:"clearfix",loader:"loading",preview:"preview",previewItem:"preview-item",previewContent:"previewContent",overlay:"overlay",overlayContent:"overlayContent",typeClasses:{incoming:"incoming",outgoing:"outgoing"},patternClasses:{uri:"uri",literal:"literal",blanknode:"blank"},toToken:function(e){for(var t=e.split("."),n=this,r=0;t.length>r;r++)n=n[t[r]];return TOKEN_TAG+n},toType:function(e){for(var t=e.split("."),n=this,r=0;t.length>r;r++)n=n[t[r]];return TYPE_TAG+n},toSelector:function(e){for(var t=e.split("."),n=this,r=0;t.length>r;r++)n=n[t[r]];return"."+n}},DUMMY="#replaceMe#",TYPE_TAG="-filter-_",TOKEN_TAG="token_",EVENT_TYPES={storeModified:{insert:"dataInsert"},loading:{loadingDone:"loadingDone",loadingStart:"loadingStarted"}},MESSAGES={error:{ajax:"Error on loading data.",remote:"Error on loading remote data."}},e.extend(e.Isotope.prototype,{_groupRowsReset:function(){this.groupRows={x:0,y:0,height:0,currentGroup:null}},_groupRowsLayout:function(t){var n=this,r=this.element.width(),l=this.options.sortBy,i=this.groupRows;t.each(function(){var t=e(this),s=t.outerWidth(!0),o=t.outerHeight(!0),a=e.data(this,"isotope-sort-data")[l];if(a!==i.currentGroup?(i.x=0,i.height+=i.currentGroup?n.options.groupRows.gutter:0,i.y=i.height,i.currentGroup=a):0!==i.x&&s+i.x>r&&(i.x=0,i.y=i.height),t.find(".groupLabel").remove(),""!==a){for(var u=a.split("_")[0]+"_",c=a.split(u),p="<div class='groupLabel'>",h=1;c.length>h;h++)p+=c[h];p+="</div>",t.append(p)}n._pushPosition(t,i.x,i.y),i.height=Math.max(i.y+o,i.height),i.x+=s})},_groupRowsGetContainerSize:function(){return{height:this.groupRows.height}},_groupRowsResizeChanged:function(){return!0}}),e.expr[":"]["class-prefix"]=function(t,n,r){var l=r[3];if(!l)return!0;var i='[class^="'+l+'"], [class*=" '+l+'"]';return e(t).is(i)},jQuery.expr[":"].regex=function(e,t,n){var r,l=n[3].split(","),i=/^(data|css):/,s={method:l[0].match(i)?l[0].split(":")[0]:"attr",property:l.shift().replace(i,"")},o="ig";try{r=RegExp(l.join("").replace(/^\s+|\s+$/g,""),o)}catch(a){return!1}return r.test(jQuery(e)[s.method](s.property))},c.prototype={init:function(){this._$isotopeContainer.isotope(this.options.isotopeOptions),this._generateQueryPrefixes(),this._generateQueries(),this._$outerContainer.prepend('<div class="'+this.cssClasses.loader+'">'),this._$outerContainer.append('<div class="'+this.cssClasses.loader+'">'),this._addEventHandler(EVENT_TYPES.loading.loadingStart,this._selfProxy(function(e,t){t===this&&(120>this._$outerContainer.css("height")&&this._$outerContainer.css("height","20px"),this._$outerContainer.find("> "+this.cssClasses.toSelector("loader")).css("visibility","visible"))})),this._addEventHandler(EVENT_TYPES.loading.loadingDone,this._selfProxy(function(e,t){t===this&&(this._$outerContainer.find("> .loading").text(""),this._$outerContainer.find("> "+this.cssClasses.toSelector("loader")).css("visibility","hidden"))})),this._addEventHandler(EVENT_TYPES.storeModified.insert,this._selfProxy(function(){this._updateView(this._queries.initQueries)})),this._addEventHandler("smartresize",this._selfProxy(function(){var e=this._$element.children(this.cssClasses.toSelector("overlay"));e.css("clip",o(CSS_CLASSES.overlay));var t=e.find(".innerScroll");if(t.css("width",f.width()-parseInt(e.css("padding-left"))-parseInt(e.css("padding-right"))+"px"),t.css("height",.95*f.height()+"px"),this.options.previewAsDiv){var n=this._$element.children(this.cssClasses.toSelector("preview"));n.css("clip",o(this.cssClasses.preview))}else{var r,l,n=this._$isotopeContainer.children(this.cssClasses.toSelector("previewItem"));r=this._$isotopeContainer.width()-100,l=f.height()-100,n.css({width:r,height:l}),this._$isotopeContainer.isotope("reLayout")}}),f),"pending"===g.state()&&(g=e.Deferred(),e.when(this._initRdfStore(),this._initTemplating()).done(function(){g.resolve()})),e.when(g.promise()).done(this._selfProxy(function(){(this.options.generateSortOptions||this.options.generateFilterOptions)&&(this._$element.prepend('<section class="'+this.cssClasses.options+'" class="'+this.cssClasses.clearfix+'"></section>'),this._checkSortGeneration(),this._checkFilterGeneration()),this._checkInsertion()||(this.options.sparqlData===r?this._updateView(this._queries.initQueries):this._isotopeAddBatches(this.options.sparqlData))}))},insertData:function(t,n){var r=this;e.when(g.promise()).done(function(){r._rdfStoreInsertData(t,n,function(){e(r._$outerContainer).trigger(EVENT_TYPES.storeModified.insert,r)})})},insertDataFile:function(t,n){var r=this;e.when(g.promise()).done(function(){r._ajaxLoadData(t,n,r._selfProxy(r.insertData))})},insertRemoteData:function(e){this.insertRemoteDataQuery(e,this._queries.remoteQuery)},insertRemoteDataQuery:function(t,n){n===r||""===n?insertRemoteData(t):this._requestCrossDomain(t,n,this._selfProxy(function(t){if(t){t.subject!==r&&(t=[t]);var n="INSERT DATA {";e.each(t,function(e,t){t.subject===r?console.log("Resultset disfigured."):n+="uri"===t.subject.type?"<"+t.subject.value+"> ":"<"+t.subject.value+"> ",n+="<"+t.predicate.value+"> ","uri"===t.object.type?n+="<"+t.object.value+">. ":"literal"===t.object.type&&(n+='"'+escape(t.object.value)+'". '),t.labelSub&&(n+="<"+t.subject.value+'> rdfs:label "'+t.labelSub.value+'". '),t.labelObj&&(n+="<"+t.object.value+'> rdfs:label "'+t.labelObj.value+'". ')}),n+="}",this._rdfStoreExecuteQuery(n,this._selfProxy(function(){e(this._$outerContainer).trigger(EVENT_TYPES.storeModified.insert,this)}))}}))},clearStore:function(){this._rdfStoreExecuteQuery("CLEAR ALL",this._selfProxy(function(){var t=this;t._$isotopeContainer.isotope("remove",e(".element"),function(){t._itemHistory={length:0},t._literalHistory={},console.log("store cleared")})}))},destroy:function(){var t=this;e.each(t._evHandlerHistory,function(t,n){e.each(n,function(e,n){n.object.off(t,n.handler)})}),t._evHandlerHistory=r,pluginInstanceCount--,t._$element[h]=null}},e.fn[h]=function(t){return this.each(function(){e.data(this,"plugin_"+h)||e.data(this,"plugin_"+h,new c(this,t))})}}(jQuery,window,document),this.visaRDF=this.visaRDF||{},Handlebars.registerPartial("isotopeElement",Handlebars.template(function(e,t,n,r,l){function i(e){var t;return p((t=e.type,t=null==t||t===!1?t:t.value,typeof t===c?t.apply(e):t))}function s(e){var t,n="";return n+='\r\n			<h2 class="showUri" style="display:none">'+p((t=e.subject,t=null==t||t===!1?t:t.value,typeof t===c?t.apply(e):t))+"</h2>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,l=l||{};var o,a,u="",c="function",p=this.escapeExpression,h=this;return u+='	<div class="element '+p((o=t.subject,o=null==o||o===!1?o:o.token,typeof o===c?o.apply(t):o))+" ",a=n["if"].call(t,t.type,{hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l}),(a||0===a)&&(u+=a),u+=" "+p((o=l.index,typeof o===c?o.apply(t):o))+'">\r\n		',a=n["if"].call(t,t.subject,{hash:{},inverse:h.noop,fn:h.program(3,s,l),data:l}),(a||0===a)&&(u+=a),u+='\r\n		<p class="number">'+p((o=l.index,typeof o===c?o.apply(t):o))+"</p>\r\n		",a=h.invokePartial(r.isotopeElementContent,"isotopeElementContent",t,n,r,l),(a||0===a)&&(u+=a),u+="\r\n	</div>"})),Handlebars.registerPartial("isotopeElementContent",Handlebars.template(function(e,t,n,r,l){function i(e){var t,n="";return n+='\r\n			<h3 class="itemContent labelEn ellipsis">'+f((t=e.label,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</h3>\r\n		"}function s(e){var t,n="";return n+='\r\n			<div class="itemContent descriptionEn ellipsis">'+f((t=e.description,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</div>\r\n		"}function o(e){var t,n="";return n+='\r\n			<div class="itemContent predicate">'+f((t=e.predicate,t=null==t||t===!1?t:t.value,typeof t===h?t.apply(e):t))+"</div>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var a,u,c,p="",h="function",f=this.escapeExpression,d=this,v=n.helperMissing;return p+="		",a=n["if"].call(t,t.label,{hash:{},inverse:d.noop,fn:d.program(1,i,l),data:l}),(a||0===a)&&(p+=a),p+="\r\n		",c={hash:{},inverse:d.noop,fn:d.program(3,s,l),data:l},a=n.ifLang,u=a?a.call(t,t.description,c):v.call(t,"ifLang",t.description,c),(u||0===u)&&(p+=u),p+="\r\n		",u=n["if"].call(t,t.predicate,{hash:{},inverse:d.noop,fn:d.program(5,o,l),data:l}),(u||0===u)&&(p+=u),p})),this.visaRDF.filterOptions=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+='\r\n				<li><a data-filter-value="',(r=n.value)?r=r.call(e,{hash:{},data:t}):(r=e.value,r=typeof r===a?r.apply(e):r),l+=u(r)+'" class="',(r=n.value)?r=r.call(e,{hash:{},data:t}):(r=e.value,r=typeof r===a?r.apply(e):r),l+=u(r)+'">',(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+"</a></li>\r\n			"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+='	<div class="option-combo filter">\r\n		<h2>Filter:</h2>\r\n		<ul class="option-set clearfix" data-option-key="filter">\r\n			',s=n.each.call(t,t,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o+="\r\n		</ul>\r\n	</div>"}),this.visaRDF.groupDropDown=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+="\r\n      		<option value=",(r=n.val)?r=r.call(e,{hash:{},data:t}):(r=e.val,r=typeof r===a?r.apply(e):r),l+=u(r)+">",(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+"</option>\r\n		"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+='	<select id="GroupDropDown">\r\n		',s=n.each.call(t,t,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o+="\r\n    </select>"}),this.visaRDF.isotopeElements=Handlebars.template(function(e,t,n,r,l){function i(e,t){var l,i="";return i+="\r\n		",l=c.invokePartial(r.isotopeElement,"isotopeElement",e,n,r,t),(l||0===l)&&(i+=l),i+="\r\n	"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,r=r||e.partials,l=l||{};var s,o,a,u="",c=this,p=n.helperMissing;return u+="	",a={hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l},s=n.historyAwareEach,o=s?s.call(t,t,a):p.call(t,"historyAwareEach",t,a),(o||0===o)&&(u+=o),u}),this.visaRDF.overlayContent=Handlebars.template(function(e,t,n,r,l){function i(e,t){var r,l="";return l+="\r\n		<h1>",(r=n.label)?r=r.call(e,{hash:{},data:t}):(r=e.label,r=typeof r===a?r.apply(e):r),l+=u(r)+'</h1>\r\n		<div class="innerScroll">\r\n			<div></div>\r\n		</div>\r\n	'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o="",a="function",u=this.escapeExpression,c=this;return o+="	",s=n["if"].call(t,t.label,{hash:{},inverse:c.noop,fn:c.program(1,i,l),data:l}),(s||0===s)&&(o+=s),o}),this.visaRDF.overlayElement=Handlebars.template(function(e,t,n,r,l){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var i,s,o="",a="function",u=this.escapeExpression;return o+='		<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.overlay,typeof i===a?i.apply(t):i))+" "+u((i=t.cssClass,i=null==i||i===!1?i:i.overlay,typeof i===a?i.apply(t):i))+"_",(s=n.index)?s=s.call(t,{hash:{},data:l}):(s=t.index,s=typeof s===a?s.apply(t):s),o+=u(s)+'">\r\n			<span class="close">close</span>\r\n			<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.overlayContent,typeof i===a?i.apply(t):i))+'">\r\n			</div>\r\n		</div>'}),this.visaRDF.previewElement=Handlebars.template(function(e,t,n,r,l){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var i,s,o="",a="function",u=this.escapeExpression;return o+='		<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.preview,typeof i===a?i.apply(t):i))+" "+u((i=t.cssClass,i=null==i||i===!1?i:i.preview,typeof i===a?i.apply(t):i))+"_",(s=n.index)?s=s.call(t,{hash:{},data:l}):(s=t.index,s=typeof s===a?s.apply(t):s),o+=u(s)+'">\r\n			<div class="'+u((i=t.cssClass,i=null==i||i===!1?i:i.previewContent,typeof i===a?i.apply(t):i))+'">\r\n			</div>\r\n		</div>'}),this.visaRDF.sortOptions=Handlebars.template(function(e,t,n,r,l){function i(e){var t="";return t+='\r\n				<li><a data-sort-value="'+p(typeof e===c?e.apply(e):e)+'" class="'+p(typeof e===c?e.apply(e):e)+'">'+p(typeof e===c?e.apply(e):e)+"</a></li>\r\n			"}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,l=l||{};var s,o,a,u="",c="function",p=this.escapeExpression,h=this,f=n.helperMissing;return u+='	<div class="option-combo sorter">\r\n		<h2>Sort:</h2>\r\n		<ul class="option-set clearfix" data-option-key="sortBy">\r\n			',a={hash:{},inverse:h.noop,fn:h.program(1,i,l),data:l},s=n.keysEach,o=s?s.call(t,t,a):f.call(t,"keysEach",t,a),(o||0===o)&&(u+=o),u+="\r\n		</ul>\r\n	</div>"});